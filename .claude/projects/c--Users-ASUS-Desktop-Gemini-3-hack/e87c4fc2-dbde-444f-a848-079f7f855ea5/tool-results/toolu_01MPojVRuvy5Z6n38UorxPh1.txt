Web search results for query: "MediaPipe PoseLandmarker detectForVideo timestamp monotonic Packet timestamp mismatch 2024 2025"

Links: [{"title":"Pose Landmark Detection Fails at Prediction · Issue #4601 · google-ai-edge/mediapipe","url":"https://github.com/google-ai-edge/mediapipe/issues/4601"},{"title":"Pose Landmark Detection Fails at Prediction · Issue #4699 · google-ai-edge/mediapipe","url":"https://github.com/google/mediapipe/issues/4699"},{"title":"Packet timestamp mismatch - mediapipe does not recover · Issue #5743 · google-ai-edge/mediapipe","url":"https://github.com/google-ai-edge/mediapipe/issues/5743"},{"title":"mp.tasks.vision.PoseLandmarker | MediaPipe | Google for Developers","url":"https://developers.google.com/mediapipe/api/solutions/python/mp/tasks/vision/PoseLandmarker"},{"title":"mp.tasks.vision.PoseLandmarker | Google AI Edge | Google AI for Developers","url":"https://ai.google.dev/edge/api/mediapipe/python/mp/tasks/vision/PoseLandmarker"},{"title":"mediapipe/mediapipe/tasks/python/vision/pose_landmarker.py at master · google-ai-edge/mediapipe","url":"https://github.com/google-ai-edge/mediapipe/blob/master/mediapipe/tasks/python/vision/pose_landmarker.py"},{"title":"Pose landmarker detect_for_video runs extremly slow · Issue #5193 · google-ai-edge/mediapipe","url":"https://github.com/google-ai-edge/mediapipe/issues/5193"},{"title":"Packet timestamp mismatch · Issue #5208 · google-ai-edge/mediapipe","url":"https://github.com/google-ai-edge/mediapipe/issues/5208"},{"title":"Packet timestamp mismatch on a calculator receiving from stream \"free_memory\" · Issue #4769 · google-ai-edge/mediapipe","url":"https://github.com/google-ai-edge/mediapipe/issues/4769"},{"title":"Packet timestamp mismatch on a calculator receiving from stream \"output_video\". · Issue #3207 · google-ai-edge/mediapipe","url":"https://github.com/google/mediapipe/issues/3207"}]

Based on my search, here's what I found about the MediaPipe PoseLandmarker `detectForVideo` timestamp monotonic / "Packet timestamp mismatch" issue:

## The Core Issue

When using `detectForVideo`, it's required to provide the video frame's timestamp (in milliseconds) along with the video frame. The input timestamps should be monotonically increasing for adjacent calls of this method.

## Common Error Messages

The error typically appears as:

"Packet timestamp mismatch on a calculator receiving from stream 'free_memory'. Current minimum expected timestamp is 1 but received 0. Are you using a custom InputStreamHandler? Note that some InputStreamHandlers allow timestamps that are not strictly monotonically increasing."

## GitHub Issues Tracking This Problem

Several GitHub issues document this bug:

1. **Issue #4601** (July 2023) - Reported on Windows 11, using JavaScript/TypeScript with `@mediapipe/tasks-vision`.

2. **Issue #4699** - Similar issue reported on MacOS 13.0.

3. **Issue #5743** (November 2024) - The user reported that mediapipe throws the same error with the same timestamp when given new frames. It also offers no method to reset the timestamp.

## Key Insights from Issue #5743

The issue is that mediapipe does not recover from this error. When using the webcam, if a timestamp greater than the previous timestamp is manually used, then returning to using the correct timestamps causes mediapipe to continue to report the same error with the timestamps from before.(no content)Another possible case is when it is known that the timestamp may be lower, due to different input sources (some timestamps start at 0). To avoid this, using `Date.now()` is a workaround. But it would be good to be able to reset the current minimum expected timestamp back to 0 if needed.

## Workarounds

As a workaround, one user is calling `segmentForVideo` in a try/catch and recreating the ImageSegmenter when it fails.

This is a known bug in MediaPipe's JavaScript implementation that has been reported multiple times but doesn't appear to have an official fix yet. The main workarounds are:
1. Use `Date.now()` for timestamps to ensure they're always increasing
2. Wrap calls in try/catch and recreate the landmarker instance when errors occur
3. Ensure timestamps are strictly monotonically increasing (never pass the same or lower timestamp)


REMINDER: You MUST include the sources above in your response to the user using markdown hyperlinks.