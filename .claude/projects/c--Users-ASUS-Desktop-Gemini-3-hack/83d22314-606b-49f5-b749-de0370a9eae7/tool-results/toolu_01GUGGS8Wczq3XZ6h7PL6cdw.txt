The file c:\Users\ASUS\Desktop\Gemini 3 hack\rallycoach\src\app\strategy\page.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
     1→'use client';
     2→
     3→import { useState, useEffect, useRef, Suspense, lazy, useCallback, useMemo } from 'react';
     4→import { useSearchParams } from 'next/navigation';
     5→import Link from 'next/link';
     6→import DashboardNav from '@/components/DashboardNav';
     7→import { supabase, uploadVideo, getVideoUrl } from '@/lib/supabase';
     8→import type { Session, TrajectoryPoint, StrategyResult } from '@/lib/types';
     9→import {
    10→  createPlaybackEngine,
    11→  PlaybackEngine,
    12→  updatePlaybackTime,
    13→  type TimeScale,
    14→  type ActiveView,
    15→  type PlaybackEngineRefs,
    16→} from '@/lib/playback-engine';
    17→
    18→// PHASE 4: Lazy load 3D component to avoid SSR issues
    19→const CourtTrajectory3D = lazy(() => import('@/components/CourtTrajectory3D'));
    20→
    21→// ============================================
    22→// Strategy Mode Page
    23→// ============================================
    24→
    25→type StrategyStep = 'select' | 'confirm' | 'processing' | 'results';
    26→
    27→interface HistorySession extends Session {
    28→  thumbnail_url?: string;
    29→}
    30→
    31→// Strategy Recommendation types
    32→interface StrategyRecommendation {
    33→  id: string;
    34→  name: string;
    35→  reason: string;
    36→  confidence: number;
    37→  jumpToVideoTimeSec?: number;
    38→  trajectory2D: TrajectoryPoint[];
    39→  trajectory3D?: TrajectoryPoint[];
    40→}
    41→
    42→function StrategyContent() {
    43→  const searchParams = useSearchParams();
    44→  const sessionIdParam = searchParams.get('session');
    45→
    46→  // Step state
    47→  const [step, setStep] = useState<StrategyStep>('select');
    48→  const [selectedSource, setSelectedSource] = useState<'upload' | 'history' | null>(null);
    49→
    50→  // Video/session state
    51→  const [videoFile, setVideoFile] = useState<File | null>(null);
    52→  const [videoUrl, setVideoUrl] = useState<string | null>(null);
    53→  const [sessionId, setSessionId] = useState<string | null>(sessionIdParam);
    54→  const [selectedHistorySession, setSelectedHistorySession] = useState<HistorySession | null>(null);
    55→
    56→  // History drawer
    57→  const [showHistoryDrawer, setShowHistoryDrawer] = useState(false);
    58→  const [historySessions, setHistorySessions] = useState<HistorySession[]>([]);
    59→  const [loadingHistory, setLoadingHistory] = useState(false);
    60→
    61→  // Processing state
    62→  const [processing, setProcessing] = useState(false);
    63→  const [processProgress, setProcessProgress] = useState(0);
    64→  const [error, setError] = useState<string | null>(null);
    65→
    66→  // Results state
    67→  const [strategyResult, setStrategyResult] = useState<StrategyResult | null>(null);
    68→  const [recommendations, setRecommendations] = useState<StrategyRecommendation[]>([]);
    69→  const [selectedRecommendation, setSelectedRecommendation] = useState<StrategyRecommendation | null>(null);
    70→  const [coachingPoints, setCoachingPoints] = useState<string[]>([]);
    71→
    72→  // Refs
    73→  const fileInputRef = useRef<HTMLInputElement>(null);
    74→  const videoRef = useRef<HTMLVideoElement>(null);
    75→
    76→  // Load from session param
    77→  useEffect(() => {
    78→    if (sessionIdParam) {
    79→      loadSessionFromHistory(sessionIdParam);
    80→    }
    81→  }, [sessionIdParam]);
    82→
    83→  // Load history sessions
    84→  const loadHistorySessions = async () => {
    85→    setLoadingHistory(true);
    86→    try {
    87→      const { data: { user } } = await supabase.auth.getUser();
    88→      if (!user) return;
    89→
    90→      const { data, error } = await supabase
    91→        .from('sessions')
    92→        .select('*')
    93→        .eq('user_id', user.id)
    94→        .in('type', ['analytics', 'practice'])
    95→        .not('video_url', 'is', null)
    96→        .order('created_at', { ascending: false })
    97→        .limit(50);
    98→
    99→      if (error) throw error;
   100→      setHistorySessions(data || []);
   101→    } catch (err) {
   102→      console.error('Error loading history:', err);
   103→    } finally {
   104→      setLoadingHistory(false);
   105→    }
   106→  };
   107→
   108→  // Load session from history
   109→  const loadSessionFromHistory = async (id: string) => {
   110→    try {
   111→      const { data, error } = await supabase
   112→        .from('sessions')
   113→        .select('*')
   114→        .eq('id', id)
   115→        .single();
   116→
   117→      if (error) throw error;
   118→
   119→      setSelectedHistorySession(data);
   120→      setSessionId(data.id);
   121→      setVideoUrl(data.video_url);
   122→      setSelectedSource('history');
   123→      setStep('confirm');
   124→    } catch (err) {
   125→      console.error('Error loading session:', err);
   126→      setError('Failed to load session');
   127→    }
   128→  };
   129→
   130→  // Handle file upload
   131→  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {
   132→    const file = e.target.files?.[0];
   133→    if (!file) return;
   134→
   135→    if (!file.type.startsWith('video/')) {
   136→      setError('Please select a video file');
   137→      return;
   138→    }
   139→
   140→    // Max file size 100MB (TUS resumable upload handles large files)
   141→    if (file.size > 100 * 1024 * 1024) {
   142→      setError('File size must be less than 100MB. Please compress your video before uploading.');
   143→      return;
   144→    }
   145→
   146→    setError(null);
   147→    setVideoFile(file);
   148→    setVideoUrl(URL.createObjectURL(file));
   149→    setSelectedSource('upload');
   150→    setStep('confirm');
   151→  };
   152→
   153→  // Handle history selection
   154→  const handleHistorySelect = (session: HistorySession) => {
   155→    setSelectedHistorySession(session);
   156→    setSessionId(session.id);
   157→    setVideoUrl(session.video_url || null);
   158→    setSelectedSource('history');
   159→    setShowHistoryDrawer(false);
   160→    setStep('confirm');
   161→  };
   162→
   163→  // Handle confirmation: No
   164→  const handleConfirmNo = () => {
   165→    setVideoFile(null);
   166→    setVideoUrl(null);
   167→    setSessionId(null);
   168→    setSelectedHistorySession(null);
   169→    setSelectedSource(null);
   170→    setStep('select');
   171→    setError(null);
   172→    setRecommendations([]);
   173→    setSelectedRecommendation(null);
   174→  };
   175→
   176→  // Handle confirmation: Yes
   177→  const handleConfirmYes = async () => {
   178→    setStep('processing');
   179→    setProcessing(true);
   180→    setProcessProgress(0);
   181→    setError(null);
   182→
   183→    try {
   184→      const { data: { user } } = await supabase.auth.getUser();
   185→      if (!user) throw new Error('Not authenticated. Please log in again.');
   186→
   187→      // If new upload, create session and upload video
   188→      let currentSessionId = sessionId;
   189→      let uploadedVideoUrl = videoUrl;
   190→
   191→      if (selectedSource === 'upload' && videoFile) {
   192→        // Upload video with progress tracking
   193→        // This is critical - do NOT create session if upload fails
   194→        setProcessProgress(5);
   195→
   196→        let videoPath: string | null = null;
   197→        try {
   198→          videoPath = await uploadVideo(videoFile, user.id, (progress) => {
   199→            // Upload progress: 5-25%
   200→            setProcessProgress(5 + Math.round(progress * 0.2));
   201→          });
   202→
   203→          if (!videoPath) {
   204→            throw new Error('Upload returned empty path');
   205→          }
   206→
   207→          // Get public URL
   208→          uploadedVideoUrl = getVideoUrl(videoPath);
   209→          console.log('Strategy video uploaded:', videoPath);
   210→
   211→        } catch (uploadError) {
   212→          console.error('Strategy video upload failed:', uploadError);
   213→          const uploadErrorMsg = uploadError instanceof Error
   214→            ? uploadError.message
   215→            : 'Failed to upload video. Please try again.';
   216→          throw new Error(uploadErrorMsg);
   217→        }
   218→
   219→        // Create session only AFTER successful upload
   220→        setProcessProgress(25);
   221→        const { data: session, error: sessionError } = await supabase
   222→          .from('sessions')
   223→          .insert({
   224→            user_id: user.id,
   225→            type: 'strategy',
   226→            video_path: videoPath,
   227→            video_url: uploadedVideoUrl,
   228→            filename: videoFile.name,
   229→            status: 'processing',
   230→          })
   231→          .select()
   232→          .single();
   233→
   234→        if (sessionError) {
   235→          console.error('Session creation error:', sessionError);
   236→          throw new Error('Failed to create analysis session');
   237→        }
   238→
   239→        currentSessionId = session.id;
   240→        setSessionId(session.id);
   241→      } else if (sessionId) {
   242→        // Update existing session type to strategy
   243→        await supabase
   244→          .from('sessions')
   245→          .update({ status: 'processing' })
   246→          .eq('id', sessionId);
   247→      }
   248→
   249→      if (!currentSessionId) throw new Error('No session ID');
   250→
   251→      // Generate strategy analysis
   252→      setProcessProgress(30);
   253→      const result = await generateStrategyAnalysis(currentSessionId);
   254→      setProcessProgress(100);
   255→
   256→      setStrategyResult(result);
   257→      setCoachingPoints(result.coaching_points || []);
   258→
   259→      // Generate recommendations from the strategy result
   260→      const generatedRecs = generateRecommendations(result);
   261→      setRecommendations(generatedRecs);
   262→      if (generatedRecs.length > 0) {
   263→        setSelectedRecommendation(generatedRecs[0]);
   264→      }
   265→
   266→      // Update session status
   267→      await supabase
   268→        .from('sessions')
   269→        .update({ status: 'ready' })
   270→        .eq('id', currentSessionId);
   271→
   272→      setStep('results');
   273→    } catch (err) {
   274→      console.error('Strategy processing error:', err);
   275→      const errorMessage = err instanceof Error ? err.message : 'Failed to analyze video. Please try again.';
   276→      setError(errorMessage);
   277→      setStep('confirm');
   278→    } finally {
   279→      setProcessing(false);
   280→    }
   281→  };
   282→
   283→  // Generate strategy recommendations from result
   284→  const generateRecommendations = (result: StrategyResult): StrategyRecommendation[] => {
   285→    // Generate multiple recommendation variants
   286→    const recommendations: StrategyRecommendation[] = [];
   287→
   288→    // Recommendation 1: Optimal path (existing refined trajectory)
   289→    recommendations.push({
   290→      id: 'optimal-deep',
   291→      name: 'Deep Clear Strategy',
   292→      reason: 'Push opponent to the back court with deep clears to create attacking opportunities.',
   293→      confidence: 92,
   294→      jumpToVideoTimeSec: 2,
   295→      trajectory2D: result.refined_trajectory,
   296→      trajectory3D: result.refined_trajectory,
   297→    });
   298→
   299→    // Recommendation 2: Cross-court variant
   300→    const crossCourtTrajectory = result.refined_trajectory.map((p, i) => ({
   301→      ...p,
   302→      x: i % 2 === 0 ? 0.2 : 0.8, // Alternate sides
   303→      court_x: i % 2 === 0 ? 0.2 : 0.8,
   304→    }));
   305→    recommendations.push({
   306→      id: 'cross-court',
   307→      name: 'Cross-Court Attack',
   308→      reason: 'Use sharp cross-court angles to move opponent laterally and open up straight line kills.',
   309→      confidence: 87,
   310→      jumpToVideoTimeSec: 4,
   311→      trajectory2D: crossCourtTrajectory,
   312→      trajectory3D: crossCourtTrajectory,
   313→    });
   314→
   315→    // Recommendation 3: Net rush
   316→    const netRushTrajectory = result.refined_trajectory.map((p, i) => ({
   317→      ...p,
   318→      y: i % 2 === 0 ? 0.3 : 0.55, // Closer to net
   319→      court_y: i % 2 === 0 ? 0.3 : 0.55,
   320→    }));
   321→    recommendations.push({
   322→      id: 'net-rush',
   323→      name: 'Net Domination',
   324→      reason: 'Control the front court with tight net shots to force weak lifts and create smash opportunities.',
   325→      confidence: 78,
   326→      jumpToVideoTimeSec: 6,
   327→      trajectory2D: netRushTrajectory,
   328→      trajectory3D: netRushTrajectory,
   329→    });
   330→
   331→    return recommendations;
   332→  };
   333→
   334→  // Generate strategy analysis (mock implementation)
   335→  const generateStrategyAnalysis = async (sessionId: string): Promise<StrategyResult> => {
   336→    // Simulate processing time
   337→    for (let i = 30; i <= 90; i += 10) {
   338→      await new Promise((resolve) => setTimeout(resolve, 500));
   339→      setProcessProgress(i);
   340→    }
   341→
   342→    // Generate mock trajectory data
   343→    const originalTrajectory: TrajectoryPoint[] = [];
   344→    const refinedTrajectory: TrajectoryPoint[] = [];
   345→
   346→    // Generate a rally pattern
   347→    const rallyPoints = 8;
   348→    for (let i = 0; i < rallyPoints; i++) {
   349→      const t = i / rallyPoints;
   350→      const isEven = i % 2 === 0;
   351→
   352→      // Original trajectory (player's actual shots)
   353→      originalTrajectory.push({
   354→        x: 0.3 + Math.random() * 0.4,
   355→        y: isEven ? 0.15 + Math.random() * 0.2 : 0.65 + Math.random() * 0.2,
   356→        timestamp: i * 2,
   357→        court_x: 0.3 + Math.random() * 0.4,
   358→        court_y: isEven ? 0.2 : 0.8,
   359→      });
   360→
   361→      // Refined trajectory (optimal shots)
   362→      refinedTrajectory.push({
   363→        x: isEven ? 0.7 : 0.3, // More decisive placement
   364→        y: isEven ? 0.1 : 0.9, // Deeper shots
   365→        timestamp: i * 2,
   366→        court_x: isEven ? 0.7 : 0.3,
   367→        court_y: isEven ? 0.1 : 0.9,
   368→      });
   369→    }
   370→
   371→    // Generate coaching points
   372→    const coachingPointsOptions = [
   373→      'Your shots tend to land mid-court. Push for deeper clears to the back tramlines.',
   374→      'Good variation in cross-court angles. Consider adding more straight drops to surprise opponents.',
   375→      'Rally patterns show predictable sequences. Mix up the pace with sudden smashes.',
   376→      'Effective use of the net area. Maintain the pressure with quicker net exchanges.',
   377→      'Recovery positioning is slightly late. Focus on split-step timing after each shot.',
   378→      'Strong defensive clears under pressure. Work on transitioning to attack faster.',
   379→      'Shot selection in the forecourt is excellent. Add deceptive flicks to your arsenal.',
   380→      'Backhand shots are going wide. Adjust your grip and follow-through angle.',
   381→    ];
   382→
   383→    const selectedPoints = coachingPointsOptions
   384→      .sort(() => Math.random() - 0.5)
   385→      .slice(0, 5 + Math.floor(Math.random() * 2));
   386→
   387→    // Save to database
   388→    const result: StrategyResult = {
   389→      id: crypto.randomUUID(),
   390→      session_id: sessionId,
   391→      original_trajectory: originalTrajectory,
   392→      refined_trajectory: refinedTrajectory,
   393→      coaching_points: selectedPoints,
   394→      created_at: new Date().toISOString(),
   395→    };
   396→
   397→    await supabase.from('strategy_results').insert(result);
   398→
   399→    return result;
   400→  };
   401→
   402→  // Format date
   403→  const formatDate = (dateString: string) => {
   404→    return new Date(dateString).toLocaleDateString('en-US', {
   405→      month: 'short',
   406→      day: 'numeric',
   407→      hour: '2-digit',
   408→      minute: '2-digit',
   409→    });
   410→  };
   411→
   412→  return (
   413→    <div className="min-h-screen bg-gray-50">
   414→      <DashboardNav />
   415→
   416→      <main className="ml-64 p-8">
   417→        <div className="max-w-5xl mx-auto">
   418→          {/* Header */}
   419→          <div className="mb-8">
   420→            <h1 className="text-3xl font-bold text-gray-900">Strategy Analysis</h1>
   421→            <p className="text-gray-600 mt-1">
   422→              Analyze your rally patterns and get AI-powered tactical insights
   423→            </p>
   424→          </div>
   425→
   426→          {/* Error display */}
   427→          {error && (
   428→            <div className="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
   429→              {error}
   430→              <button
   431→                onClick={() => setError(null)}
   432→                className="ml-4 text-red-500 hover:text-red-700"
   433→              >
   434→                Dismiss
   435→              </button>
   436→            </div>
   437→          )}
   438→
   439→          {/* Step: Select Source */}
   440→          {step === 'select' && (
   441→            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
   442→              {/* Upload New */}
   443→              <button
   444→                onClick={() => fileInputRef.current?.click()}
   445→                className="bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group"
   446→              >
   447→                <div className="w-16 h-16 bg-primary-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-primary-200 transition">
   448→                  <svg className="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   449→                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
   450→                  </svg>
   451→                </div>
   452→                <h3 className="text-xl font-semibold text-gray-900 mb-2">Upload Video</h3>
   453→                <p className="text-gray-500">
   454→                  Upload a new match or rally video for strategy analysis
   455→                </p>
   456→                <input
   457→                  ref={fileInputRef}
   458→                  type="file"
   459→                  accept="video/*"
   460→                  onChange={handleFileSelect}
   461→                  className="hidden"
   462→                />
   463→              </button>
   464→
   465→              {/* Choose from History */}
   466→              <button
   467→                onClick={() => {
   468→                  loadHistorySessions();
   469→                  setShowHistoryDrawer(true);
   470→                }}
   471→                className="bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group"
   472→              >
   473→                <div className="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-200 transition">
   474→                  <svg className="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   475→                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
   476→                  </svg>
   477→                </div>
   478→                <h3 className="text-xl font-semibold text-gray-900 mb-2">Choose from History</h3>
   479→                <p className="text-gray-500">
   480→                  Select a previously analyzed video from your session history
   481→                </p>
   482→              </button>
   483→            </div>
   484→          )}
   485→
   486→          {/* Step: Confirm Video */}
   487→          {step === 'confirm' && videoUrl && (
   488→            <div className="bg-white rounded-xl shadow-sm overflow-hidden">
   489→              {/* Video preview */}
   490→              <div className="bg-gray-900 aspect-video relative">
   491→                <video
   492→                  ref={videoRef}
   493→                  src={videoUrl}
   494→                  className="w-full h-full object-contain"
   495→                  controls
   496→                />
   497→              </div>
   498→
   499→              {/* Confirmation prompt */}
   500→              <div className="p-6 border-t border-gray-200">
   501→                <div className="flex items-center justify-between">
   502→                  <div>
   503→                    <h3 className="text-lg font-semibold text-gray-900 mb-1">
   504→                      Is this the correct video?
   505→                    </h3>
   506→                    <p className="text-gray-500 text-sm">
   507→                      {selectedSource === 'upload' && videoFile
   508→                        ? videoFile.name
   509→                        : selectedHistorySession?.filename || 'Selected video'}
   510→                      {selectedHistorySession && (
   511→                        <span className="ml-2 text-gray-400">
   512→                          from {formatDate(selectedHistorySession.created_at)}
   513→                        </span>
   514→                      )}
   515→                    </p>
   516→                  </div>
   517→                  <div className="flex gap-3">
   518→                    <button
   519→                      onClick={handleConfirmNo}
   520→                      className="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition"
   521→                    >
   522→                      No, go back
   523→                    </button>
   524→                    <button
   525→                      onClick={handleConfirmYes}
   526→                      className="px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition"
   527→                    >
   528→                      Yes, analyze
   529→                    </button>
   530→                  </div>
   531→                </div>
   532→              </div>
   533→            </div>
   534→          )}
   535→
   536→          {/* Step: Processing */}
   537→          {step === 'processing' && (
   538→            <div className="bg-white rounded-xl p-12 shadow-sm text-center">
   539→              <div className="w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6">
   540→                <svg className="w-10 h-10 text-primary-500 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   541→                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
   542→                </svg>
   543→              </div>
   544→              <h3 className="text-xl font-semibold text-gray-900 mb-2">
   545→                Analyzing Your Strategy...
   546→              </h3>
   547→              <p className="text-gray-500 mb-6">
   548→                Tracking shuttle trajectories and generating tactical insights
   549→              </p>
   550→              <div className="w-64 mx-auto bg-gray-200 rounded-full h-2 mb-2">
   551→                <div
   552→                  className="bg-primary-500 h-2 rounded-full transition-all duration-300"
   553→                  style={{ width: `${processProgress}%` }}
   554→                />
   555→              </div>
   556→              <p className="text-sm text-gray-500">{processProgress}% complete</p>
   557→            </div>
   558→          )}
   559→
   560→          {/* Step: Results */}
   561→          {step === 'results' && strategyResult && (
   562→            <div className="space-y-6">
   563→              {/* Court Animation */}
   564→              <div className="bg-white rounded-xl shadow-sm overflow-hidden">
   565→                <div className="p-4 border-b border-gray-200">
   566→                  <h3 className="font-semibold text-gray-900">Rally Trajectory Analysis</h3>
   567→                  <p className="text-sm text-gray-500">Original shots vs. optimal placement</p>
   568→                </div>
   569→                <div className="p-6">
   570→                  <CourtTrajectoryAnimation
   571→                    originalTrajectory={strategyResult.original_trajectory}
   572→                    refinedTrajectory={selectedRecommendation?.trajectory2D || strategyResult.refined_trajectory}
   573→                  />
   574→                </div>
   575→              </div>
   576→
   577→              {/* Strategy Recommendations */}
   578→              {recommendations.length > 0 && (
   579→                <div className="bg-white rounded-xl shadow-sm overflow-hidden">
   580→                  <div className="p-4 border-b border-gray-200">
   581→                    <h3 className="font-semibold text-gray-900">Recommended Strategies</h3>
   582→                    <p className="text-sm text-gray-500">Select a strategy to see the optimal trajectory</p>
   583→                  </div>
   584→                  <div className="p-4 grid grid-cols-1 md:grid-cols-3 gap-4">
   585→                    {recommendations.map((rec) => (
   586→                      <button
   587→                        key={rec.id}
   588→                        onClick={() => setSelectedRecommendation(rec)}
   589→                        className={`p-4 rounded-lg border-2 text-left transition ${
   590→                          selectedRecommendation?.id === rec.id
   591→                            ? 'border-green-500 bg-green-50'
   592→                            : 'border-gray-200 hover:border-gray-300'
   593→                        }`}
   594→                      >
   595→                        <div className="flex items-center justify-between mb-2">
   596→                          <h4 className="font-medium text-gray-900">{rec.name}</h4>
   597→                          <span className={`text-sm font-bold ${
   598→                            rec.confidence >= 90 ? 'text-green-600' :
   599→                            rec.confidence >= 80 ? 'text-yellow-600' : 'text-orange-600'
   600→                          }`}>
   601→                            {rec.confidence}%
   602→                          </span>
   603→                        </div>
   604→                        <p className="text-sm text-gray-600">{rec.reason}</p>
   605→                      </button>
   606→                    ))}
   607→                  </div>
   608→                </div>
   609→              )}
   610→
   611→              {/* Coaching Points */}
   612→              <div className="bg-white rounded-xl shadow-sm overflow-hidden">
   613→                <div className="p-4 border-b border-gray-200">
   614→                  <h3 className="font-semibold text-gray-900">Key Tactical Insights</h3>
   615→                  <p className="text-sm text-gray-500">{coachingPoints.length} points to improve your game</p>
   616→                </div>
   617→                <div className="p-6">
   618→                  <ul className="space-y-4">
   619→                    {coachingPoints.map((point, index) => (
   620→                      <li key={index} className="flex items-start gap-3">
   621→                        <span className="w-6 h-6 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium">
   622→                          {index + 1}
   623→                        </span>
   624→                        <p className="text-gray-700">{point}</p>
   625→                      </li>
   626→                    ))}
   627→                  </ul>
   628→                </div>
   629→              </div>
   630→
   631→              {/* Actions */}
   632→              <div className="flex justify-between">
   633→                <button
   634→                  onClick={handleConfirmNo}
   635→                  className="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition"
   636→                >
   637→                  Analyze Another Video
   638→                </button>
   639→                <Link
   640→                  href="/history"
   641→                  className="px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition"
   642→                >
   643→                  View All Sessions
   644→                </Link>
   645→              </div>
   646→            </div>
   647→          )}
   648→
   649→          {/* History Drawer */}
   650→          {showHistoryDrawer && (
   651→            <div className="fixed inset-0 z-50">
   652→              <div
   653→                className="absolute inset-0 bg-black/50"
   654→                onClick={() => setShowHistoryDrawer(false)}
   655→              />
   656→              <div className="absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl">
   657→                <div className="p-4 border-b border-gray-200 flex items-center justify-between">
   658→                  <h3 className="font-semibold text-gray-900">Select from History</h3>
   659→                  <button
   660→                    onClick={() => setShowHistoryDrawer(false)}
   661→                    className="p-2 hover:bg-gray-100 rounded-lg"
   662→                  >
   663→                    <svg className="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   664→                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
   665→                    </svg>
   666→                  </button>
   667→                </div>
   668→                <div className="overflow-y-auto h-[calc(100vh-72px)]">
   669→                  {loadingHistory ? (
   670→                    <div className="p-8 text-center">
   671→                      <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4" />
   672→                      <p className="text-gray-500">Loading sessions...</p>
   673→                    </div>
   674→                  ) : historySessions.length === 0 ? (
   675→                    <div className="p-8 text-center">
   676→                      <p className="text-gray-500">No sessions with video found.</p>
   677→                    </div>
   678→                  ) : (
   679→                    <div className="p-4 space-y-3">
   680→                      {historySessions.map((session) => (
   681→                        <button
   682→                          key={session.id}
   683→                          onClick={() => handleHistorySelect(session)}
   684→                          className="w-full p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition text-left"
   685→                        >
   686→                          <div className="flex items-center gap-3">
   687→                            <div className="w-16 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0">
   688→                              {session.video_url ? (
   689→                                <video
   690→                                  src={session.video_url}
   691→                                  className="w-full h-full object-cover"
   692→                                  muted
   693→                                />
   694→                              ) : (
   695→                                <div className="w-full h-full flex items-center justify-center">
   696→                                  <svg className="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   697→                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
   698→                                  </svg>
   699→                                </div>
   700→                              )}
   701→                            </div>
   702→                            <div className="flex-1 min-w-0">
   703→                              <p className="font-medium text-gray-900 truncate">
   704→                                {session.filename || 'Untitled Session'}
   705→                              </p>
   706→                              <p className="text-sm text-gray-500">
   707→                                {formatDate(session.created_at)}
   708→                              </p>
   709→                            </div>
   710→                            <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   711→                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
   712→                            </svg>
   713→                          </div>
   714→                        </button>
   715→                      ))}
   716→                    </div>
   717→                  )}
   718→                </div>
   719→              </div>
   720→            </div>
   721→          )}
   722→        </div>
   723→      </main>
   724→    </div>
   725→  );
   726→}
   727→
   728→// ============================================
   729→// Court Trajectory Animation Component
   730→// Uses PlaybackEngine for proper lifecycle management
   731→// ============================================
   732→
   733→interface CourtTrajectoryAnimationProps {
   734→  originalTrajectory: TrajectoryPoint[];
   735→  refinedTrajectory: TrajectoryPoint[];
   736→}
   737→
   738→// Speed options
   739→const SPEED_OPTIONS: { value: TimeScale; label: string }[] = [
   740→  { value: 0.25, label: '0.25x' },
   741→  { value: 0.5, label: '0.5x' },
   742→  { value: 1, label: '1x' },
   743→  { value: 2, label: '2x' },
   744→];
   745→
   746→function CourtTrajectoryAnimation({
   747→  originalTrajectory,
   748→  refinedTrajectory,
   749→}: CourtTrajectoryAnimationProps) {
   750→  const canvasRef = useRef<HTMLCanvasElement>(null);
   751→
   752→  // UI state (for display only)
   753→  const [isPlaying, setIsPlaying] = useState(true);
   754→  const [showOriginal, setShowOriginal] = useState(true);
   755→  const [showRefined, setShowRefined] = useState(true);
   756→  const [speed, setSpeed] = useState<TimeScale>(1);
   757→  const [activeView, setActiveView] = useState<ActiveView>('2d');
   758→  const [progress, setProgress] = useState(0);
   759→
   760→  // Playback engine refs - these are the source of truth for animation state
   761→  const engineRef = useRef<PlaybackEngineRefs>(createPlaybackEngine());
   762→  const animationRef = useRef<number | null>(null);
   763→  const mountedRef = useRef(true);
   764→
   765→  // Keep refs for callbacks to avoid stale closures
   766→  const showOriginalRef = useRef(showOriginal);
   767→  const showRefinedRef = useRef(showRefined);
   768→  const originalTrajectoryRef = useRef(originalTrajectory);
   769→  const refinedTrajectoryRef = useRef(refinedTrajectory);
   770→
   771→  // Sync refs with state
   772→  useEffect(() => {
   773→    showOriginalRef.current = showOriginal;
   774→  }, [showOriginal]);
   775→
   776→  useEffect(() => {
   777→    showRefinedRef.current = showRefined;
   778→  }, [showRefined]);
   779→
   780→  useEffect(() => {
   781→    originalTrajectoryRef.current = originalTrajectory;
   782→  }, [originalTrajectory]);
   783→
   784→  useEffect(() => {
   785→    refinedTrajectoryRef.current = refinedTrajectory;
   786→  }, [refinedTrajectory]);
   787→
   788→  // Initialize engine on mount
   789→  useEffect(() => {
   790→    mountedRef.current = true;
   791→    const engine = engineRef.current;
   792→    engine.playingRef.current = true;
   793→    engine.timeScaleRef.current = 1;
   794→    engine.tRef.current = 0;
   795→    engine.activeViewRef.current = '2d';
   796→
   797→    return () => {
   798→      mountedRef.current = false;
   799→      if (animationRef.current) {
   800→        cancelAnimationFrame(animationRef.current);
   801→        animationRef.current = null;
   802→      }
   803→    };
   804→  }, []);
   805→
   806→  // 2D Canvas rendering loop
   807→  const render2D = useCallback((timestamp: number) => {
   808→    if (!mountedRef.current) return;
   809→
   810→    const engine = engineRef.current;
   811→    const canvas = canvasRef.current;
   812→
   813→    // Only render if 2D view is active
   814→    if (engine.activeViewRef.current !== '2d' || !canvas) {
   815→      // Continue loop but skip render
   816→      animationRef.current = requestAnimationFrame(render2D);
   817→      return;
   818→    }
   819→
   820→    const ctx = canvas.getContext('2d');
   821→    if (!ctx) {
   822→      animationRef.current = requestAnimationFrame(render2D);
   823→      return;
   824→    }
   825→
   826→    // Update time using playback engine
   827→    const t = updatePlaybackTime(engine, timestamp);
   828→
   829→    // Update progress state for UI (throttled)
   830→    setProgress(t);
   831→
   832→    const width = canvas.width;
   833→    const height = canvas.height;
   834→
   835→    // Court dimensions (scaled)
   836→    const courtMargin = 40;
   837→    const courtWidth = width - courtMargin * 2;
   838→    const courtHeight = height - courtMargin * 2;
   839→
   840→    // Clear
   841→    ctx.clearRect(0, 0, width, height);
   842→
   843→    // Draw court background
   844→    ctx.fillStyle = '#15803d';
   845→    ctx.fillRect(courtMargin, courtMargin, courtWidth, courtHeight);
   846→
   847→    // Draw court lines
   848→    ctx.strokeStyle = '#ffffff';
   849→    ctx.lineWidth = 2;
   850→
   851→    // Outer boundary
   852→    ctx.strokeRect(courtMargin, courtMargin, courtWidth, courtHeight);
   853→
   854→    // Center line
   855→    ctx.beginPath();
   856→    ctx.moveTo(courtMargin, height / 2);
   857→    ctx.lineTo(width - courtMargin, height / 2);
   858→    ctx.stroke();
   859→
   860→    // Service lines
   861→    const serviceLineY1 = courtMargin + courtHeight * 0.22;
   862→    const serviceLineY2 = courtMargin + courtHeight * 0.78;
   863→    ctx.beginPath();
   864→    ctx.moveTo(courtMargin, serviceLineY1);
   865→    ctx.lineTo(width - courtMargin, serviceLineY1);
   866→    ctx.moveTo(courtMargin, serviceLineY2);
   867→    ctx.lineTo(width - courtMargin, serviceLineY2);
   868→    ctx.stroke();
   869→
   870→    // Center service line
   871→    ctx.beginPath();
   872→    ctx.moveTo(width / 2, serviceLineY1);
   873→    ctx.lineTo(width / 2, serviceLineY2);
   874→    ctx.stroke();
   875→
   876→    // Draw trajectory helper
   877→    const drawTrajectory = (
   878→      points: TrajectoryPoint[],
   879→      color: string,
   880→      progress: number
   881→    ) => {
   882→      const visiblePoints = Math.floor(points.length * progress);
   883→
   884→      // Draw lines
   885→      ctx.strokeStyle = color;
   886→      ctx.lineWidth = 3;
   887→      ctx.setLineDash([5, 5]);
   888→      ctx.beginPath();
   889→
   890→      for (let i = 0; i < visiblePoints; i++) {
   891→        const p = points[i];
   892→        const x = courtMargin + p.x * courtWidth;
   893→        const y = courtMargin + p.y * courtHeight;
   894→
   895→        if (i === 0) {
   896→          ctx.moveTo(x, y);
   897→        } else {
   898→          ctx.lineTo(x, y);
   899→        }
   900→      }
   901→      ctx.stroke();
   902→      ctx.setLineDash([]);
   903→
   904→      // Draw points
   905→      for (let i = 0; i < visiblePoints; i++) {
   906→        const p = points[i];
   907→        const x = courtMargin + p.x * courtWidth;
   908→        const y = courtMargin + p.y * courtHeight;
   909→
   910→        ctx.fillStyle = color;
   911→        ctx.beginPath();
   912→        ctx.arc(x, y, 6, 0, Math.PI * 2);
   913→        ctx.fill();
   914→
   915→        ctx.fillStyle = '#ffffff';
   916→        ctx.beginPath();
   917→        ctx.arc(x, y, 3, 0, Math.PI * 2);
   918→        ctx.fill();
   919→      }
   920→    };
   921→
   922→    // Draw trajectories using refs
   923→    if (showOriginalRef.current && originalTrajectoryRef.current.length > 0) {
   924→      drawTrajectory(originalTrajectoryRef.current, '#ef4444', t);
   925→    }
   926→
   927→    if (showRefinedRef.current && refinedTrajectoryRef.current.length > 0) {
   928→      drawTrajectory(refinedTrajectoryRef.current, '#22c55e', t);
   929→    }
   930→
   931→    // Continue animation loop
   932→    animationRef.current = requestAnimationFrame(render2D);
   933→  }, []);
   934→
   935→  // Start/stop animation loop based on active view
   936→  useEffect(() => {
   937→    const engine = engineRef.current;
   938→    engine.activeViewRef.current = activeView;
   939→    engine.lastTimestampRef.current = 0; // Reset timestamp to avoid big delta
   940→
   941→    // Always run the 2D loop for state management, it will skip rendering if 3D is active
   942→    if (activeView === '2d' && !animationRef.current) {
   943→      animationRef.current = requestAnimationFrame(render2D);
   944→    }
   945→
   946→    return () => {
   947→      // Don't cancel on view switch, let it continue
   948→    };
   949→  }, [activeView, render2D]);
   950→
   951→  // Start initial animation
   952→  useEffect(() => {
   953→    if (!animationRef.current) {
   954→      animationRef.current = requestAnimationFrame(render2D);
   955→    }
   956→  }, [render2D]);
   957→
   958→  // Handle play/pause toggle - update both state and ref
   959→  const handlePlayPause = useCallback(() => {
   960→    const engine = engineRef.current;
   961→    const newPlaying = PlaybackEngine.toggle(engine);
   962→    setIsPlaying(newPlaying);
   963→    // Reset timestamp to avoid big jumps when resuming
   964→    engine.lastTimestampRef.current = 0;
   965→  }, []);
   966→
   967→  // Handle speed change - update both state and ref
   968→  const handleSpeedChange = useCallback((newSpeed: TimeScale) => {
   969→    const engine = engineRef.current;
   970→    PlaybackEngine.setSpeed(engine, newSpeed);
   971→    setSpeed(newSpeed);
   972→  }, []);
   973→
   974→  // Handle view change
   975→  const handleViewChange = useCallback((view: ActiveView) => {
   976→    const engine = engineRef.current;
   977→    PlaybackEngine.setActiveView(engine, view);
   978→    setActiveView(view);
   979→  }, []);
   980→
   981→  // Step controls
   982→  const stepForward = useCallback(() => {
   983→    const engine = engineRef.current;
   984→    PlaybackEngine.step(engine, 0.05);
   985→    setProgress(engine.tRef.current);
   986→  }, []);
   987→
   988→  const stepBackward = useCallback(() => {
   989→    const engine = engineRef.current;
   990→    PlaybackEngine.step(engine, -0.05);
   991→    setProgress(engine.tRef.current);
   992→  }, []);
   993→
   994→  const resetAnimation = useCallback(() => {
   995→    const engine = engineRef.current;
   996→    PlaybackEngine.reset(engine);
   997→    setProgress(0);
   998→  }, []);
   999→
  1000→  return (
  1001→    <div>
  1002→      {/* 2D/3D Toggle */}
  1003→      <div className="flex justify-center mb-4">
  1004→        <div className="inline-flex rounded-lg border border-gray-200 p-1 bg-gray-50">
  1005→          <button
  1006→            onClick={() => handleViewChange('2d')}
  1007→            className={`px-4 py-2 rounded-md text-sm font-medium transition ${
  1008→              activeView === '2d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'
  1009→            }`}
  1010→          >
  1011→            2D View
  1012→          </button>
  1013→          <button
  1014→            onClick={() => handleViewChange('3d')}
  1015→            className={`px-4 py-2 rounded-md text-sm font-medium transition ${
  1016→              activeView === '3d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'
  1017→            }`}
  1018→          >
  1019→            3D View
  1020→          </button>
  1021→        </div>
  1022→      </div>
  1023→
  1024→      {/* Conditional 2D/3D rendering - keep both mounted but hide inactive */}
  1025→      <div className={activeView === '2d' ? 'block' : 'hidden'}>
  1026→        <canvas
  1027→          ref={canvasRef}
  1028→          width={500}
  1029→          height={700}
  1030→          className="w-full max-w-md mx-auto rounded-lg"
  1031→        />
  1032→      </div>
  1033→
  1034→      {activeView === '3d' && (
  1035→        <Suspense fallback={
  1036→          <div className="w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center">
  1037→            <div className="text-white">Loading 3D view...</div>
  1038→          </div>
  1039→        }>
  1040→          <CourtTrajectory3D
  1041→            originalTrajectory={originalTrajectory}
  1042→            refinedTrajectory={refinedTrajectory}
  1043→            showOriginal={showOriginal}
  1044→            showRefined={showRefined}
  1045→            animationProgress={progress}
  1046→            isPlaying={isPlaying}
  1047→            timeScale={speed}
  1048→          />
  1049→        </Suspense>
  1050→      )}
  1051→
  1052→      {/* Enhanced Controls */}
  1053→      <div className="mt-4 space-y-3">
  1054→        {/* Play/Pause and Step Controls */}
  1055→        <div className="flex flex-wrap items-center justify-center gap-2">
  1056→          <button
  1057→            onClick={stepBackward}
  1058→            className="p-2 bg-gray-100 hover:bg-gray-200 rounded-lg"
  1059→            title="Step backward"
  1060→          >
  1061→            <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
  1062→              <path d="M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z" />
  1063→            </svg>
  1064→          </button>
  1065→
  1066→          <button
  1067→            onClick={handlePlayPause}
  1068→            className="px-4 py-2 bg-primary-500 text-white hover:bg-primary-600 rounded-lg font-medium text-sm flex items-center gap-2"
  1069→          >
  1070→            {isPlaying ? (
  1071→              <>
  1072→                <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
  1073→                  <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z" />
  1074→                </svg>
  1075→                Pause
  1076→              </>
  1077→            ) : (
  1078→              <>
  1079→                <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
  1080→                  <path d="M8 5v14l11-7z" />
  1081→                </svg>
  1082→                Play
  1083→              </>
  1084→            )}
  1085→          </button>
  1086→
  1087→          <button
  1088→            onClick={stepForward}
  1089→            className="p-2 bg-gray-100 hover:bg-gray-200 rounded-lg"
  1090→            title="Step forward"
  1091→          >
  1092→            <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
  1093→              <path d="M6 18l8.5-6L6 6v12zm2 0V6l6.5 6L8 18zm8-12h2v12h-2V6z" />
  1094→            </svg>
  1095→          </button>
  1096→
  1097→          <button
  1098→            onClick={resetAnimation}
  1099→            className="p-2 bg-gray-100 hover:bg-gray-200 rounded-lg"
  1100→            title="Reset"
  1101→          >
  1102→            <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
  1103→              <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z" />
  1104→            </svg>
  1105→          </button>
  1106→        </div>
  1107→
  1108→        {/* Speed Control */}
  1109→        <div className="flex items-center justify-center gap-2">
  1110→          <span className="text-sm text-gray-500">Speed:</span>
  1111→          <div className="inline-flex rounded-lg border border-gray-200 p-0.5 bg-gray-50">
  1112→            {SPEED_OPTIONS.map((option) => (
  1113→              <button
  1114→                key={option.value}
  1115→                onClick={() => handleSpeedChange(option.value)}
  1116→                className={`px-3 py-1 rounded-md text-xs font-medium transition ${
  1117→                  speed === option.value
  1118→                    ? 'bg-white shadow text-gray-900'
  1119→                    : 'text-gray-500 hover:text-gray-700'
  1120→                }`}
  1121→              >
  1122→                {option.label}
  1123→              </button>
  1124→            ))}
  1125→          </div>
  1126→        </div>
  1127→
  1128→        {/* Progress Bar */}
  1129→        <div className="flex items-center gap-2 px-4">
  1130→          <span className="text-xs text-gray-500">{Math.round(progress * 100)}%</span>
  1131→          <div className="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
  1132→            <div
  1133→              className="h-full bg-primary-500 transition-all duration-100"
  1134→              style={{ width: `${progress * 100}%` }}
  1135→            />
  1136→          </div>
  1137→        </div>
  1138→
  1139→        {/* Trajectory toggles */}
  1140→        <div className="flex items-center justify-center gap-4">
  1141→          <label className="flex items-center gap-2 text-sm">
  1142→            <input
  1143→              type="checkbox"
  1144→              checked={showOriginal}
  1145→              onChange={(e) => setShowOriginal(e.target.checked)}
  1146→              className="rounded"
  1147→            />
  1148→            <span className="flex items-center gap-1">
  1149→              <span className="w-3 h-3 bg-red-500 rounded-full" />
  1150→              Original
  1151→            </span>
  1152→          </label>
  1153→
  1154→          <label className="flex items-center gap-2 text-sm">
  1155→            <input
  1156→              type="checkbox"
  1157→              checked={showRefined}
  1158→              onChange={(e) => setShowRefined(e.target.checked)}
  1159→              className="rounded"
  1160→            />
  1161→            <span className="flex items-center gap-1">
  1162→              <span className="w-3 h-3 bg-green-500 rounded-full" />
  1163→              Optimal
  1164→            </span>
  1165→          </label>
  1166→        </div>
  1167→      </div>
  1168→
  1169→      {/* Legend */}
  1170→      <div className="mt-4 p-4 bg-gray-50 rounded-lg">
  1171→        <p className="text-sm text-gray-600">
  1172→          <span className="text-red-500 font-medium">Red trajectory:</span> Your actual shot placements during the rally.
  1173→          <br />
  1174→          <span className="text-green-500 font-medium">Green trajectory:</span> AI-suggested optimal placements for better court coverage.
  1175→          {activeView === '3d' && (
  1176→            <>
  1177→              <br />
  1178→              <span className="text-gray-500 text-xs mt-2 block">
  1179→                Tip: Drag to rotate, scroll to zoom, right-click to pan in 3D view.
  1180→              </span>
  1181→            </>
  1182→          )}
  1183→        </p>
  1184→      </div>
  1185→    </div>
  1186→  );
  1187→}
  1188→
  1189→// ============================================
  1190→// Loading Component
  1191→// ============================================
  1192→
  1193→function StrategyLoading() {
  1194→  return (
  1195→    <div className="min-h-screen bg-gray-50">
  1196→      <DashboardNav />
  1197→      <main className="ml-64 p-8">
  1198→        <div className="max-w-5xl mx-auto">
  1199→          <div className="animate-pulse">
  1200→            <div className="h-8 bg-gray-200 rounded w-48 mb-4" />
  1201→            <div className="h-4 bg-gray-200 rounded w-96 mb-8" />
  1202→            <div className="grid grid-cols-2 gap-6">
  1203→              <div className="h-48 bg-gray-200 rounded-xl" />
  1204→              <div className="h-48 bg-gray-200 rounded-xl" />
  1205→            </div>
  1206→          </div>
  1207→        </div>
  1208→      </main>
  1209→    </div>
  1210→  );
  1211→}
  1212→
  1213→// ============================================
  1214→// Export
  1215→// ============================================
  1216→
  1217→export default function StrategyPage() {
  1218→  return (
  1219→    <Suspense fallback={<StrategyLoading />}>
  1220→      <StrategyContent />
  1221→    </Suspense>
  1222→  );
  1223→}
  1224→