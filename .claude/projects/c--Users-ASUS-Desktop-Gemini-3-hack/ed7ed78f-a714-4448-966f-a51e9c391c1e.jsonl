{"type":"queue-operation","operation":"dequeue","timestamp":"2026-01-24T23:44:54.100Z","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e"}
{"type":"file-history-snapshot","messageId":"f976949d-fc76-4c77-86e9-3bd6d5ec90b7","snapshot":{"messageId":"f976949d-fc76-4c77-86e9-3bd6d5ec90b7","trackedFileBackups":{},"timestamp":"2026-01-24T23:44:54.240Z"},"isSnapshotUpdate":false}
{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","type":"user","message":{"role":"user","content":[{"type":"text","text":"<ide_opened_file>The user opened the file c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\racket\\page.tsx in the IDE. This may or may not be related to the current task.</ide_opened_file>"},{"type":"image","source":{"type":"base64","media_type":"image/jpeg","data":"/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAPpBZcDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3iiiigkKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKTmgBaKTmigBaKSloAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoopcD1oASijFJQAtFJS0AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFJmg03PJFAm7K47cM0Z5x3r551bxX4ptdQvmTVpSkN3IqoCMYDYxXvtozPBE7H5igJ+uKDnpV1OTRazRms7WNXsdEsJLy/lMcCEBmAJ6/SuZHxU8Jj/mISf9+H/wAKDSVaNN2bO3oriP8AhanhL/oIyf8AfiX/AApD8VvCmf8Aj/l/78P/AIUEfWafc7igck1xA+K3hM/8xCT/AL8S/wCFaOheO9A8QX7WWm3TTXAQuQYmXgfUUWKjXhJ2TOmoJxSA5GayfEWvWvhvS31G9DGFGC4UZJJ6UGjlbVmvS15z4a+JJ13xN/Z72q28EinyWZvmYjtXomTigilWjPYU8VGbhQSNy8dRnpSytsQknAHJJr5y8RanJe+ItVvLe6kMEkrCJllIBC8cVLdjLEYj2Vj6M87JAx1707Oelc14Lt5rbwlpiXUkjzGAMxkbJyecVyPxK1TW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k+j3+nzOPMtJz5ajqFbn+ea7+/1G30yylurqcRwxglmbgV4R4Y1ldC1+1vWH7pwYp8H+E9D+FWfHHilvEGo/ZwxGmW5DKv8Az0b1P+FKL0FRxqVO3U67wt8SWu72SHWPKiFzcBLLyl/hPQGvTenFeVfD7wasoj1rVbbDh99tAw+7jox969WBzzT9T0cI5SjdiVy/j/nwRqvtD/UV1BFcz49H/FGar/1x/qKZWJ/hM8W0W9i0/wARabfzlvKgl3NtGTjbivVR8VfCyjm7nz7QSf4V5FBBLd3EFrbLvnlIVV98Vt/8Ib4vhbEOmqcdxKvP61KueHhq1WKtFHoX/C2fCo/5ep//AAHf/Cj/AIW14Wxn7TcY/wCvdv8ACvM9X0bXtLso7vU7byYtwXcCDgn1xVWwtrrUb4WVs58xwSBnrxmhtpmzx1aLs0erD4teFT/y9T/+A7f4VV1D4n+GLvT54YrmZpHQqAYGGc++K4aPwd4wbJGnLheOXUZpT4G8VXDANpuAPWRR/WnqW69eStynOx48+zVcgfaosZ/3hX03HzXg6eBPFTS2u6xVVS5jJxKpwobOa94iBAOaErG2BhKKtIkpCDj7xpaWmepoV55obS2knncLGgLMxGAAK5Pw58QNJ8SXk1tArW8iNiMTYHmj1WtfxVpD6/4futOinMMkq/Ky9yOxrwC6sL3Trs216ptb+0YFWHHToQe4pOVjz8TUdNppaH0spDH736U4IfX9K4LwN43XWR/Z+olY9SQcdhMo/iHvXfg8daZ0UJwnG4x0+U89vSvIviqB/wAJj4fTAwYZif0r2Bvut9K8f+KYz468Pj/p3mqZ7GeKglFjvhEAb7Ws87RGB7fer1xVyMg/pXkXwcP+n677eX/7NXsA4pwZOCguRDCDjk5pwpcd6KZ2hRSikoKCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKOpopKAZh+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PviTwpceF79o2tvM0uQnyJSc49m9DWn4N8dHw7ALG/jllsWbMbqcmEHsfavZb6wt9QtWt7qJJInGCrDOa8d8V+AL7RZZL3TVa40xVJaBV3On0Hepeh5FbDzpS5qZ69YarZanbrPaXCSRsM5U5q7kZ618y6Xrc+nzfadKupbdweVPA+hWvRtP+LltCkKazYXKSPx5tsodWP0609zahjOZ8slZnqtLVa1uEu7WK4jDBZFDAMuDg+oqxTPQTuHeiiloKE6UwnuTTzXL+KvGMPhYQedayzmckL5ZA5/GmZSkoq7OkZhtPPavIfiod3jfQMc/uJquzfFwtwmhzc92mGP5Vw+v69c69rkd/OgjMSmOJF52g+9RLax5uIxkWrI6z4N8alr30i/m1ewivJPg5C5n1q5KkKzRoG7EjcT/ADr1scUI68F/DVxe1JS0GqOwKSiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApkgJp9JQKSurHzVrukaqNR1OH+zrpnkupGUrEcEFsjmvoqzgAtIA4IZUX8DirOD6/mKd160JHNSw8YNtEQhAmD4G7bjOOcfWuP+JWhw6v4Xlla2ae5syJIAnJz3HvxXbUjDIoZq6acWj5ui0nWJSgh0C/XdwD5BA/OvTfh74QvdEnur/UQqTTKI1QHO0da9BCnPWn4pWOWjgoxlzB1FNAOevFOpcUzushm3hsnOeKx9d8L6R4iaJ9TsRPJECIn3EFc9cYNbdFAnFNWZy/hrwTp/hme4mtZJpXmGMynJVfQV09LRRcmNNRVkcL8UrK8v/Cix2VpNcyi7jJjhXcdoJycVyXgrwtPqWuXp1zQ51tFiHlfa4yoLZ9K9mGexo5PU0jGphYzlzM5pfAPhcf8wKy/7908eA/C4/5gVgfrEDXRUtO5qqMOxzR8A+FmPOg2Wf8ArlSf8ID4V/6AVl/36rpqKY/Yw7HOweB/DVvOk0WiWayIwKsI+QfWuhHXAGBRilpXHGmo7C5pp6n3paShFNX0PCtf8Ka9aeJb6HTtMnuLWWUyRyKvy/NyRntSW3w58U3o+eGC1B6mR8n8hXu2W9eKMc570mccsDCUuZmH4X8PQ+HNFh0+I5K5Z2/vseprb28EUtFM64wUVZHmvxU0O8uzp2oafbzTzxsYmWJNx2nvXH23gvxTdZMWnrH3zcEL+le9ZP0oP50mrnLVwUZyuzznwT4BuNHvW1PVZo5LzkJGnKoP8a9FFLS4po2o0Y0lZCU6kpc0GwUdKM0lAFe+s4dQs5rW4QPDKpVlI6g15Jqfwn1C2yNGuIXhJyI5yQQPrXsdBGetIwrUI1tzw4/DjxVCqeULNnA5HmdKgPgXxsZSptYAP73nLivd8D0pdgosjl/s6meJQfD/AMZSKEl/s6NB03SEkfkK1dE+Flw96LjX7iJxG6tFHbk4JBzzmvWNo9KOlFkXDAwi7oYBySOpqO4toblNk8SOobIDLkZqf1oNM7LXViNIFVcLgAdgMU8gGilwaYKnFbCDgYFBHTmjFGMUhvax4Lr3hvXrXxTqqW+jXVza3FyZoZI48rg9s1PbfDnxPqGBPBb2cL/K25gWCnrwK90JOKMc5oZxywUZS5mUtMsItNsLeygXENuixr9AKuUYpetB1xjZWE6dKACOhp1GKB8p574/8G6lrd3DqenXzGW3XaLRx8jepHvWb8O/CN7bXtzqeq2xhlQ+XAjDp6tXqR60Hk0HNLDRlLmYgGKWilpHUGaKKKaYB70xhkk5wfWn0lMVjjPFPgGx10tcQn7JeH/log+V/wDeFcf4f+H2tWPjGxmvlhNjblpPMjbO4gcDHavYsUbKDllhIuXMIvrThQBilpHUrIKKKKQwIzXI+PvDFx4n0SKC0aJbuKdZYzIcD3FddRimRKKkrM8RHwz8VscSPpoHrvb/AArRtfhPeyyAX+pxxQjqtupLH8T0r13YKXtRY5VgKadzN0TRbXQtNjsrRMRJ3PVj6mtHtS9qTtQdiioqyFFBoFBoBCUUUUDCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACkpaKAEpcUUUBYWkxRS5oAT8aWjNJQAUUUUAFFFFABSUtFACUUtFAWCiiigAooooAKKKKACiiigBKKWigApKWigApKWigBKdSUUALSUUUAFFFFABRRRQAUuaSigBaDSUUAL2pKKKAClpKKAFopKKAFwKKSigBaSiigBaKSii4BRRRQAUUUUAFFFFABRRRQAuaSiigBaSiigLBRRRQAUtJRQAtJRRQAtHakooAWg0lFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUHilHWqGpatp2kRo+pXttaI/CtM4UE/jQBeo61Xtry2vbUXNrPFPCw+WSJwyn8RWNr/jPQfDM0cGq3UkMkq7lCxM2R+AoA6GisrRde0rxDZfa9KvEuYc4O0/Mp9CDyK1M0ALR3qOSWOGKSWZ0SNBlmY4AHqTTLO9tb61S5tLiOeFs7Xjbcp/GgCeijI9c0mR60ALRSA0tABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABWdqmiaXrcZt9TsYbuMLwJUzjr09K0aFOJGJ6AD+tAHC/Ci0trTwU8Vrnyvts+Ax+7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obcqghc7jj6U94jbz7H59x0oHZ2HR+Q4IuSwx90rUYUNkF+F6Z700ZEpUKWx3xStKDGAUw470BZjy4bJ2bjQ0it5YYY2j0qOJnY4j4bvUzQzlMuueOwoQrWI2ZA+R834UhZXYE8CkSJmbaEOT6ildWUFCDwaoLDyUEfDnPpiljm2xPGYI2zzubqKiwCcqrZ+lSNGRGH55PSpY7DBggkcH0FSLsYH5ypFRkqMKoJJ68UjKFxn8aAsLlGRmeYl88KB1qQCEWm8XREpOPJ28Y+tIISYy6qTjoDUaxlhuwQaChdpGMrgmj6Hmnk3DIZbgMFXhQR1qMfM2R1PaixLTQ7dIBggAetNwScYH50syOqb9pK0L0DFSvpRYdna4nPQ4qSNVYgM2B60zCnnJFIAQc4OPWgncsC2hJ2m72j1202dVhGxJBKh6HGKiZYuCJMn0oKk4xhR65oGI4AhfcNvHAFeufChceBoh6Ty/wDoVeSXcYiwvmByQPu1658K/wDkSYwP+fiX/wBCrSGx62V/EzuaWgj5aSqPoxaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACkNLRQA08g/SuK+IHlWdzomvXvltpumXBe4UjJywADAd8V256Ed64P4kRWDSaDLrcxTQkvcXMZztdiPk3e2aANeL4g+FprZLlNbh8l+h2kf0rV0rXNO123km067juo422sy8YNZ66T4P+zLEtno3kgfKMR4xWjpVppVpBKmkxWaRlssLcjGffFAF5vumuetf+Sg6pj/nxj/nXQt0Nc7Zf8lB1f2s4qAOjFIaUUHrQHQ4T4tf8iLL/ANfEX/oVeRr8y4PPpXrnxaGfA0o9biL/ANCryToCycqmAc1nI+dzb4kIeDg8/WgkHhRj6U/cBklQS36U3A6g81KPGFEsgTygRszk02+ktodLZo0kE24AsegpcKBkHJqpqbSf2bIpyIyRz75pM2oq80jv/wDhVs0wilHiSeNtoIItwQOO3zVO3ww1V+T41m/8Ah/8crR+J1xNYeGtPW3uZLdHuY4maM4JXaf8K87SZwo+x63qDMOWDzMB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QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRSUABooNJTAWiiigYUUUUALRmkooAKKKKBC0UgpaQBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFJS0UAJRS0UAJRS0UAJRS0UAJRS0UAJSU6igBBS0UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF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FFABRRRQAUUUUAFJS0UAJRS0UAJS4opc0AJigrmlzSUBYMUUUUAFFFFAC0lFFABijbRRQAYooooAOKMUUUDEpaKKBCUuKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAopskgiheQjIRS2B7Vz1h400y48Dw+LL5msNOkjEjmXLFMttA4HPOOnrQM6OiuYg8c6TcaXompQrOLLWb42UDyoVIf95tO3rhjHgf7wJxzWjB4k0i5udMt4LvdLqdsbu0XymHmxAA55HHBHBwaANaimSypCC8jBYVUs8jEBVA9f89jXN6b468Panof9uHUFstM+0PbRzXuIRKy55XJ5BAJHfg9MEUAdPRWDc+MdBtdU1TS3vib7S7Rry6t1hYlIgoYnOMHhl4BzzTfCXiqDxdpkmpWunajZwb8RfbYNhlXAIdeSCOSOD2oA6CisjxD4n0bwrZQ3etXZtoZpfKRhC75bBOMKCegNc/8A8Lg8Cf8AQYm/8ALj/wCN0AdvRWGvivSpbzQ7aKWVzrcUktk/lkB1jUMc5wRwe4rcoAKKr39/ZaZb/aL+8t7WHOPMuJRGufTJpbO8tdQtUurG6gurdvuywSh1P0I4oAnoopdp9KAEopxQ545pCCOtACUUoBPQU1/lRmIPyjOAMk/hQAtFABIBAPPqMUUCCiqGqaxYaOtob+4EP2y5W0gypO+Vs7V4HfBo1nWLDQdJuNU1O4+z2cABll8stjJAHABPUjtQMv0UgIIBHQ07afSgQlFLtIBJ7e1ABIBAPPrxQMSiggjrRQIKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAqXUl3FMJYpIhax28pdSpLGT5TGQfQAPn6iuD0+bxhr/wunv73T9K1PVL4xS2unXdttgWPcvDqxGTgFgc+mK7W5v72DUzbR2BNp9ikn+2b+FkUgCPb7gk5z2rhfB2hnxt4Ft77xndS61JqR8xIyWhiiUZ2jbGQM5BO7APzYoGbOpab4mvrPwtLf2el3WpWerLcXiwE+QkW2Vd6CQgkgMhH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ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA5jxr410fwhpjf2lNItxcQS/ZoUhZvOYDpkDA6jqR1rmNA8W6Z4A+G3hq21mO9+2XFrmG0htWaSQ5yQO2RuHBINenUUDOD03xb4p1ia4Y+CL+10YKVjee7WC8bqMhGxg4I6sMYJ3HpVLwvqnhDwpe22i2lnrFtqur3BeX+0LOXz3c5P7xyMMBkjKkjqSeST6TRQBxPjzx7pvhqyu9MR7mTXLi1b7HbxWzuWZgVQ5xtxuHPOeOlc/puntf/Evw1pkFldQaV4V0ZZAbqDDNLNGFAJHBOADx/FG/pXq1FAHkHie9sJV8dNZaR4jt9ScRzyag9qfs5ls9pjCMM4Hy7snqCeegrrdEv8APxB1KK3tbtbTVNNttU3yD5Fl5iI9iVEXH/TM12VFABWL4h8W6H4Uhgl1u9e1SckRsLeSQEjr91Tjr3raooA8ptfEMHxA+K+h3uh29zLpGgw3LS3zxMiSPNHt2jI+nXB+9xgZr1YjII559DiiigDkdd0/X5g0X9maF4isB86W+oL5Myt9drRt164X8azBH8Q71ljstJ8OeHY1jEK3BY3E0SekYAC8eh4r0GigDmfDnhvTvBWk3c7z3F1dSg3OoX8ymSa4YAknAycDnCjP4k5Pnmm6toiXnn/Db4dTXd8CyRalcweTbpx94Oxz0PT5SQa9pooA4Lw54Jv7Dw1qNvrlzb61f6jObq6guwXtS+QdoBHy9PvAcccHAFc/qulfDrQLWabW/A11ZGIhTttmmjkz3SRCVx1+8VPHTtXrtFAHC+O9V8RXOm2Gi+FrK6F5rKkG+kQolnFgbix6q2D3GeuOcCsTXbXRfDXheH4fQaT4ruLeS2Es9xotqsjSgsd29jnBJHIx0wOnFeq0UAcBpXib7TBZaDY/D/XotKKraSf2hAsMccONpyCx3DHUd63PButPrOk3KSLcCXT72axkkuF2tL5TYDH1JXGffNdHRQB5hrulWni74q6noF7PdiwbQ7c3KQuyBnS5LqD2PDEf8COMGnfE7w7pGi/DbxTeadZC3nvI7RJvLLbWEUkaxgLnCgDjgCvTaKAOHt/hR4Ot9IvrK00trePUIBDOVuZGJAIYEbmIBDAH8K6+NYNK01VG5La1hwMksQij8SeB9as0UAeTeA/Dur+J/BGnaveeNfE0NzchyyR3K7Rh2AxlSegHeq/jLVNL8J+HvEHh6bxHrusavqFoIoLS9VpNu7KgqwjC9+ef4cda9hooC5n6FBJbeH9MgmUpLHaxIynqCFAIrQoooEFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//Z"}},{"type":"text","text":"You are a senior frontend engineer. Fix the BADMINTON court rendering in Strategy mode.\n\nProblem\n- In /strategy (Rally Trajectory Analysis), the rendered court layout is WRONG (looks like a tennis/service-box style field).\n- I need a BWF-standard badminton court diagram so trajectories + recommended placements map correctly.\n\nGoal\n- Replace the current court geometry with a correct badminton court (doubles + singles lines).\n- Ensure the 2D view and 3D view use the SAME underlying court spec (meters) and are visually proportionate (correct aspect ratio).\n\nOfficial court spec (use meters)\n- Doubles court: length 13.4, width 6.1\n- Singles width: 5.18 (so inner singles sidelines are inset by (6.1-5.18)/2 = 0.46 each side)\n- Net line at center: y = 13.4/2 = 6.7\n- Short service lines: 1.98m from net on each side\n  => y = 6.7 - 1.98 = 4.72 and y = 6.7 + 1.98 = 8.68\n- Doubles long service lines: 0.76m inside each back boundary\n  => y = 0.76 and y = 13.4 - 0.76 = 12.64\n- Center line: x = 6.1/2 = 3.05, drawn only between each short service line and the relevant back boundary:\n  - near side segment: y in [0, 4.72]\n  - far side segment:  y in [8.68, 13.4]\n- Boundary lines: 40mm thickness (render as a few pixels, but keep geometry in meters)\n\nImplementation requirements\n1) Find where the Strategy court is drawn:\n   - likely a component like Court2D / CourtCanvas / StrategyCourt / ThreeCourtPlane.\n2) Create a shared module (example: src/lib/courtSpec.ts) exporting:\n   - dimensions in meters\n   - helper functions to compute key y positions (net, service lines, etc.)\n3) Update 2D renderer:\n   - Compute scale = min((viewportW-2*pad)/courtWidth, (viewportH-2*pad)/courtLength)\n   - Draw rectangles/lines using the above spec so the aspect ratio is correct.\n   - Ensure doubles boundary is the outermost rectangle, singles sidelines are inside.\n4) Update 3D renderer:\n   - If using Three.js plane, set plane geometry to width=6.1, height=13.4 (or vice versa depending on axis),\n     then draw line overlays with the same coordinates as 2D.\n5) Do NOT hardcode pixel positions for lines anymore; only derive from the meter-based spec.\n\nAcceptance criteria (must verify)\n- The court shows correct badminton markings:\n  - outer doubles boundary\n  - inner singles sidelines\n  - net line in the middle\n  - short service lines at 1.98m from net\n  - doubles long service line at 0.76m from baseline\n  - center line splitting left/right service boxes\n- Switching 2D/3D keeps the SAME geometry (no mismatch).\n- Trajectory points/paths are still mapped correctly to the court coordinate system (if theres a transform, update it accordingly).\n\nDeliverables\n- PR-ready code changes with a brief note: files changed + how you validated visually (screenshots or steps).\nRead each file carefully before you do anything and follow above to make editation. After finishing, check if you achieve all feacture. \nHere is an image you can refer to:"}]},"uuid":"f976949d-fc76-4c77-86e9-3bd6d5ec90b7","timestamp":"2026-01-24T23:44:54.238Z","permissionMode":"default"}
{"parentUuid":"f976949d-fc76-4c77-86e9-3bd6d5ec90b7","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01TUJoBhXYxC9KqVd9sGqmbr","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"The user wants me to fix the badminton court rendering in Strategy mode. They've provided detailed specifications for a BWF-standard badminton court and want me to:\n\n1. Find where the Strategy court is drawn\n2. Create a shared module for court specifications\n3. Update the 2D renderer\n4. Update the 3D renderer\n5. Ensure correct aspect ratio and coordinates\n\nLet me start by reading the opened file and exploring the codebase to understand the current implementation.","signature":"EvgECkYICxgCKkBbW3noCy7IKh/KUfaVL08oNXZAb1XF5RxB67Wzml2cs5haakYyAY3dgs4mBSbukh75gszE9lwrZE2PQbtpugKZEgwjK2T6VDyCr48BEZEaDJqO83OVqoxV0okR4iIwCpOkf7Sem49ufAVIEWvAP12GPI0ZtpKhU8tbUMM5zhnnrKPyzMwXaKPSmnHtnyuUKt8DE5HSAlBqC7eynkkamDgsiFXhx6rxSqvft8YLzgba2DJgSmkLnFFMZu5CKiQS6+m7d6ZWXmwQG8SsL63K/FF83A3RAnRM5LBhDHcqPyq+cVkqAH9+v5IGo+MkK/U3pjPOADHDLPtSvAUvmuZweaHmDjO3VF9jfSP5EqasK0rEofkKK89HHL7hS/2DesRPnEuHgvbUKTcC2d3Z5O+Uu7E0kHCvx+uUvLgChotVSEOZL6zRbQPbJVF6wWBqWWrUwZ6b/LZcvW91YPwOzFZpCx1KSaHJSpjP1cJyOpecxMz82Icvejww8EDhtSWDetOhansxJgWW0olEl35pGAkheMfbxH1rCSVPWPYtp0lO7PAQjaqwIItzH24DMQqjPLowHwDfzDndkIIz9Tv8a0JWrfcms7YeG4oyuvBhTNITUP3lnXc9XF5KPEKk01+6cC5b7mYryN4nkMo1HXe+oKoE/8qiGpSDFBDI/2EeWZPMDMStsUuxPcHeWfXvxnxQ9wcLaGlkod75UisBWJ/ZoSrqWYlpY0N4EFTv1YaIUATi8Y55LoVJ/h4NHpSY9oEgOYvS0WN78mdyAGdnEQMSsL/EX58Stsrj4P/YoMdg+MME95Atp4J/RCDGHqtIvKT/TbIMTdwYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":7653,"cache_read_input_tokens":13927,"cache_creation":{"ephemeral_5m_input_tokens":7653,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT6KNDjy5JTq4f4xhCK6","type":"assistant","uuid":"17a2b883-6ef2-4337-bc38-1d90fa6f300e","timestamp":"2026-01-24T23:44:58.422Z"}
{"parentUuid":"17a2b883-6ef2-4337-bc38-1d90fa6f300e","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01TUJoBhXYxC9KqVd9sGqmbr","type":"message","role":"assistant","content":[{"type":"text","text":"I'll help you fix the badminton court rendering in Strategy mode. Let me start by reading the current file and exploring the codebase to understand the current implementation."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":7653,"cache_read_input_tokens":13927,"cache_creation":{"ephemeral_5m_input_tokens":7653,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT6KNDjy5JTq4f4xhCK6","type":"assistant","uuid":"6d9cb0db-f3f0-47c4-b42d-70043cbbf40e","timestamp":"2026-01-24T23:44:58.950Z"}
{"parentUuid":"6d9cb0db-f3f0-47c4-b42d-70043cbbf40e","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01TUJoBhXYxC9KqVd9sGqmbr","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01R2NSrpri46FhQspS9GBQMc","name":"Read","input":{"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\racket\\page.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":7653,"cache_read_input_tokens":13927,"cache_creation":{"ephemeral_5m_input_tokens":7653,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT6KNDjy5JTq4f4xhCK6","type":"assistant","uuid":"c85f1b5f-689c-4a6c-b071-46727da62e3c","timestamp":"2026-01-24T23:44:59.535Z"}
{"parentUuid":"c85f1b5f-689c-4a6c-b071-46727da62e3c","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01TUJoBhXYxC9KqVd9sGqmbr","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01VuPDgBHi5XKEYPHfVYSoDR","name":"Task","input":{"description":"Find court rendering files","prompt":"Explore the codebase at c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach to find:\n1. Files related to Strategy mode court rendering\n2. Any existing court drawing components (Court2D, CourtCanvas, StrategyCourt, ThreeCourtPlane, etc.)\n3. Any existing court specification/dimension files\n4. The structure of the src directory\n\nFocus on finding where the badminton court is currently rendered for the strategy/trajectory analysis feature.","subagent_type":"Explore"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":7653,"cache_read_input_tokens":13927,"cache_creation":{"ephemeral_5m_input_tokens":7653,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT6KNDjy5JTq4f4xhCK6","type":"assistant","uuid":"a1b31c0d-2432-4e67-a5ea-18b7d7773a7c","timestamp":"2026-01-24T23:45:02.545Z"}
{"parentUuid":"c85f1b5f-689c-4a6c-b071-46727da62e3c","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01R2NSrpri46FhQspS9GBQMc","type":"tool_result","content":"     1'use client';\n     2\n     3import { useState, useEffect, useCallback } from 'react';\n     4import Image from 'next/image';\n     5import DashboardNav from '@/components/DashboardNav';\n     6import { supabase } from '@/lib/supabase';\n     7import type { RacketRecommendation } from '@/lib/types';\n     8\n     9// Track which images have failed to avoid repeated errors\n    10const failedImages = new Set<string>();\n    11\n    12const SKILL_LEVELS = [\n    13  { value: 'beginner', label: 'Beginner', description: 'New to badminton' },\n    14  { value: 'intermediate', label: 'Intermediate', description: '1-3 years experience' },\n    15  { value: 'advanced', label: 'Advanced', description: '3+ years, competitive play' },\n    16];\n    17\n    18const PLAY_STYLES = [\n    19  { value: 'power', label: 'Power', description: 'Strong smashes and clears' },\n    20  { value: 'control', label: 'Control', description: 'Precise placement and drops' },\n    21  { value: 'all-round', label: 'All-Round', description: 'Balanced gameplay' },\n    22];\n    23\n    24const WEAKNESSES = [\n    25  { value: 'smash_power', label: 'Smash Power' },\n    26  { value: 'defense', label: 'Defense' },\n    27  { value: 'footwork', label: 'Footwork' },\n    28  { value: 'net_play', label: 'Net Play' },\n    29  { value: 'endurance', label: 'Endurance' },\n    30  { value: 'consistency', label: 'Consistency' },\n    31];\n    32\n    33export default function RacketPage() {\n    34  const [level, setLevel] = useState<string>('intermediate');\n    35  const [style, setStyle] = useState<string>('all-round');\n    36  const [weaknesses, setWeaknesses] = useState<string[]>([]);\n    37  const [loading, setLoading] = useState(false);\n    38  const [recommendations, setRecommendations] = useState<RacketRecommendation[]>([]);\n    39  const [favorites, setFavorites] = useState<Set<string>>(new Set());\n    40  const [error, setError] = useState<string | null>(null);\n    41\n    42  useEffect(() => {\n    43    loadFavorites();\n    44  }, []);\n    45\n    46  const loadFavorites = async () => {\n    47    const { data: { user } } = await supabase.auth.getUser();\n    48    if (!user) return;\n    49\n    50    try {\n    51      const { data, error } = await supabase\n    52        .from('racket_favorites')\n    53        .select('racket_id')\n    54        .eq('user_id', user.id);\n    55\n    56      // Gracefully handle if table doesn't exist\n    57      if (error) {\n    58        console.log('Favorites not available:', error.message);\n    59        return;\n    60      }\n    61\n    62      if (data) {\n    63        setFavorites(new Set(data.map((f) => f.racket_id)));\n    64      }\n    65    } catch (err) {\n    66      // Table may not exist - just use local state\n    67      console.log('Using local favorites only');\n    68    }\n    69  };\n    70\n    71  const toggleWeakness = (weakness: string) => {\n    72    setWeaknesses((prev) =>\n    73      prev.includes(weakness)\n    74        ? prev.filter((w) => w !== weakness)\n    75        : [...prev, weakness]\n    76    );\n    77  };\n    78\n    79  const getRecommendations = async () => {\n    80    if (weaknesses.length === 0) {\n    81      setError('Please select at least one weakness to improve');\n    82      return;\n    83    }\n    84\n    85    setError(null);\n    86    setLoading(true);\n    87\n    88    try {\n    89      const response = await fetch('/api/racket/recommend', {\n    90        method: 'POST',\n    91        headers: { 'Content-Type': 'application/json' },\n    92        body: JSON.stringify({\n    93          level,\n    94          weaknesses,\n    95          style_pref: style,\n    96        }),\n    97      });\n    98\n    99      if (!response.ok) {\n   100        throw new Error('Failed to get recommendations');\n   101      }\n   102\n   103      const data = await response.json();\n   104      setRecommendations(data.recommendations);\n   105    } catch (err) {\n   106      console.error('Error:', err);\n   107      setError('Failed to get recommendations. Please try again.');\n   108    } finally {\n   109      setLoading(false);\n   110    }\n   111  };\n   112\n   113  const toggleFavorite = async (racketId: string) => {\n   114    // Always toggle locally first for immediate UI feedback\n   115    setFavorites((prev) => {\n   116      const next = new Set(prev);\n   117      if (next.has(racketId)) {\n   118        next.delete(racketId);\n   119      } else {\n   120        next.add(racketId);\n   121      }\n   122      return next;\n   123    });\n   124\n   125    // Try to persist to database if user is logged in\n   126    const { data: { user } } = await supabase.auth.getUser();\n   127    if (!user) return;\n   128\n   129    try {\n   130      if (favorites.has(racketId)) {\n   131        // Remove from favorites\n   132        await supabase\n   133          .from('racket_favorites')\n   134          .delete()\n   135          .eq('user_id', user.id)\n   136          .eq('racket_id', racketId);\n   137      } else {\n   138        // Add to favorites\n   139        await supabase.from('racket_favorites').insert({\n   140          user_id: user.id,\n   141          racket_id: racketId,\n   142        });\n   143      }\n   144    } catch (err) {\n   145      // Table may not exist - favorites are still stored locally\n   146      console.log('Favorites stored locally only');\n   147    }\n   148  };\n   149\n   150  const openEbaySearch = (query: string) => {\n   151    const url = `https://www.ebay.com/sch/i.html?_nkw=${encodeURIComponent(query)}`;\n   152    window.open(url, '_blank');\n   153  };\n   154\n   155  return (\n   156    <div className=\"min-h-screen bg-gray-50\">\n   157      <DashboardNav />\n   158\n   159      <main className=\"ml-64 p-8\">\n   160        <div className=\"max-w-7xl mx-auto\">\n   161          {/* Header */}\n   162          <div className=\"mb-8\">\n   163            <h1 className=\"text-3xl font-bold text-gray-900\">Racket Finder</h1>\n   164            <p className=\"text-gray-600 mt-1\">\n   165              Get personalized racket recommendations based on your playing profile\n   166            </p>\n   167          </div>\n   168\n   169          {/* Selection Form */}\n   170          <div className=\"bg-white rounded-xl p-6 shadow-sm mb-8\">\n   171            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n   172              {/* Skill Level */}\n   173              <div>\n   174                <h3 className=\"font-semibold text-gray-900 mb-3\">Skill Level</h3>\n   175                <div className=\"space-y-2\">\n   176                  {SKILL_LEVELS.map((lvl) => (\n   177                    <button\n   178                      key={lvl.value}\n   179                      onClick={() => setLevel(lvl.value)}\n   180                      className={`w-full text-left p-3 rounded-lg border transition ${\n   181                        level === lvl.value\n   182                          ? 'border-primary-500 bg-primary-50'\n   183                          : 'border-gray-200 hover:border-gray-300'\n   184                      }`}\n   185                    >\n   186                      <p className=\"font-medium text-gray-900\">{lvl.label}</p>\n   187                      <p className=\"text-sm text-gray-500\">{lvl.description}</p>\n   188                    </button>\n   189                  ))}\n   190                </div>\n   191              </div>\n   192\n   193              {/* Play Style */}\n   194              <div>\n   195                <h3 className=\"font-semibold text-gray-900 mb-3\">Play Style</h3>\n   196                <div className=\"space-y-2\">\n   197                  {PLAY_STYLES.map((s) => (\n   198                    <button\n   199                      key={s.value}\n   200                      onClick={() => setStyle(s.value)}\n   201                      className={`w-full text-left p-3 rounded-lg border transition ${\n   202                        style === s.value\n   203                          ? 'border-primary-500 bg-primary-50'\n   204                          : 'border-gray-200 hover:border-gray-300'\n   205                      }`}\n   206                    >\n   207                      <p className=\"font-medium text-gray-900\">{s.label}</p>\n   208                      <p className=\"text-sm text-gray-500\">{s.description}</p>\n   209                    </button>\n   210                  ))}\n   211                </div>\n   212              </div>\n   213\n   214              {/* Weaknesses */}\n   215              <div>\n   216                <h3 className=\"font-semibold text-gray-900 mb-3\">\n   217                  Areas to Improve\n   218                </h3>\n   219                <div className=\"flex flex-wrap gap-2\">\n   220                  {WEAKNESSES.map((w) => (\n   221                    <button\n   222                      key={w.value}\n   223                      onClick={() => toggleWeakness(w.value)}\n   224                      className={`px-3 py-2 rounded-lg border text-sm transition ${\n   225                        weaknesses.includes(w.value)\n   226                          ? 'border-primary-500 bg-primary-50 text-primary-700'\n   227                          : 'border-gray-200 text-gray-600 hover:border-gray-300'\n   228                      }`}\n   229                    >\n   230                      {w.label}\n   231                    </button>\n   232                  ))}\n   233                </div>\n   234                <p className=\"text-xs text-gray-500 mt-2\">\n   235                  Select at least one area\n   236                </p>\n   237              </div>\n   238            </div>\n   239\n   240            {error && (\n   241              <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\n   242                {error}\n   243              </div>\n   244            )}\n   245\n   246            <div className=\"mt-6 flex justify-center\">\n   247              <button\n   248                onClick={getRecommendations}\n   249                disabled={loading}\n   250                className=\"px-8 py-3 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition disabled:opacity-50\"\n   251              >\n   252                {loading ? (\n   253                  <span className=\"flex items-center space-x-2\">\n   254                    <svg\n   255                      className=\"animate-spin h-5 w-5\"\n   256                      fill=\"none\"\n   257                      viewBox=\"0 0 24 24\"\n   258                    >\n   259                      <circle\n   260                        className=\"opacity-25\"\n   261                        cx=\"12\"\n   262                        cy=\"12\"\n   263                        r=\"10\"\n   264                        stroke=\"currentColor\"\n   265                        strokeWidth=\"4\"\n   266                      />\n   267                      <path\n   268                        className=\"opacity-75\"\n   269                        fill=\"currentColor\"\n   270                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n   271                      />\n   272                    </svg>\n   273                    <span>Finding Rackets...</span>\n   274                  </span>\n   275                ) : (\n   276                  'Get Recommendations'\n   277                )}\n   278              </button>\n   279            </div>\n   280          </div>\n   281\n   282          {/* Recommendations Grid */}\n   283          {recommendations.length > 0 && (\n   284            <div>\n   285              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\n   286                Top 5 Recommended Rackets\n   287              </h2>\n   288              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n   289                {recommendations.map((racket, index) => (\n   290                  <RacketCard\n   291                    key={racket.id}\n   292                    racket={racket}\n   293                    index={index}\n   294                    isFavorite={favorites.has(racket.id)}\n   295                    onToggleFavorite={() => toggleFavorite(racket.id)}\n   296                    onOpenEbay={() => openEbaySearch(racket.ebay_search_query)}\n   297                  />\n   298                ))}\n   299              </div>\n   300            </div>\n   301          )}\n   302\n   303          {/* Empty State */}\n   304          {recommendations.length === 0 && !loading && (\n   305            <div className=\"text-center py-12\">\n   306              <div className=\"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n   307                <span className=\"text-4xl\"></span>\n   308              </div>\n   309              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n   310                Find Your Perfect Racket\n   311              </h3>\n   312              <p className=\"text-gray-500 max-w-md mx-auto\">\n   313                Select your skill level, playing style, and areas you want to\n   314                improve, then click &quot;Get Recommendations&quot; to see personalized\n   315                racket suggestions.\n   316              </p>\n   317            </div>\n   318          )}\n   319        </div>\n   320      </main>\n   321    </div>\n   322  );\n   323}\n   324\n   325// Racket Card Component with image handling\n   326function RacketCard({\n   327  racket,\n   328  index,\n   329  isFavorite,\n   330  onToggleFavorite,\n   331  onOpenEbay,\n   332}: {\n   333  racket: RacketRecommendation;\n   334  index: number;\n   335  isFavorite: boolean;\n   336  onToggleFavorite: () => void;\n   337  onOpenEbay: () => void;\n   338}) {\n   339  const [imageError, setImageError] = useState(false);\n   340  const [imageLoading, setImageLoading] = useState(true);\n   341\n   342  // Check if this image has already failed\n   343  const hasFailedBefore = racket.image_url && failedImages.has(racket.image_url);\n   344  const showImage = racket.image_url && !imageError && !hasFailedBefore;\n   345\n   346  const handleImageError = useCallback(() => {\n   347    if (racket.image_url) {\n   348      // Log the failing URL once\n   349      if (!failedImages.has(racket.image_url)) {\n   350        console.warn('Racket image failed to load:', racket.image_url);\n   351        failedImages.add(racket.image_url);\n   352      }\n   353    }\n   354    setImageError(true);\n   355    setImageLoading(false);\n   356  }, [racket.image_url]);\n   357\n   358  const handleImageLoad = useCallback(() => {\n   359    setImageLoading(false);\n   360  }, []);\n   361\n   362  return (\n   363    <div className=\"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition\">\n   364      {/* Rank Badge */}\n   365      <div className=\"relative\">\n   366        <div className=\"bg-gray-100 h-48 flex items-center justify-center overflow-hidden\">\n   367          {showImage ? (\n   368            <>\n   369              {imageLoading && (\n   370                <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100\">\n   371                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500\" />\n   372                </div>\n   373              )}\n   374              <Image\n   375                src={racket.image_url!}\n   376                alt={`${racket.brand} ${racket.name}`}\n   377                width={192}\n   378                height={192}\n   379                className={`object-contain max-h-44 transition-opacity ${imageLoading ? 'opacity-0' : 'opacity-100'}`}\n   380                style={{ width: 'auto', height: 'auto' }}\n   381                onError={handleImageError}\n   382                onLoad={handleImageLoad}\n   383                unoptimized // Use unoptimized for external eBay images\n   384              />\n   385            </>\n   386          ) : (\n   387            <span className=\"text-6xl\"></span>\n   388          )}\n   389        </div>\n   390        <div className=\"absolute top-3 left-3 w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center\">\n   391          <span className=\"text-white font-bold text-sm\">\n   392            #{index + 1}\n   393          </span>\n   394        </div>\n   395        <button\n   396          onClick={onToggleFavorite}\n   397          className=\"absolute top-3 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm hover:shadow-md transition\"\n   398        >\n   399          <svg\n   400            className={`w-5 h-5 ${\n   401              isFavorite\n   402                ? 'text-red-500 fill-current'\n   403                : 'text-gray-400'\n   404            }`}\n   405            fill={isFavorite ? 'currentColor' : 'none'}\n   406            stroke=\"currentColor\"\n   407            viewBox=\"0 0 24 24\"\n   408          >\n   409            <path\n   410              strokeLinecap=\"round\"\n   411              strokeLinejoin=\"round\"\n   412              strokeWidth={2}\n   413              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n   414            />\n   415          </svg>\n   416        </button>\n   417      </div>\n   418\n   419      <div className=\"p-4\">\n   420        {/* Header */}\n   421        <div className=\"flex items-start justify-between mb-2\">\n   422          <div>\n   423            <h3 className=\"font-semibold text-gray-900\">\n   424              {racket.name}\n   425            </h3>\n   426            <p className=\"text-sm text-gray-500\">{racket.brand}</p>\n   427          </div>\n   428          <div className=\"text-right\">\n   429            <p className=\"font-bold text-primary-600\">\n   430              {racket.match_score}%\n   431            </p>\n   432            <p className=\"text-xs text-gray-500\">match</p>\n   433          </div>\n   434        </div>\n   435\n   436        {/* Match Reason */}\n   437        <p className=\"text-sm text-gray-600 mb-3\">\n   438          {racket.match_reason}\n   439        </p>\n   440\n   441        {/* Specs */}\n   442        <div className=\"grid grid-cols-2 gap-2 text-xs mb-3\">\n   443          <div className=\"bg-gray-50 rounded p-2\">\n   444            <p className=\"text-gray-500\">Weight</p>\n   445            <p className=\"font-medium text-gray-900\">\n   446              {racket.weight}\n   447            </p>\n   448          </div>\n   449          <div className=\"bg-gray-50 rounded p-2\">\n   450            <p className=\"text-gray-500\">Balance</p>\n   451            <p className=\"font-medium text-gray-900\">\n   452              {racket.balance}\n   453            </p>\n   454          </div>\n   455          <div className=\"bg-gray-50 rounded p-2\">\n   456            <p className=\"text-gray-500\">Flex</p>\n   457            <p className=\"font-medium text-gray-900\">\n   458              {racket.flexibility}\n   459            </p>\n   460          </div>\n   461          <div className=\"bg-gray-50 rounded p-2\">\n   462            <p className=\"text-gray-500\">Price</p>\n   463            <p className=\"font-medium text-gray-900\">\n   464              {racket.price_range}\n   465            </p>\n   466          </div>\n   467        </div>\n   468\n   469        {/* Style Tags */}\n   470        <div className=\"flex flex-wrap gap-1 mb-4\">\n   471          {racket.play_style.map((style) => (\n   472            <span\n   473              key={style}\n   474              className=\"px-2 py-1 bg-primary-50 text-primary-700 rounded text-xs\"\n   475            >\n   476              {style}\n   477            </span>\n   478          ))}\n   479        </div>\n   480\n   481        {/* Action Button */}\n   482        <button\n   483          onClick={onOpenEbay}\n   484          className=\"w-full py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition flex items-center justify-center space-x-2\"\n   485        >\n   486          <span>View on eBay</span>\n   487          <svg\n   488            className=\"w-4 h-4\"\n   489            fill=\"none\"\n   490            stroke=\"currentColor\"\n   491            viewBox=\"0 0 24 24\"\n   492          >\n   493            <path\n   494              strokeLinecap=\"round\"\n   495              strokeLinejoin=\"round\"\n   496              strokeWidth={2}\n   497              d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\"\n   498            />\n   499          </svg>\n   500        </button>\n   501      </div>\n   502    </div>\n   503  );\n   504}\n   505\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"b19899c3-ec35-4d64-a496-4881540e9654","timestamp":"2026-01-24T23:45:04.029Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\racket\\page.tsx","content":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport Image from 'next/image';\nimport DashboardNav from '@/components/DashboardNav';\nimport { supabase } from '@/lib/supabase';\nimport type { RacketRecommendation } from '@/lib/types';\n\n// Track which images have failed to avoid repeated errors\nconst failedImages = new Set<string>();\n\nconst SKILL_LEVELS = [\n  { value: 'beginner', label: 'Beginner', description: 'New to badminton' },\n  { value: 'intermediate', label: 'Intermediate', description: '1-3 years experience' },\n  { value: 'advanced', label: 'Advanced', description: '3+ years, competitive play' },\n];\n\nconst PLAY_STYLES = [\n  { value: 'power', label: 'Power', description: 'Strong smashes and clears' },\n  { value: 'control', label: 'Control', description: 'Precise placement and drops' },\n  { value: 'all-round', label: 'All-Round', description: 'Balanced gameplay' },\n];\n\nconst WEAKNESSES = [\n  { value: 'smash_power', label: 'Smash Power' },\n  { value: 'defense', label: 'Defense' },\n  { value: 'footwork', label: 'Footwork' },\n  { value: 'net_play', label: 'Net Play' },\n  { value: 'endurance', label: 'Endurance' },\n  { value: 'consistency', label: 'Consistency' },\n];\n\nexport default function RacketPage() {\n  const [level, setLevel] = useState<string>('intermediate');\n  const [style, setStyle] = useState<string>('all-round');\n  const [weaknesses, setWeaknesses] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [recommendations, setRecommendations] = useState<RacketRecommendation[]>([]);\n  const [favorites, setFavorites] = useState<Set<string>>(new Set());\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadFavorites();\n  }, []);\n\n  const loadFavorites = async () => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('racket_favorites')\n        .select('racket_id')\n        .eq('user_id', user.id);\n\n      // Gracefully handle if table doesn't exist\n      if (error) {\n        console.log('Favorites not available:', error.message);\n        return;\n      }\n\n      if (data) {\n        setFavorites(new Set(data.map((f) => f.racket_id)));\n      }\n    } catch (err) {\n      // Table may not exist - just use local state\n      console.log('Using local favorites only');\n    }\n  };\n\n  const toggleWeakness = (weakness: string) => {\n    setWeaknesses((prev) =>\n      prev.includes(weakness)\n        ? prev.filter((w) => w !== weakness)\n        : [...prev, weakness]\n    );\n  };\n\n  const getRecommendations = async () => {\n    if (weaknesses.length === 0) {\n      setError('Please select at least one weakness to improve');\n      return;\n    }\n\n    setError(null);\n    setLoading(true);\n\n    try {\n      const response = await fetch('/api/racket/recommend', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          level,\n          weaknesses,\n          style_pref: style,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to get recommendations');\n      }\n\n      const data = await response.json();\n      setRecommendations(data.recommendations);\n    } catch (err) {\n      console.error('Error:', err);\n      setError('Failed to get recommendations. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleFavorite = async (racketId: string) => {\n    // Always toggle locally first for immediate UI feedback\n    setFavorites((prev) => {\n      const next = new Set(prev);\n      if (next.has(racketId)) {\n        next.delete(racketId);\n      } else {\n        next.add(racketId);\n      }\n      return next;\n    });\n\n    // Try to persist to database if user is logged in\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    try {\n      if (favorites.has(racketId)) {\n        // Remove from favorites\n        await supabase\n          .from('racket_favorites')\n          .delete()\n          .eq('user_id', user.id)\n          .eq('racket_id', racketId);\n      } else {\n        // Add to favorites\n        await supabase.from('racket_favorites').insert({\n          user_id: user.id,\n          racket_id: racketId,\n        });\n      }\n    } catch (err) {\n      // Table may not exist - favorites are still stored locally\n      console.log('Favorites stored locally only');\n    }\n  };\n\n  const openEbaySearch = (query: string) => {\n    const url = `https://www.ebay.com/sch/i.html?_nkw=${encodeURIComponent(query)}`;\n    window.open(url, '_blank');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">Racket Finder</h1>\n            <p className=\"text-gray-600 mt-1\">\n              Get personalized racket recommendations based on your playing profile\n            </p>\n          </div>\n\n          {/* Selection Form */}\n          <div className=\"bg-white rounded-xl p-6 shadow-sm mb-8\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n              {/* Skill Level */}\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Skill Level</h3>\n                <div className=\"space-y-2\">\n                  {SKILL_LEVELS.map((lvl) => (\n                    <button\n                      key={lvl.value}\n                      onClick={() => setLevel(lvl.value)}\n                      className={`w-full text-left p-3 rounded-lg border transition ${\n                        level === lvl.value\n                          ? 'border-primary-500 bg-primary-50'\n                          : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <p className=\"font-medium text-gray-900\">{lvl.label}</p>\n                      <p className=\"text-sm text-gray-500\">{lvl.description}</p>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Play Style */}\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Play Style</h3>\n                <div className=\"space-y-2\">\n                  {PLAY_STYLES.map((s) => (\n                    <button\n                      key={s.value}\n                      onClick={() => setStyle(s.value)}\n                      className={`w-full text-left p-3 rounded-lg border transition ${\n                        style === s.value\n                          ? 'border-primary-500 bg-primary-50'\n                          : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <p className=\"font-medium text-gray-900\">{s.label}</p>\n                      <p className=\"text-sm text-gray-500\">{s.description}</p>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Weaknesses */}\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">\n                  Areas to Improve\n                </h3>\n                <div className=\"flex flex-wrap gap-2\">\n                  {WEAKNESSES.map((w) => (\n                    <button\n                      key={w.value}\n                      onClick={() => toggleWeakness(w.value)}\n                      className={`px-3 py-2 rounded-lg border text-sm transition ${\n                        weaknesses.includes(w.value)\n                          ? 'border-primary-500 bg-primary-50 text-primary-700'\n                          : 'border-gray-200 text-gray-600 hover:border-gray-300'\n                      }`}\n                    >\n                      {w.label}\n                    </button>\n                  ))}\n                </div>\n                <p className=\"text-xs text-gray-500 mt-2\">\n                  Select at least one area\n                </p>\n              </div>\n            </div>\n\n            {error && (\n              <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\n                {error}\n              </div>\n            )}\n\n            <div className=\"mt-6 flex justify-center\">\n              <button\n                onClick={getRecommendations}\n                disabled={loading}\n                className=\"px-8 py-3 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition disabled:opacity-50\"\n              >\n                {loading ? (\n                  <span className=\"flex items-center space-x-2\">\n                    <svg\n                      className=\"animate-spin h-5 w-5\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle\n                        className=\"opacity-25\"\n                        cx=\"12\"\n                        cy=\"12\"\n                        r=\"10\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"4\"\n                      />\n                      <path\n                        className=\"opacity-75\"\n                        fill=\"currentColor\"\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                      />\n                    </svg>\n                    <span>Finding Rackets...</span>\n                  </span>\n                ) : (\n                  'Get Recommendations'\n                )}\n              </button>\n            </div>\n          </div>\n\n          {/* Recommendations Grid */}\n          {recommendations.length > 0 && (\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\n                Top 5 Recommended Rackets\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {recommendations.map((racket, index) => (\n                  <RacketCard\n                    key={racket.id}\n                    racket={racket}\n                    index={index}\n                    isFavorite={favorites.has(racket.id)}\n                    onToggleFavorite={() => toggleFavorite(racket.id)}\n                    onOpenEbay={() => openEbaySearch(racket.ebay_search_query)}\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Empty State */}\n          {recommendations.length === 0 && !loading && (\n            <div className=\"text-center py-12\">\n              <div className=\"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-4xl\"></span>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                Find Your Perfect Racket\n              </h3>\n              <p className=\"text-gray-500 max-w-md mx-auto\">\n                Select your skill level, playing style, and areas you want to\n                improve, then click &quot;Get Recommendations&quot; to see personalized\n                racket suggestions.\n              </p>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// Racket Card Component with image handling\nfunction RacketCard({\n  racket,\n  index,\n  isFavorite,\n  onToggleFavorite,\n  onOpenEbay,\n}: {\n  racket: RacketRecommendation;\n  index: number;\n  isFavorite: boolean;\n  onToggleFavorite: () => void;\n  onOpenEbay: () => void;\n}) {\n  const [imageError, setImageError] = useState(false);\n  const [imageLoading, setImageLoading] = useState(true);\n\n  // Check if this image has already failed\n  const hasFailedBefore = racket.image_url && failedImages.has(racket.image_url);\n  const showImage = racket.image_url && !imageError && !hasFailedBefore;\n\n  const handleImageError = useCallback(() => {\n    if (racket.image_url) {\n      // Log the failing URL once\n      if (!failedImages.has(racket.image_url)) {\n        console.warn('Racket image failed to load:', racket.image_url);\n        failedImages.add(racket.image_url);\n      }\n    }\n    setImageError(true);\n    setImageLoading(false);\n  }, [racket.image_url]);\n\n  const handleImageLoad = useCallback(() => {\n    setImageLoading(false);\n  }, []);\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition\">\n      {/* Rank Badge */}\n      <div className=\"relative\">\n        <div className=\"bg-gray-100 h-48 flex items-center justify-center overflow-hidden\">\n          {showImage ? (\n            <>\n              {imageLoading && (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500\" />\n                </div>\n              )}\n              <Image\n                src={racket.image_url!}\n                alt={`${racket.brand} ${racket.name}`}\n                width={192}\n                height={192}\n                className={`object-contain max-h-44 transition-opacity ${imageLoading ? 'opacity-0' : 'opacity-100'}`}\n                style={{ width: 'auto', height: 'auto' }}\n                onError={handleImageError}\n                onLoad={handleImageLoad}\n                unoptimized // Use unoptimized for external eBay images\n              />\n            </>\n          ) : (\n            <span className=\"text-6xl\"></span>\n          )}\n        </div>\n        <div className=\"absolute top-3 left-3 w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center\">\n          <span className=\"text-white font-bold text-sm\">\n            #{index + 1}\n          </span>\n        </div>\n        <button\n          onClick={onToggleFavorite}\n          className=\"absolute top-3 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm hover:shadow-md transition\"\n        >\n          <svg\n            className={`w-5 h-5 ${\n              isFavorite\n                ? 'text-red-500 fill-current'\n                : 'text-gray-400'\n            }`}\n            fill={isFavorite ? 'currentColor' : 'none'}\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n            />\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"p-4\">\n        {/* Header */}\n        <div className=\"flex items-start justify-between mb-2\">\n          <div>\n            <h3 className=\"font-semibold text-gray-900\">\n              {racket.name}\n            </h3>\n            <p className=\"text-sm text-gray-500\">{racket.brand}</p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"font-bold text-primary-600\">\n              {racket.match_score}%\n            </p>\n            <p className=\"text-xs text-gray-500\">match</p>\n          </div>\n        </div>\n\n        {/* Match Reason */}\n        <p className=\"text-sm text-gray-600 mb-3\">\n          {racket.match_reason}\n        </p>\n\n        {/* Specs */}\n        <div className=\"grid grid-cols-2 gap-2 text-xs mb-3\">\n          <div className=\"bg-gray-50 rounded p-2\">\n            <p className=\"text-gray-500\">Weight</p>\n            <p className=\"font-medium text-gray-900\">\n              {racket.weight}\n            </p>\n          </div>\n          <div className=\"bg-gray-50 rounded p-2\">\n            <p className=\"text-gray-500\">Balance</p>\n            <p className=\"font-medium text-gray-900\">\n              {racket.balance}\n            </p>\n          </div>\n          <div className=\"bg-gray-50 rounded p-2\">\n            <p className=\"text-gray-500\">Flex</p>\n            <p className=\"font-medium text-gray-900\">\n              {racket.flexibility}\n            </p>\n          </div>\n          <div className=\"bg-gray-50 rounded p-2\">\n            <p className=\"text-gray-500\">Price</p>\n            <p className=\"font-medium text-gray-900\">\n              {racket.price_range}\n            </p>\n          </div>\n        </div>\n\n        {/* Style Tags */}\n        <div className=\"flex flex-wrap gap-1 mb-4\">\n          {racket.play_style.map((style) => (\n            <span\n              key={style}\n              className=\"px-2 py-1 bg-primary-50 text-primary-700 rounded text-xs\"\n            >\n              {style}\n            </span>\n          ))}\n        </div>\n\n        {/* Action Button */}\n        <button\n          onClick={onOpenEbay}\n          className=\"w-full py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition flex items-center justify-center space-x-2\"\n        >\n          <span>View on eBay</span>\n          <svg\n            className=\"w-4 h-4\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\"\n            />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n}\n","numLines":505,"startLine":1,"totalLines":505}},"sourceToolAssistantUUID":"c85f1b5f-689c-4a6c-b071-46727da62e3c"}
{"parentUuid":"a1b31c0d-2432-4e67-a5ea-18b7d7773a7c","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01VuPDgBHi5XKEYPHfVYSoDR","type":"tool_result","content":[{"type":"text","text":"Perfect! Now I have a comprehensive understanding. Let me create a summary report:\n\n## Exploration Summary: RallyCoach Badminton Court Rendering\n\nBased on my thorough exploration of the codebase at `c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach`, here's what I found:\n\n### 1. **Strategy Mode Court Rendering Files**\n\n#### Primary Court Components:\n- **`c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx`** - Main 3D court visualization\n- **`c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx`** - Strategy analysis page with 2D canvas rendering (lines 806-933)\n\n### 2. **Existing Court Drawing Components**\n\n#### CourtTrajectory3D Component (3D Rendering)\nLocated at: **`src/components/CourtTrajectory3D.tsx`**\n- Uses React Three Fiber for 3D visualization\n- Implements a `Court()` component that renders:\n  - Court plane (green mesh)\n  - Outer boundary\n  - Singles boundary\n  - Center line\n  - Service lines (2 lines per half-court)\n  - Center service line\n- Uses `Line` component from @react-three/drei for all court markings\n- Tracks and visualizes ball trajectories with animated balls and paths\n- Supports multiple trajectory overlays (original vs. optimized)\n\n#### Canvas 2D Court Rendering (Strategy Page)\nLocated at: **`src/app/strategy/page.tsx`** (function `CourtTrajectoryAnimation`)\n- Canvas-based 2D badminton court rendering\n- Draws court background, lines, and service areas\n- Animates trajectory points with dashed lines and circular markers\n- Dual trajectory support (red for original, green for refined)\n\n#### Skeleton3D Component\nLocated at: **`src/components/Skeleton3D.tsx`**\n- Renders 3D skeleton/pose animation for drill visualization\n- Contains keyframe-based animation system\n- Not directly court-related but used in analytics/drill pages\n\n### 3. **Court Specification/Dimension Files**\n\n#### Badminton Court Constants (3D)\nIn **`CourtTrajectory3D.tsx`** (lines 23-28):\n```typescript\nconst COURT_LENGTH = 13.4;   // meters\nconst COURT_WIDTH = 6.1;     // meters (doubles)\nconst SINGLES_WIDTH = 5.18;  // meters\nconst NET_HEIGHT = 1.55;     // meters at center\nconst SERVICE_LINE = 1.98;   // meters from net\n```\n\n#### Canvas Court Constants (2D)\nIn **`strategy/page.tsx`** (lines 836-874):\n```typescript\nconst courtMargin = 40;\nconst courtWidth = width - courtMargin * 2;\nconst courtHeight = height - courtMargin * 2;\nconst serviceLineY1 = courtMargin + courtHeight * 0.22;\nconst serviceLineY2 = courtMargin + courtHeight * 0.78;\n```\n\n**No dedicated court specification JSON file exists** - all dimensions are hardcoded in components.\n\n### 4. **Source Directory Structure**\n\n```\nsrc/\n app/\n    analytics/page.tsx          (Pose analysis with skeleton overlay)\n    api/                        (API routes)\n       analysis/\n       practice/\n       racket/\n       strategy/recommend/\n    dashboard/page.tsx\n    history/page.tsx\n    history/[sessionId]/page.tsx\n    login/page.tsx\n    page.tsx                    (Landing page)\n    practice/page.tsx\n    racket/page.tsx\n    signup/page.tsx\n    strategy/page.tsx           (Strategy analysis - MAIN COURT RENDERING)\n    layout.tsx\n components/\n    CourtTrajectory3D.tsx       (3D badminton court with trajectories)\n    DashboardNav.tsx            (Navigation component)\n    DrillCard.tsx               (Drill display component)\n    PlayerSelectionModal.tsx    (Player selection UI)\n    Skeleton3D.tsx              (3D skeleton/pose animation)\n data/\n    rackets.json                (Racket database)\n lib/\n     gemini.ts                   (Google Gemini API integration)\n     playback-engine.ts          (Animation state management - refs-based)\n     pose-utils.ts               (Pose estimation utilities)\n     rules-engine.ts             (Form evaluation rules)\n     scoring-rules.ts            (Banded scoring system)\n     supabase.ts                 (Database client)\n     types.ts                    (TypeScript type definitions)\n```\n\n### 5. **Court Trajectory Data Types**\n\nFrom **`src/lib/types.ts`** (lines 211-236):\n```typescript\nexport interface StrategyResult {\n  id: string;\n  session_id: string;\n  original_trajectory: TrajectoryPoint[];\n  refined_trajectory: TrajectoryPoint[];\n  coaching_points: string[];\n  court_homography?: number[][];\n  shuttle_detections?: ShuttleDetection[];\n  created_at: string;\n}\n\nexport interface TrajectoryPoint {\n  x: number;           // normalized court x (0-1)\n  y: number;           // normalized court y (0-1)\n  timestamp: number;\n  court_x?: number;    // court-mapped x coordinate\n  court_y?: number;    // court-mapped y coordinate\n}\n\nexport interface ShuttleDetection {\n  frame: number;\n  x: number;\n  y: number;\n  confidence: number;\n}\n```\n\n### 6. **Key Observations**\n\n1. **No separate court drawing library** - All court rendering is implemented inline within components\n2. **Dual rendering approach**:\n   - 2D Canvas in strategy page for quick analysis\n   - 3D Three.js scene in CourtTrajectory3D for interactive 3D visualization\n3. **Normalized coordinates** - Trajectories use 0-1 normalized coordinates that are then scaled to actual court dimensions\n4. **Playback engine** (`playback-engine.ts`) manages animation state without causing re-renders\n5. **Interactive features** supported:\n   - Play/pause controls\n   - Speed adjustment (0.25x, 0.5x, 1x, 2x)\n   - View switching (2D/3D)\n   - Step forward/backward\n   - Multiple trajectory overlays\n\n### 7. **Related Technologies Used**\n\n- **React Three Fiber** - For 3D rendering\n- **Three.js** - 3D graphics library\n- **Canvas API** - For 2D rendering\n- **MediaPipe** - For pose estimation\n- **Supabase** - Backend database\n- **Next.js 14** - React framework\n- **TypeScript** - Type safety\n\nThis architecture allows RallyCoach to display badminton court analysis for both strategy mode (with trajectory visualization) and analytics mode (with pose skeleton overlay)."},{"type":"text","text":"agentId: a9a448a (for resuming to continue this agent's work if needed)"}]}]},"uuid":"f1936f98-32b2-4aac-8e1a-c0b483aa982a","timestamp":"2026-01-24T23:49:36.061Z","toolUseResult":{"status":"completed","prompt":"Explore the codebase at c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach to find:\n1. Files related to Strategy mode court rendering\n2. Any existing court drawing components (Court2D, CourtCanvas, StrategyCourt, ThreeCourtPlane, etc.)\n3. Any existing court specification/dimension files\n4. The structure of the src directory\n\nFocus on finding where the badminton court is currently rendered for the strategy/trajectory analysis feature.","agentId":"a9a448a","content":[{"type":"text","text":"Perfect! Now I have a comprehensive understanding. Let me create a summary report:\n\n## Exploration Summary: RallyCoach Badminton Court Rendering\n\nBased on my thorough exploration of the codebase at `c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach`, here's what I found:\n\n### 1. **Strategy Mode Court Rendering Files**\n\n#### Primary Court Components:\n- **`c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx`** - Main 3D court visualization\n- **`c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx`** - Strategy analysis page with 2D canvas rendering (lines 806-933)\n\n### 2. **Existing Court Drawing Components**\n\n#### CourtTrajectory3D Component (3D Rendering)\nLocated at: **`src/components/CourtTrajectory3D.tsx`**\n- Uses React Three Fiber for 3D visualization\n- Implements a `Court()` component that renders:\n  - Court plane (green mesh)\n  - Outer boundary\n  - Singles boundary\n  - Center line\n  - Service lines (2 lines per half-court)\n  - Center service line\n- Uses `Line` component from @react-three/drei for all court markings\n- Tracks and visualizes ball trajectories with animated balls and paths\n- Supports multiple trajectory overlays (original vs. optimized)\n\n#### Canvas 2D Court Rendering (Strategy Page)\nLocated at: **`src/app/strategy/page.tsx`** (function `CourtTrajectoryAnimation`)\n- Canvas-based 2D badminton court rendering\n- Draws court background, lines, and service areas\n- Animates trajectory points with dashed lines and circular markers\n- Dual trajectory support (red for original, green for refined)\n\n#### Skeleton3D Component\nLocated at: **`src/components/Skeleton3D.tsx`**\n- Renders 3D skeleton/pose animation for drill visualization\n- Contains keyframe-based animation system\n- Not directly court-related but used in analytics/drill pages\n\n### 3. **Court Specification/Dimension Files**\n\n#### Badminton Court Constants (3D)\nIn **`CourtTrajectory3D.tsx`** (lines 23-28):\n```typescript\nconst COURT_LENGTH = 13.4;   // meters\nconst COURT_WIDTH = 6.1;     // meters (doubles)\nconst SINGLES_WIDTH = 5.18;  // meters\nconst NET_HEIGHT = 1.55;     // meters at center\nconst SERVICE_LINE = 1.98;   // meters from net\n```\n\n#### Canvas Court Constants (2D)\nIn **`strategy/page.tsx`** (lines 836-874):\n```typescript\nconst courtMargin = 40;\nconst courtWidth = width - courtMargin * 2;\nconst courtHeight = height - courtMargin * 2;\nconst serviceLineY1 = courtMargin + courtHeight * 0.22;\nconst serviceLineY2 = courtMargin + courtHeight * 0.78;\n```\n\n**No dedicated court specification JSON file exists** - all dimensions are hardcoded in components.\n\n### 4. **Source Directory Structure**\n\n```\nsrc/\n app/\n    analytics/page.tsx          (Pose analysis with skeleton overlay)\n    api/                        (API routes)\n       analysis/\n       practice/\n       racket/\n       strategy/recommend/\n    dashboard/page.tsx\n    history/page.tsx\n    history/[sessionId]/page.tsx\n    login/page.tsx\n    page.tsx                    (Landing page)\n    practice/page.tsx\n    racket/page.tsx\n    signup/page.tsx\n    strategy/page.tsx           (Strategy analysis - MAIN COURT RENDERING)\n    layout.tsx\n components/\n    CourtTrajectory3D.tsx       (3D badminton court with trajectories)\n    DashboardNav.tsx            (Navigation component)\n    DrillCard.tsx               (Drill display component)\n    PlayerSelectionModal.tsx    (Player selection UI)\n    Skeleton3D.tsx              (3D skeleton/pose animation)\n data/\n    rackets.json                (Racket database)\n lib/\n     gemini.ts                   (Google Gemini API integration)\n     playback-engine.ts          (Animation state management - refs-based)\n     pose-utils.ts               (Pose estimation utilities)\n     rules-engine.ts             (Form evaluation rules)\n     scoring-rules.ts            (Banded scoring system)\n     supabase.ts                 (Database client)\n     types.ts                    (TypeScript type definitions)\n```\n\n### 5. **Court Trajectory Data Types**\n\nFrom **`src/lib/types.ts`** (lines 211-236):\n```typescript\nexport interface StrategyResult {\n  id: string;\n  session_id: string;\n  original_trajectory: TrajectoryPoint[];\n  refined_trajectory: TrajectoryPoint[];\n  coaching_points: string[];\n  court_homography?: number[][];\n  shuttle_detections?: ShuttleDetection[];\n  created_at: string;\n}\n\nexport interface TrajectoryPoint {\n  x: number;           // normalized court x (0-1)\n  y: number;           // normalized court y (0-1)\n  timestamp: number;\n  court_x?: number;    // court-mapped x coordinate\n  court_y?: number;    // court-mapped y coordinate\n}\n\nexport interface ShuttleDetection {\n  frame: number;\n  x: number;\n  y: number;\n  confidence: number;\n}\n```\n\n### 6. **Key Observations**\n\n1. **No separate court drawing library** - All court rendering is implemented inline within components\n2. **Dual rendering approach**:\n   - 2D Canvas in strategy page for quick analysis\n   - 3D Three.js scene in CourtTrajectory3D for interactive 3D visualization\n3. **Normalized coordinates** - Trajectories use 0-1 normalized coordinates that are then scaled to actual court dimensions\n4. **Playback engine** (`playback-engine.ts`) manages animation state without causing re-renders\n5. **Interactive features** supported:\n   - Play/pause controls\n   - Speed adjustment (0.25x, 0.5x, 1x, 2x)\n   - View switching (2D/3D)\n   - Step forward/backward\n   - Multiple trajectory overlays\n\n### 7. **Related Technologies Used**\n\n- **React Three Fiber** - For 3D rendering\n- **Three.js** - 3D graphics library\n- **Canvas API** - For 2D rendering\n- **MediaPipe** - For pose estimation\n- **Supabase** - Backend database\n- **Next.js 14** - React framework\n- **TypeScript** - Type safety\n\nThis architecture allows RallyCoach to display badminton court analysis for both strategy mode (with trajectory visualization) and analytics mode (with pose skeleton overlay)."}],"totalDurationMs":273233,"totalTokens":58491,"totalToolUseCount":23,"usage":{"input_tokens":684,"cache_creation_input_tokens":1168,"cache_read_input_tokens":56638,"cache_creation":{"ephemeral_5m_input_tokens":1168,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"sourceToolAssistantUUID":"a1b31c0d-2432-4e67-a5ea-18b7d7773a7c"}
{"parentUuid":"f1936f98-32b2-4aac-8e1a-c0b483aa982a","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01XyijVxb4Xji4LA6WNeBSV7","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I have a clear picture of the codebase. The key files I need to work with are:\n\n1. **`src/app/strategy/page.tsx`** - Contains the 2D canvas court rendering\n2. **`src/components/CourtTrajectory3D.tsx`** - Contains the 3D court rendering\n\nThe current implementation has:\n- Some constants defined in CourtTrajectory3D.tsx (COURT_LENGTH, COURT_WIDTH, etc.)\n- But the 2D canvas in strategy page uses percentage-based calculations that don't accurately represent a BWF standard badminton court\n\nI need to:\n1. Create a shared `src/lib/courtSpec.ts` module with proper BWF dimensions\n2. Update the 2D canvas rendering in `strategy/page.tsx` to use correct proportions\n3. Update the 3D rendering in `CourtTrajectory3D.tsx` to use the shared spec\n4. Ensure both use the same coordinate system\n\nLet me read both files in full to understand what needs to be changed.","signature":"EvsHCkYICxgCKkD7OI35XFQ9kRZ/B0PVR+9IqqOeu8U1TEXerWLiFLiizl2n8fnjjBaVkMYIYCO5oiodGmcbw1GPkUWiW8sPU/RnEgw6e37rIO8rFx47xr8aDCA6tSynX+M1vY0w/SIwNF16VHKaMMXRILenRLqgsLXGnrUU2Z+wfrvi2qPipDNYETDn4kHjELLtSp86/HPwKuIGEpELwRMT8ffdWmewExY9b0sbXnI/8fNig32Y77s8d+k8c7r57dDQ3jLD+h/Hu0HaI/z39V3F5uVFPI2k44ys063hmiSMSilannefISLq3IH5npC1HaF67wauAKJ/KGY0V4vfRR0HC2SaGW+m67T8Qlu6ktn8c+7LIPBfP/oHKyqrX0CjQ7ch6j01ayW+rAAz/PybpqwkpGP+b98gBU2LYUu42IZbmk+SqhA9TN8G712NVhnXr2N6HvEQo6w7Dty0CVQOlMh44cZT9s8ds/+RwIkW2sjnbYR5TjRl6u7uFRheYD0hI/JxjUjJXvb0XyVtDfoOFQupa8IZlYlr8mvNjX188tEHHwk7bRwbCgAINe5mY6aNBitirQKsOsFlJubp6cn+osA3PFMpqSWAQSMo5TXiksqlqGNuueoeSnx/RVra57Yis5tlSBkOU1U3jOCZAAf/M+yu9XpRFIWaqyOm+FENFvez/THgYFezdP6ihOnAqBcYGtpHsRLc2DbXZaHSeTHkNA3/ykF7VIuL4k0k3u4eDljey7h6aseNdke1/WQuGOAckyCjKNUxu/kMwlY9NwQrBPdLORQCZ2pxZNwKPS1m1ctKWnJqAt/Fdl4hXj9wKrgJCc5xr6XSqRLknpda7A0yoVMh5xaMIb4qSMybLAAr+dlG+QxgLtVIsYmev9KhpaqXAmBAKiu3S4Ci1AFAUymnbbhxjzRDl6THxmckw+zUZVcIyryFkG0jhEJ0QcE+mc/YYI2Pfl2gu2OHr0J3FoqUCyBJUb7Uuga8ZSaao/GgbHJS6tsEB0Oy267/wbA4ZvkZTKIG4vxXIQfE/WGgyhpQ/wX9Lhyt31F2TU4ouwC7oAc5A4pPNs4iJVCoBAt/r0AOcOZP1OK/lD5lI486PhYdBrHIbnFMVZYlvpqkerYyQQxJYhGLR/YKebl/VvHjDCyf/b3r/1rvuDKrhjYmMosAw+CVArgLuHGiEIj3Mj7nPf4EY9HG0thcgSnqylQKmJT120xhLTluM8x2QOyQmuaBP9B4jT/3D3Ur2oQlobEIaWpflFRiBOoxT4elQcpZiNBSQQUhrFCD8xmccCA412xJyawSnX0+2I+bn+iss/FHOAn2okyE+DCGf9bA8X0zDrbLS+lzqq3Rs3kDmrt3OqUYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":9218,"cache_read_input_tokens":21580,"cache_creation":{"ephemeral_5m_input_tokens":9218,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT6gA55kixbkA3sb1rRb","type":"assistant","uuid":"06a2c248-d87b-4309-ade2-a5d9c6146fd9","timestamp":"2026-01-24T23:49:42.738Z"}
{"parentUuid":"06a2c248-d87b-4309-ade2-a5d9c6146fd9","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01XyijVxb4Xji4LA6WNeBSV7","type":"message","role":"assistant","content":[{"type":"text","text":"Now I understand the codebase structure. Let me read the key files that need to be modified."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":9218,"cache_read_input_tokens":21580,"cache_creation":{"ephemeral_5m_input_tokens":9218,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT6gA55kixbkA3sb1rRb","type":"assistant","uuid":"a8c2981f-c903-44a8-817a-8bc70f77c088","timestamp":"2026-01-24T23:49:43.264Z"}
{"parentUuid":"a8c2981f-c903-44a8-817a-8bc70f77c088","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01XyijVxb4Xji4LA6WNeBSV7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_016HHwN69qbSyA6iM6TAnrxS","name":"Read","input":{"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":9218,"cache_read_input_tokens":21580,"cache_creation":{"ephemeral_5m_input_tokens":9218,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT6gA55kixbkA3sb1rRb","type":"assistant","uuid":"a37a44a1-0b5a-4f46-a4e7-4d4492e27a28","timestamp":"2026-01-24T23:49:43.751Z"}
{"parentUuid":"a37a44a1-0b5a-4f46-a4e7-4d4492e27a28","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01XyijVxb4Xji4LA6WNeBSV7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Q1UN5RSLQjGSr799u7ee38","name":"Read","input":{"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":9218,"cache_read_input_tokens":21580,"cache_creation":{"ephemeral_5m_input_tokens":9218,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT6gA55kixbkA3sb1rRb","type":"assistant","uuid":"7b2cbec5-1ce6-4bcd-90ab-c7afcccd3165","timestamp":"2026-01-24T23:49:44.236Z"}
{"parentUuid":"7b2cbec5-1ce6-4bcd-90ab-c7afcccd3165","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Q1UN5RSLQjGSr799u7ee38","type":"tool_result","content":"     1'use client';\n     2\n     3import { useRef, useState, useMemo, useEffect } from 'react';\n     4import { Canvas, useFrame } from '@react-three/fiber';\n     5import { OrbitControls, Text, Line } from '@react-three/drei';\n     6import * as THREE from 'three';\n     7import type { TrajectoryPoint } from '@/lib/types';\n     8\n     9// ============================================\n    10// PHASE 4: 3D Court Visualization with Playback Engine Integration\n    11// ============================================\n    12\n    13interface CourtTrajectory3DProps {\n    14  originalTrajectory: TrajectoryPoint[];\n    15  refinedTrajectory: TrajectoryPoint[];\n    16  showOriginal: boolean;\n    17  showRefined: boolean;\n    18  animationProgress: number;\n    19  isPlaying: boolean;\n    20  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n    21}\n    22\n    23// Court dimensions (scaled to meters)\n    24const COURT_LENGTH = 13.4; // meters\n    25const COURT_WIDTH = 6.1;   // meters (doubles)\n    26const SINGLES_WIDTH = 5.18;\n    27const NET_HEIGHT = 1.55;   // meters at center\n    28const SERVICE_LINE = 1.98; // meters from net\n    29\n    30// Pseudo-3D height curve based on shot type heuristic\n    31function calculateHeight(\n    32  startY: number,\n    33  endY: number,\n    34  t: number,\n    35  shotIndex: number\n    36): number {\n    37  // Determine shot type based on court position change\n    38  const deltaY = Math.abs(endY - startY);\n    39\n    40  // Higher arc for clears (long shots), lower for drives and drops\n    41  let maxHeight = 1.5; // Default medium height\n    42  if (deltaY > 0.5) {\n    43    // Long shot - clear\n    44    maxHeight = 3.5;\n    45  } else if (deltaY < 0.2) {\n    46    // Short shot - drop or net\n    47    maxHeight = 1.0;\n    48  }\n    49\n    50  // Parabolic arc with some variation\n    51  const arc = Math.sin(t * Math.PI);\n    52  return arc * maxHeight + 0.3; // Minimum height above net\n    53}\n    54\n    55// Ball component that follows trajectory - uses refs for smooth animation\n    56function Ball({\n    57  trajectory,\n    58  progress,\n    59  color,\n    60  show,\n    61}: {\n    62  trajectory: TrajectoryPoint[];\n    63  progress: number;\n    64  color: string;\n    65  show: boolean;\n    66}) {\n    67  const meshRef = useRef<THREE.Mesh>(null);\n    68  const progressRef = useRef(progress);\n    69\n    70  // Update progress ref\n    71  useEffect(() => {\n    72    progressRef.current = progress;\n    73  }, [progress]);\n    74\n    75  useFrame(() => {\n    76    if (!meshRef.current || !show || trajectory.length < 2) return;\n    77\n    78    const currentProgress = progressRef.current;\n    79\n    80    // Calculate current position along trajectory\n    81    const totalPoints = trajectory.length;\n    82    const currentIndex = Math.min(\n    83      Math.floor(currentProgress * totalPoints),\n    84      totalPoints - 1\n    85    );\n    86    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    87    const localT = (currentProgress * totalPoints) % 1;\n    88\n    89    const p1 = trajectory[currentIndex];\n    90    const p2 = trajectory[nextIndex];\n    91\n    92    // Convert court coordinates to 3D\n    93    const x1 = (p1.x - 0.5) * COURT_WIDTH;\n    94    const z1 = (p1.y - 0.5) * COURT_LENGTH;\n    95    const x2 = (p2.x - 0.5) * COURT_WIDTH;\n    96    const z2 = (p2.y - 0.5) * COURT_LENGTH;\n    97\n    98    // Interpolate position\n    99    const x = THREE.MathUtils.lerp(x1, x2, localT);\n   100    const z = THREE.MathUtils.lerp(z1, z2, localT);\n   101    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n   102\n   103    meshRef.current.position.set(x, y, z);\n   104  });\n   105\n   106  if (!show) return null;\n   107\n   108  return (\n   109    <mesh ref={meshRef}>\n   110      <sphereGeometry args={[0.1, 16, 16]} />\n   111      <meshStandardMaterial color={color} />\n   112    </mesh>\n   113  );\n   114}\n   115\n   116// Trajectory path visualization - uses memoization for performance\n   117function TrajectoryPath({\n   118  trajectory,\n   119  progress,\n   120  color,\n   121  show,\n   122}: {\n   123  trajectory: TrajectoryPoint[];\n   124  progress: number;\n   125  color: string;\n   126  show: boolean;\n   127}) {\n   128  const points = useMemo(() => {\n   129    if (!show || trajectory.length < 2) return [];\n   130\n   131    const result: THREE.Vector3[] = [];\n   132    const visiblePoints = Math.ceil(progress * trajectory.length);\n   133\n   134    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n   135      const p = trajectory[i];\n   136      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n   137\n   138      // Add multiple points along each segment for smooth curve\n   139      for (let t = 0; t < 1; t += 0.1) {\n   140        const x = THREE.MathUtils.lerp(\n   141          (p.x - 0.5) * COURT_WIDTH,\n   142          (nextP.x - 0.5) * COURT_WIDTH,\n   143          t\n   144        );\n   145        const z = THREE.MathUtils.lerp(\n   146          (p.y - 0.5) * COURT_LENGTH,\n   147          (nextP.y - 0.5) * COURT_LENGTH,\n   148          t\n   149        );\n   150        const y = calculateHeight(p.y, nextP.y, t, i);\n   151        result.push(new THREE.Vector3(x, y, z));\n   152      }\n   153    }\n   154\n   155    return result;\n   156  }, [trajectory, progress, show]);\n   157\n   158  if (!show || points.length < 2) return null;\n   159\n   160  return (\n   161    <Line\n   162      points={points}\n   163      color={color}\n   164      lineWidth={3}\n   165      dashed\n   166      dashSize={0.3}\n   167      gapSize={0.1}\n   168    />\n   169  );\n   170}\n   171\n   172// Court plane with lines\n   173function Court() {\n   174  return (\n   175    <group>\n   176      {/* Court surface */}\n   177      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n   178        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n   179        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n   180      </mesh>\n   181\n   182      {/* Court lines */}\n   183      <group position={[0, 0.01, 0]}>\n   184        {/* Outer boundary */}\n   185        <Line\n   186          points={[\n   187            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n   188            [COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n   189            [COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n   190            [-COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n   191            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n   192          ]}\n   193          color=\"white\"\n   194          lineWidth={2}\n   195        />\n   196\n   197        {/* Singles boundary */}\n   198        <Line\n   199          points={[\n   200            [-SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n   201            [-SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n   202          ]}\n   203          color=\"white\"\n   204          lineWidth={1}\n   205        />\n   206        <Line\n   207          points={[\n   208            [SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n   209            [SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n   210          ]}\n   211          color=\"white\"\n   212          lineWidth={1}\n   213        />\n   214\n   215        {/* Center line */}\n   216        <Line\n   217          points={[\n   218            [-COURT_WIDTH / 2, 0, 0],\n   219            [COURT_WIDTH / 2, 0, 0],\n   220          ]}\n   221          color=\"white\"\n   222          lineWidth={2}\n   223        />\n   224\n   225        {/* Service lines */}\n   226        <Line\n   227          points={[\n   228            [-COURT_WIDTH / 2, 0, -SERVICE_LINE],\n   229            [COURT_WIDTH / 2, 0, -SERVICE_LINE],\n   230          ]}\n   231          color=\"white\"\n   232          lineWidth={1}\n   233        />\n   234        <Line\n   235          points={[\n   236            [-COURT_WIDTH / 2, 0, SERVICE_LINE],\n   237            [COURT_WIDTH / 2, 0, SERVICE_LINE],\n   238          ]}\n   239          color=\"white\"\n   240          lineWidth={1}\n   241        />\n   242\n   243        {/* Center service line */}\n   244        <Line\n   245          points={[\n   246            [0, 0, -SERVICE_LINE],\n   247            [0, 0, SERVICE_LINE],\n   248          ]}\n   249          color=\"white\"\n   250          lineWidth={1}\n   251        />\n   252      </group>\n   253    </group>\n   254  );\n   255}\n   256\n   257// Net\n   258function Net() {\n   259  return (\n   260    <group position={[0, NET_HEIGHT / 2, 0]}>\n   261      {/* Net posts */}\n   262      <mesh position={[-COURT_WIDTH / 2 - 0.2, 0, 0]}>\n   263        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n   264        <meshStandardMaterial color=\"#333\" />\n   265      </mesh>\n   266      <mesh position={[COURT_WIDTH / 2 + 0.2, 0, 0]}>\n   267        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n   268        <meshStandardMaterial color=\"#333\" />\n   269      </mesh>\n   270\n   271      {/* Net mesh (simplified) */}\n   272      <mesh>\n   273        <planeGeometry args={[COURT_WIDTH + 0.4, NET_HEIGHT]} />\n   274        <meshStandardMaterial\n   275          color=\"#ffffff\"\n   276          transparent\n   277          opacity={0.3}\n   278          side={THREE.DoubleSide}\n   279        />\n   280      </mesh>\n   281\n   282      {/* Top rope */}\n   283      <mesh position={[0, NET_HEIGHT / 2, 0]}>\n   284        <boxGeometry args={[COURT_WIDTH + 0.4, 0.02, 0.02]} />\n   285        <meshStandardMaterial color=\"#333\" />\n   286      </mesh>\n   287    </group>\n   288  );\n   289}\n   290\n   291// Animation controller component - handles time updates using refs to avoid stale closures\n   292function AnimationController({\n   293  isPlaying,\n   294  timeScale,\n   295  onProgressUpdate,\n   296  initialProgress,\n   297}: {\n   298  isPlaying: boolean;\n   299  timeScale: number;\n   300  onProgressUpdate: (progress: number) => void;\n   301  initialProgress: number;\n   302}) {\n   303  const progressRef = useRef(initialProgress);\n   304  const isPlayingRef = useRef(isPlaying);\n   305  const timeScaleRef = useRef(timeScale);\n   306\n   307  // Keep refs in sync with props\n   308  useEffect(() => {\n   309    isPlayingRef.current = isPlaying;\n   310  }, [isPlaying]);\n   311\n   312  useEffect(() => {\n   313    timeScaleRef.current = timeScale;\n   314  }, [timeScale]);\n   315\n   316  useEffect(() => {\n   317    progressRef.current = initialProgress;\n   318  }, [initialProgress]);\n   319\n   320  useFrame((state, delta) => {\n   321    if (!isPlayingRef.current) return;\n   322\n   323    // Update progress based on delta time and timeScale\n   324    // Full loop is 10 seconds at 1x speed\n   325    const increment = (delta * timeScaleRef.current) / 10;\n   326    progressRef.current += increment;\n   327\n   328    // Loop back to start\n   329    if (progressRef.current >= 1) {\n   330      progressRef.current = 0;\n   331    }\n   332\n   333    // Notify parent (throttled to avoid excessive updates)\n   334    onProgressUpdate(progressRef.current);\n   335  });\n   336\n   337  return null;\n   338}\n   339\n   340// Main 3D Scene\n   341function Scene({\n   342  originalTrajectory,\n   343  refinedTrajectory,\n   344  showOriginal,\n   345  showRefined,\n   346  animationProgress,\n   347  isPlaying,\n   348  timeScale = 1,\n   349}: CourtTrajectory3DProps) {\n   350  // Local progress state for smooth animation\n   351  const [localProgress, setLocalProgress] = useState(animationProgress);\n   352\n   353  // Sync with external progress when it changes significantly\n   354  useEffect(() => {\n   355    const diff = Math.abs(localProgress - animationProgress);\n   356    if (diff > 0.1 || !isPlaying) {\n   357      setLocalProgress(animationProgress);\n   358    }\n   359  }, [animationProgress, isPlaying, localProgress]);\n   360\n   361  return (\n   362    <>\n   363      {/* Animation Controller - manages time updates without causing re-renders */}\n   364      <AnimationController\n   365        isPlaying={isPlaying}\n   366        timeScale={timeScale}\n   367        onProgressUpdate={setLocalProgress}\n   368        initialProgress={animationProgress}\n   369      />\n   370\n   371      {/* Lighting */}\n   372      <ambientLight intensity={0.6} />\n   373      <directionalLight position={[10, 10, 5]} intensity={0.8} />\n   374      <directionalLight position={[-10, 10, -5]} intensity={0.4} />\n   375\n   376      {/* Court */}\n   377      <Court />\n   378\n   379      {/* Net */}\n   380      <Net />\n   381\n   382      {/* Trajectories */}\n   383      <TrajectoryPath\n   384        trajectory={originalTrajectory}\n   385        progress={localProgress}\n   386        color=\"#ef4444\"\n   387        show={showOriginal}\n   388      />\n   389      <TrajectoryPath\n   390        trajectory={refinedTrajectory}\n   391        progress={localProgress}\n   392        color=\"#22c55e\"\n   393        show={showRefined}\n   394      />\n   395\n   396      {/* Balls */}\n   397      <Ball\n   398        trajectory={originalTrajectory}\n   399        progress={localProgress}\n   400        color=\"#ef4444\"\n   401        show={showOriginal}\n   402      />\n   403      <Ball\n   404        trajectory={refinedTrajectory}\n   405        progress={localProgress}\n   406        color=\"#22c55e\"\n   407        show={showRefined}\n   408      />\n   409\n   410      {/* Camera controls */}\n   411      <OrbitControls\n   412        enablePan={true}\n   413        enableZoom={true}\n   414        enableRotate={true}\n   415        minDistance={5}\n   416        maxDistance={25}\n   417        target={[0, 1, 0]}\n   418      />\n   419    </>\n   420  );\n   421}\n   422\n   423// Error boundary wrapper to prevent blank screens\n   424function ErrorFallback() {\n   425  return (\n   426    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n   427      <div className=\"text-center text-white\">\n   428        <p className=\"text-lg font-medium mb-2\">3D View Unavailable</p>\n   429        <p className=\"text-sm text-gray-400\">Please try switching to 2D view</p>\n   430      </div>\n   431    </div>\n   432  );\n   433}\n   434\n   435// Export the main component with error handling\n   436export default function CourtTrajectory3D(props: CourtTrajectory3DProps) {\n   437  const [hasError, setHasError] = useState(false);\n   438\n   439  // Reset error state when props change\n   440  useEffect(() => {\n   441    setHasError(false);\n   442  }, [props.showOriginal, props.showRefined]);\n   443\n   444  if (hasError) {\n   445    return <ErrorFallback />;\n   446  }\n   447\n   448  return (\n   449    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg overflow-hidden\">\n   450      <Canvas\n   451        camera={{\n   452          position: [0, 10, 12],\n   453          fov: 50,\n   454          near: 0.1,\n   455          far: 100,\n   456        }}\n   457        onCreated={(state) => {\n   458          // Ensure proper WebGL context handling\n   459          state.gl.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n   460        }}\n   461        onError={() => setHasError(true)}\n   462      >\n   463        <Scene {...props} />\n   464      </Canvas>\n   465    </div>\n   466  );\n   467}\n   468\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"06a68bba-f09e-4353-9ff5-922b1d5bb0dc","timestamp":"2026-01-24T23:49:52.908Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","content":"'use client';\n\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Court dimensions (scaled to meters)\nconst COURT_LENGTH = 13.4; // meters\nconst COURT_WIDTH = 6.1;   // meters (doubles)\nconst SINGLES_WIDTH = 5.18;\nconst NET_HEIGHT = 1.55;   // meters at center\nconst SERVICE_LINE = 1.98; // meters from net\n\n// Pseudo-3D height curve based on shot type heuristic\nfunction calculateHeight(\n  startY: number,\n  endY: number,\n  t: number,\n  shotIndex: number\n): number {\n  // Determine shot type based on court position change\n  const deltaY = Math.abs(endY - startY);\n\n  // Higher arc for clears (long shots), lower for drives and drops\n  let maxHeight = 1.5; // Default medium height\n  if (deltaY > 0.5) {\n    // Long shot - clear\n    maxHeight = 3.5;\n  } else if (deltaY < 0.2) {\n    // Short shot - drop or net\n    maxHeight = 1.0;\n  }\n\n  // Parabolic arc with some variation\n  const arc = Math.sin(t * Math.PI);\n  return arc * maxHeight + 0.3; // Minimum height above net\n}\n\n// Ball component that follows trajectory - uses refs for smooth animation\nfunction Ball({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const progressRef = useRef(progress);\n\n  // Update progress ref\n  useEffect(() => {\n    progressRef.current = progress;\n  }, [progress]);\n\n  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert court coordinates to 3D\n    const x1 = (p1.x - 0.5) * COURT_WIDTH;\n    const z1 = (p1.y - 0.5) * COURT_LENGTH;\n    const x2 = (p2.x - 0.5) * COURT_WIDTH;\n    const z2 = (p2.y - 0.5) * COURT_LENGTH;\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(x1, x2, localT);\n    const z = THREE.MathUtils.lerp(z1, z2, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });\n\n  if (!show) return null;\n\n  return (\n    <mesh ref={meshRef}>\n      <sphereGeometry args={[0.1, 16, 16]} />\n      <meshStandardMaterial color={color} />\n    </mesh>\n  );\n}\n\n// Trajectory path visualization - uses memoization for performance\nfunction TrajectoryPath({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(\n          (p.x - 0.5) * COURT_WIDTH,\n          (nextP.x - 0.5) * COURT_WIDTH,\n          t\n        );\n        const z = THREE.MathUtils.lerp(\n          (p.y - 0.5) * COURT_LENGTH,\n          (nextP.y - 0.5) * COURT_LENGTH,\n          t\n        );\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);\n\n  if (!show || points.length < 2) return null;\n\n  return (\n    <Line\n      points={points}\n      color={color}\n      lineWidth={3}\n      dashed\n      dashSize={0.3}\n      gapSize={0.1}\n    />\n  );\n}\n\n// Court plane with lines\nfunction Court() {\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles boundary */}\n        <Line\n          points={[\n            [-SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [-SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, 0],\n            [COURT_WIDTH / 2, 0, 0],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Service lines */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, -SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center service line */}\n        <Line\n          points={[\n            [0, 0, -SERVICE_LINE],\n            [0, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}\n\n// Net\nfunction Net() {\n  return (\n    <group position={[0, NET_HEIGHT / 2, 0]}>\n      {/* Net posts */}\n      <mesh position={[-COURT_WIDTH / 2 - 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n      <mesh position={[COURT_WIDTH / 2 + 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n\n      {/* Net mesh (simplified) */}\n      <mesh>\n        <planeGeometry args={[COURT_WIDTH + 0.4, NET_HEIGHT]} />\n        <meshStandardMaterial\n          color=\"#ffffff\"\n          transparent\n          opacity={0.3}\n          side={THREE.DoubleSide}\n        />\n      </mesh>\n\n      {/* Top rope */}\n      <mesh position={[0, NET_HEIGHT / 2, 0]}>\n        <boxGeometry args={[COURT_WIDTH + 0.4, 0.02, 0.02]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n    </group>\n  );\n}\n\n// Animation controller component - handles time updates using refs to avoid stale closures\nfunction AnimationController({\n  isPlaying,\n  timeScale,\n  onProgressUpdate,\n  initialProgress,\n}: {\n  isPlaying: boolean;\n  timeScale: number;\n  onProgressUpdate: (progress: number) => void;\n  initialProgress: number;\n}) {\n  const progressRef = useRef(initialProgress);\n  const isPlayingRef = useRef(isPlaying);\n  const timeScaleRef = useRef(timeScale);\n\n  // Keep refs in sync with props\n  useEffect(() => {\n    isPlayingRef.current = isPlaying;\n  }, [isPlaying]);\n\n  useEffect(() => {\n    timeScaleRef.current = timeScale;\n  }, [timeScale]);\n\n  useEffect(() => {\n    progressRef.current = initialProgress;\n  }, [initialProgress]);\n\n  useFrame((state, delta) => {\n    if (!isPlayingRef.current) return;\n\n    // Update progress based on delta time and timeScale\n    // Full loop is 10 seconds at 1x speed\n    const increment = (delta * timeScaleRef.current) / 10;\n    progressRef.current += increment;\n\n    // Loop back to start\n    if (progressRef.current >= 1) {\n      progressRef.current = 0;\n    }\n\n    // Notify parent (throttled to avoid excessive updates)\n    onProgressUpdate(progressRef.current);\n  });\n\n  return null;\n}\n\n// Main 3D Scene\nfunction Scene({\n  originalTrajectory,\n  refinedTrajectory,\n  showOriginal,\n  showRefined,\n  animationProgress,\n  isPlaying,\n  timeScale = 1,\n}: CourtTrajectory3DProps) {\n  // Local progress state for smooth animation\n  const [localProgress, setLocalProgress] = useState(animationProgress);\n\n  // Sync with external progress when it changes significantly\n  useEffect(() => {\n    const diff = Math.abs(localProgress - animationProgress);\n    if (diff > 0.1 || !isPlaying) {\n      setLocalProgress(animationProgress);\n    }\n  }, [animationProgress, isPlaying, localProgress]);\n\n  return (\n    <>\n      {/* Animation Controller - manages time updates without causing re-renders */}\n      <AnimationController\n        isPlaying={isPlaying}\n        timeScale={timeScale}\n        onProgressUpdate={setLocalProgress}\n        initialProgress={animationProgress}\n      />\n\n      {/* Lighting */}\n      <ambientLight intensity={0.6} />\n      <directionalLight position={[10, 10, 5]} intensity={0.8} />\n      <directionalLight position={[-10, 10, -5]} intensity={0.4} />\n\n      {/* Court */}\n      <Court />\n\n      {/* Net */}\n      <Net />\n\n      {/* Trajectories */}\n      <TrajectoryPath\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <TrajectoryPath\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Balls */}\n      <Ball\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <Ball\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Camera controls */}\n      <OrbitControls\n        enablePan={true}\n        enableZoom={true}\n        enableRotate={true}\n        minDistance={5}\n        maxDistance={25}\n        target={[0, 1, 0]}\n      />\n    </>\n  );\n}\n\n// Error boundary wrapper to prevent blank screens\nfunction ErrorFallback() {\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n      <div className=\"text-center text-white\">\n        <p className=\"text-lg font-medium mb-2\">3D View Unavailable</p>\n        <p className=\"text-sm text-gray-400\">Please try switching to 2D view</p>\n      </div>\n    </div>\n  );\n}\n\n// Export the main component with error handling\nexport default function CourtTrajectory3D(props: CourtTrajectory3DProps) {\n  const [hasError, setHasError] = useState(false);\n\n  // Reset error state when props change\n  useEffect(() => {\n    setHasError(false);\n  }, [props.showOriginal, props.showRefined]);\n\n  if (hasError) {\n    return <ErrorFallback />;\n  }\n\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg overflow-hidden\">\n      <Canvas\n        camera={{\n          position: [0, 10, 12],\n          fov: 50,\n          near: 0.1,\n          far: 100,\n        }}\n        onCreated={(state) => {\n          // Ensure proper WebGL context handling\n          state.gl.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        }}\n        onError={() => setHasError(true)}\n      >\n        <Scene {...props} />\n      </Canvas>\n    </div>\n  );\n}\n","numLines":468,"startLine":1,"totalLines":468}},"sourceToolAssistantUUID":"7b2cbec5-1ce6-4bcd-90ab-c7afcccd3165"}
{"parentUuid":"a37a44a1-0b5a-4f46-a4e7-4d4492e27a28","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_016HHwN69qbSyA6iM6TAnrxS","type":"tool_result","content":"     1'use client';\n     2\n     3import { useState, useEffect, useRef, Suspense, lazy, useCallback, useMemo } from 'react';\n     4import { useSearchParams } from 'next/navigation';\n     5import Link from 'next/link';\n     6import DashboardNav from '@/components/DashboardNav';\n     7import { supabase, uploadVideo, getVideoUrl } from '@/lib/supabase';\n     8import type { Session, TrajectoryPoint, StrategyResult } from '@/lib/types';\n     9import {\n    10  createPlaybackEngine,\n    11  PlaybackEngine,\n    12  updatePlaybackTime,\n    13  type TimeScale,\n    14  type ActiveView,\n    15  type PlaybackEngineRefs,\n    16} from '@/lib/playback-engine';\n    17\n    18// PHASE 4: Lazy load 3D component to avoid SSR issues\n    19const CourtTrajectory3D = lazy(() => import('@/components/CourtTrajectory3D'));\n    20\n    21// ============================================\n    22// Strategy Mode Page\n    23// ============================================\n    24\n    25type StrategyStep = 'select' | 'confirm' | 'processing' | 'results';\n    26\n    27interface HistorySession extends Session {\n    28  thumbnail_url?: string;\n    29}\n    30\n    31// Strategy Recommendation types\n    32interface StrategyRecommendation {\n    33  id: string;\n    34  name: string;\n    35  reason: string;\n    36  confidence: number;\n    37  jumpToVideoTimeSec?: number;\n    38  trajectory2D: TrajectoryPoint[];\n    39  trajectory3D?: TrajectoryPoint[];\n    40}\n    41\n    42function StrategyContent() {\n    43  const searchParams = useSearchParams();\n    44  const sessionIdParam = searchParams.get('session');\n    45\n    46  // Step state\n    47  const [step, setStep] = useState<StrategyStep>('select');\n    48  const [selectedSource, setSelectedSource] = useState<'upload' | 'history' | null>(null);\n    49\n    50  // Video/session state\n    51  const [videoFile, setVideoFile] = useState<File | null>(null);\n    52  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n    53  const [sessionId, setSessionId] = useState<string | null>(sessionIdParam);\n    54  const [selectedHistorySession, setSelectedHistorySession] = useState<HistorySession | null>(null);\n    55\n    56  // History drawer\n    57  const [showHistoryDrawer, setShowHistoryDrawer] = useState(false);\n    58  const [historySessions, setHistorySessions] = useState<HistorySession[]>([]);\n    59  const [loadingHistory, setLoadingHistory] = useState(false);\n    60\n    61  // Processing state\n    62  const [processing, setProcessing] = useState(false);\n    63  const [processProgress, setProcessProgress] = useState(0);\n    64  const [error, setError] = useState<string | null>(null);\n    65\n    66  // Results state\n    67  const [strategyResult, setStrategyResult] = useState<StrategyResult | null>(null);\n    68  const [recommendations, setRecommendations] = useState<StrategyRecommendation[]>([]);\n    69  const [selectedRecommendation, setSelectedRecommendation] = useState<StrategyRecommendation | null>(null);\n    70  const [coachingPoints, setCoachingPoints] = useState<string[]>([]);\n    71\n    72  // Refs\n    73  const fileInputRef = useRef<HTMLInputElement>(null);\n    74  const videoRef = useRef<HTMLVideoElement>(null);\n    75\n    76  // Load from session param\n    77  useEffect(() => {\n    78    if (sessionIdParam) {\n    79      loadSessionFromHistory(sessionIdParam);\n    80    }\n    81  }, [sessionIdParam]);\n    82\n    83  // Load history sessions\n    84  const loadHistorySessions = async () => {\n    85    setLoadingHistory(true);\n    86    try {\n    87      const { data: { user } } = await supabase.auth.getUser();\n    88      if (!user) return;\n    89\n    90      const { data, error } = await supabase\n    91        .from('sessions')\n    92        .select('*')\n    93        .eq('user_id', user.id)\n    94        .in('type', ['analytics', 'practice'])\n    95        .not('video_url', 'is', null)\n    96        .order('created_at', { ascending: false })\n    97        .limit(50);\n    98\n    99      if (error) throw error;\n   100      setHistorySessions(data || []);\n   101    } catch (err) {\n   102      console.error('Error loading history:', err);\n   103    } finally {\n   104      setLoadingHistory(false);\n   105    }\n   106  };\n   107\n   108  // Load session from history\n   109  const loadSessionFromHistory = async (id: string) => {\n   110    try {\n   111      const { data, error } = await supabase\n   112        .from('sessions')\n   113        .select('*')\n   114        .eq('id', id)\n   115        .single();\n   116\n   117      if (error) throw error;\n   118\n   119      setSelectedHistorySession(data);\n   120      setSessionId(data.id);\n   121      setVideoUrl(data.video_url);\n   122      setSelectedSource('history');\n   123      setStep('confirm');\n   124    } catch (err) {\n   125      console.error('Error loading session:', err);\n   126      setError('Failed to load session');\n   127    }\n   128  };\n   129\n   130  // Handle file upload\n   131  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n   132    const file = e.target.files?.[0];\n   133    if (!file) return;\n   134\n   135    if (!file.type.startsWith('video/')) {\n   136      setError('Please select a video file');\n   137      return;\n   138    }\n   139\n   140    // Max file size 100MB (TUS resumable upload handles large files)\n   141    if (file.size > 100 * 1024 * 1024) {\n   142      setError('File size must be less than 100MB. Please compress your video before uploading.');\n   143      return;\n   144    }\n   145\n   146    setError(null);\n   147    setVideoFile(file);\n   148    setVideoUrl(URL.createObjectURL(file));\n   149    setSelectedSource('upload');\n   150    setStep('confirm');\n   151  };\n   152\n   153  // Handle history selection\n   154  const handleHistorySelect = (session: HistorySession) => {\n   155    setSelectedHistorySession(session);\n   156    setSessionId(session.id);\n   157    setVideoUrl(session.video_url || null);\n   158    setSelectedSource('history');\n   159    setShowHistoryDrawer(false);\n   160    setStep('confirm');\n   161  };\n   162\n   163  // Handle confirmation: No\n   164  const handleConfirmNo = () => {\n   165    setVideoFile(null);\n   166    setVideoUrl(null);\n   167    setSessionId(null);\n   168    setSelectedHistorySession(null);\n   169    setSelectedSource(null);\n   170    setStep('select');\n   171    setError(null);\n   172    setRecommendations([]);\n   173    setSelectedRecommendation(null);\n   174  };\n   175\n   176  // Handle confirmation: Yes\n   177  const handleConfirmYes = async () => {\n   178    setStep('processing');\n   179    setProcessing(true);\n   180    setProcessProgress(0);\n   181    setError(null);\n   182\n   183    try {\n   184      const { data: { user } } = await supabase.auth.getUser();\n   185      if (!user) throw new Error('Not authenticated. Please log in again.');\n   186\n   187      // If new upload, create session and upload video\n   188      let currentSessionId = sessionId;\n   189      let uploadedVideoUrl = videoUrl;\n   190\n   191      if (selectedSource === 'upload' && videoFile) {\n   192        // Upload video with progress tracking\n   193        // This is critical - do NOT create session if upload fails\n   194        setProcessProgress(5);\n   195\n   196        let videoPath: string | null = null;\n   197        try {\n   198          videoPath = await uploadVideo(videoFile, user.id, (progress) => {\n   199            // Upload progress: 5-25%\n   200            setProcessProgress(5 + Math.round(progress * 0.2));\n   201          });\n   202\n   203          if (!videoPath) {\n   204            throw new Error('Upload returned empty path');\n   205          }\n   206\n   207          // Get public URL\n   208          uploadedVideoUrl = getVideoUrl(videoPath);\n   209          console.log('Strategy video uploaded:', videoPath);\n   210\n   211        } catch (uploadError) {\n   212          console.error('Strategy video upload failed:', uploadError);\n   213          const uploadErrorMsg = uploadError instanceof Error\n   214            ? uploadError.message\n   215            : 'Failed to upload video. Please try again.';\n   216          throw new Error(uploadErrorMsg);\n   217        }\n   218\n   219        // Create session only AFTER successful upload\n   220        setProcessProgress(25);\n   221        const { data: session, error: sessionError } = await supabase\n   222          .from('sessions')\n   223          .insert({\n   224            user_id: user.id,\n   225            type: 'strategy',\n   226            video_path: videoPath,\n   227            video_url: uploadedVideoUrl,\n   228            filename: videoFile.name,\n   229            status: 'processing',\n   230          })\n   231          .select()\n   232          .single();\n   233\n   234        if (sessionError) {\n   235          console.error('Session creation error:', sessionError);\n   236          throw new Error('Failed to create analysis session');\n   237        }\n   238\n   239        currentSessionId = session.id;\n   240        setSessionId(session.id);\n   241      } else if (sessionId) {\n   242        // Update existing session type to strategy\n   243        await supabase\n   244          .from('sessions')\n   245          .update({ status: 'processing' })\n   246          .eq('id', sessionId);\n   247      }\n   248\n   249      if (!currentSessionId) throw new Error('No session ID');\n   250\n   251      // Generate strategy analysis\n   252      setProcessProgress(30);\n   253      const result = await generateStrategyAnalysis(currentSessionId);\n   254      setProcessProgress(100);\n   255\n   256      setStrategyResult(result);\n   257      setCoachingPoints(result.coaching_points || []);\n   258\n   259      // Generate recommendations from the strategy result\n   260      const generatedRecs = generateRecommendations(result);\n   261      setRecommendations(generatedRecs);\n   262      if (generatedRecs.length > 0) {\n   263        setSelectedRecommendation(generatedRecs[0]);\n   264      }\n   265\n   266      // Update session status\n   267      await supabase\n   268        .from('sessions')\n   269        .update({ status: 'ready' })\n   270        .eq('id', currentSessionId);\n   271\n   272      setStep('results');\n   273    } catch (err) {\n   274      console.error('Strategy processing error:', err);\n   275      const errorMessage = err instanceof Error ? err.message : 'Failed to analyze video. Please try again.';\n   276      setError(errorMessage);\n   277      setStep('confirm');\n   278    } finally {\n   279      setProcessing(false);\n   280    }\n   281  };\n   282\n   283  // Generate strategy recommendations from result\n   284  const generateRecommendations = (result: StrategyResult): StrategyRecommendation[] => {\n   285    // Generate multiple recommendation variants\n   286    const recommendations: StrategyRecommendation[] = [];\n   287\n   288    // Recommendation 1: Optimal path (existing refined trajectory)\n   289    recommendations.push({\n   290      id: 'optimal-deep',\n   291      name: 'Deep Clear Strategy',\n   292      reason: 'Push opponent to the back court with deep clears to create attacking opportunities.',\n   293      confidence: 92,\n   294      jumpToVideoTimeSec: 2,\n   295      trajectory2D: result.refined_trajectory,\n   296      trajectory3D: result.refined_trajectory,\n   297    });\n   298\n   299    // Recommendation 2: Cross-court variant\n   300    const crossCourtTrajectory = result.refined_trajectory.map((p, i) => ({\n   301      ...p,\n   302      x: i % 2 === 0 ? 0.2 : 0.8, // Alternate sides\n   303      court_x: i % 2 === 0 ? 0.2 : 0.8,\n   304    }));\n   305    recommendations.push({\n   306      id: 'cross-court',\n   307      name: 'Cross-Court Attack',\n   308      reason: 'Use sharp cross-court angles to move opponent laterally and open up straight line kills.',\n   309      confidence: 87,\n   310      jumpToVideoTimeSec: 4,\n   311      trajectory2D: crossCourtTrajectory,\n   312      trajectory3D: crossCourtTrajectory,\n   313    });\n   314\n   315    // Recommendation 3: Net rush\n   316    const netRushTrajectory = result.refined_trajectory.map((p, i) => ({\n   317      ...p,\n   318      y: i % 2 === 0 ? 0.3 : 0.55, // Closer to net\n   319      court_y: i % 2 === 0 ? 0.3 : 0.55,\n   320    }));\n   321    recommendations.push({\n   322      id: 'net-rush',\n   323      name: 'Net Domination',\n   324      reason: 'Control the front court with tight net shots to force weak lifts and create smash opportunities.',\n   325      confidence: 78,\n   326      jumpToVideoTimeSec: 6,\n   327      trajectory2D: netRushTrajectory,\n   328      trajectory3D: netRushTrajectory,\n   329    });\n   330\n   331    return recommendations;\n   332  };\n   333\n   334  // Generate strategy analysis (mock implementation)\n   335  const generateStrategyAnalysis = async (sessionId: string): Promise<StrategyResult> => {\n   336    // Simulate processing time\n   337    for (let i = 30; i <= 90; i += 10) {\n   338      await new Promise((resolve) => setTimeout(resolve, 500));\n   339      setProcessProgress(i);\n   340    }\n   341\n   342    // Generate mock trajectory data\n   343    const originalTrajectory: TrajectoryPoint[] = [];\n   344    const refinedTrajectory: TrajectoryPoint[] = [];\n   345\n   346    // Generate a rally pattern\n   347    const rallyPoints = 8;\n   348    for (let i = 0; i < rallyPoints; i++) {\n   349      const t = i / rallyPoints;\n   350      const isEven = i % 2 === 0;\n   351\n   352      // Original trajectory (player's actual shots)\n   353      originalTrajectory.push({\n   354        x: 0.3 + Math.random() * 0.4,\n   355        y: isEven ? 0.15 + Math.random() * 0.2 : 0.65 + Math.random() * 0.2,\n   356        timestamp: i * 2,\n   357        court_x: 0.3 + Math.random() * 0.4,\n   358        court_y: isEven ? 0.2 : 0.8,\n   359      });\n   360\n   361      // Refined trajectory (optimal shots)\n   362      refinedTrajectory.push({\n   363        x: isEven ? 0.7 : 0.3, // More decisive placement\n   364        y: isEven ? 0.1 : 0.9, // Deeper shots\n   365        timestamp: i * 2,\n   366        court_x: isEven ? 0.7 : 0.3,\n   367        court_y: isEven ? 0.1 : 0.9,\n   368      });\n   369    }\n   370\n   371    // Generate coaching points\n   372    const coachingPointsOptions = [\n   373      'Your shots tend to land mid-court. Push for deeper clears to the back tramlines.',\n   374      'Good variation in cross-court angles. Consider adding more straight drops to surprise opponents.',\n   375      'Rally patterns show predictable sequences. Mix up the pace with sudden smashes.',\n   376      'Effective use of the net area. Maintain the pressure with quicker net exchanges.',\n   377      'Recovery positioning is slightly late. Focus on split-step timing after each shot.',\n   378      'Strong defensive clears under pressure. Work on transitioning to attack faster.',\n   379      'Shot selection in the forecourt is excellent. Add deceptive flicks to your arsenal.',\n   380      'Backhand shots are going wide. Adjust your grip and follow-through angle.',\n   381    ];\n   382\n   383    const selectedPoints = coachingPointsOptions\n   384      .sort(() => Math.random() - 0.5)\n   385      .slice(0, 5 + Math.floor(Math.random() * 2));\n   386\n   387    // Save to database\n   388    const result: StrategyResult = {\n   389      id: crypto.randomUUID(),\n   390      session_id: sessionId,\n   391      original_trajectory: originalTrajectory,\n   392      refined_trajectory: refinedTrajectory,\n   393      coaching_points: selectedPoints,\n   394      created_at: new Date().toISOString(),\n   395    };\n   396\n   397    await supabase.from('strategy_results').insert(result);\n   398\n   399    return result;\n   400  };\n   401\n   402  // Format date\n   403  const formatDate = (dateString: string) => {\n   404    return new Date(dateString).toLocaleDateString('en-US', {\n   405      month: 'short',\n   406      day: 'numeric',\n   407      hour: '2-digit',\n   408      minute: '2-digit',\n   409    });\n   410  };\n   411\n   412  return (\n   413    <div className=\"min-h-screen bg-gray-50\">\n   414      <DashboardNav />\n   415\n   416      <main className=\"ml-64 p-8\">\n   417        <div className=\"max-w-5xl mx-auto\">\n   418          {/* Header */}\n   419          <div className=\"mb-8\">\n   420            <h1 className=\"text-3xl font-bold text-gray-900\">Strategy Analysis</h1>\n   421            <p className=\"text-gray-600 mt-1\">\n   422              Analyze your rally patterns and get AI-powered tactical insights\n   423            </p>\n   424          </div>\n   425\n   426          {/* Error display */}\n   427          {error && (\n   428            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n   429              {error}\n   430              <button\n   431                onClick={() => setError(null)}\n   432                className=\"ml-4 text-red-500 hover:text-red-700\"\n   433              >\n   434                Dismiss\n   435              </button>\n   436            </div>\n   437          )}\n   438\n   439          {/* Step: Select Source */}\n   440          {step === 'select' && (\n   441            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n   442              {/* Upload New */}\n   443              <button\n   444                onClick={() => fileInputRef.current?.click()}\n   445                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n   446              >\n   447                <div className=\"w-16 h-16 bg-primary-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-primary-200 transition\">\n   448                  <svg className=\"w-8 h-8 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n   449                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n   450                  </svg>\n   451                </div>\n   452                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Upload Video</h3>\n   453                <p className=\"text-gray-500\">\n   454                  Upload a new match or rally video for strategy analysis\n   455                </p>\n   456                <input\n   457                  ref={fileInputRef}\n   458                  type=\"file\"\n   459                  accept=\"video/*\"\n   460                  onChange={handleFileSelect}\n   461                  className=\"hidden\"\n   462                />\n   463              </button>\n   464\n   465              {/* Choose from History */}\n   466              <button\n   467                onClick={() => {\n   468                  loadHistorySessions();\n   469                  setShowHistoryDrawer(true);\n   470                }}\n   471                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n   472              >\n   473                <div className=\"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-200 transition\">\n   474                  <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n   475                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n   476                  </svg>\n   477                </div>\n   478                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Choose from History</h3>\n   479                <p className=\"text-gray-500\">\n   480                  Select a previously analyzed video from your session history\n   481                </p>\n   482              </button>\n   483            </div>\n   484          )}\n   485\n   486          {/* Step: Confirm Video */}\n   487          {step === 'confirm' && videoUrl && (\n   488            <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n   489              {/* Video preview */}\n   490              <div className=\"bg-gray-900 aspect-video relative\">\n   491                <video\n   492                  ref={videoRef}\n   493                  src={videoUrl}\n   494                  className=\"w-full h-full object-contain\"\n   495                  controls\n   496                />\n   497              </div>\n   498\n   499              {/* Confirmation prompt */}\n   500              <div className=\"p-6 border-t border-gray-200\">\n   501                <div className=\"flex items-center justify-between\">\n   502                  <div>\n   503                    <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n   504                      Is this the correct video?\n   505                    </h3>\n   506                    <p className=\"text-gray-500 text-sm\">\n   507                      {selectedSource === 'upload' && videoFile\n   508                        ? videoFile.name\n   509                        : selectedHistorySession?.filename || 'Selected video'}\n   510                      {selectedHistorySession && (\n   511                        <span className=\"ml-2 text-gray-400\">\n   512                          from {formatDate(selectedHistorySession.created_at)}\n   513                        </span>\n   514                      )}\n   515                    </p>\n   516                  </div>\n   517                  <div className=\"flex gap-3\">\n   518                    <button\n   519                      onClick={handleConfirmNo}\n   520                      className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n   521                    >\n   522                      No, go back\n   523                    </button>\n   524                    <button\n   525                      onClick={handleConfirmYes}\n   526                      className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n   527                    >\n   528                      Yes, analyze\n   529                    </button>\n   530                  </div>\n   531                </div>\n   532              </div>\n   533            </div>\n   534          )}\n   535\n   536          {/* Step: Processing */}\n   537          {step === 'processing' && (\n   538            <div className=\"bg-white rounded-xl p-12 shadow-sm text-center\">\n   539              <div className=\"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n   540                <svg className=\"w-10 h-10 text-primary-500 animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n   541                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n   542                </svg>\n   543              </div>\n   544              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n   545                Analyzing Your Strategy...\n   546              </h3>\n   547              <p className=\"text-gray-500 mb-6\">\n   548                Tracking shuttle trajectories and generating tactical insights\n   549              </p>\n   550              <div className=\"w-64 mx-auto bg-gray-200 rounded-full h-2 mb-2\">\n   551                <div\n   552                  className=\"bg-primary-500 h-2 rounded-full transition-all duration-300\"\n   553                  style={{ width: `${processProgress}%` }}\n   554                />\n   555              </div>\n   556              <p className=\"text-sm text-gray-500\">{processProgress}% complete</p>\n   557            </div>\n   558          )}\n   559\n   560          {/* Step: Results */}\n   561          {step === 'results' && strategyResult && (\n   562            <div className=\"space-y-6\">\n   563              {/* Court Animation */}\n   564              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n   565                <div className=\"p-4 border-b border-gray-200\">\n   566                  <h3 className=\"font-semibold text-gray-900\">Rally Trajectory Analysis</h3>\n   567                  <p className=\"text-sm text-gray-500\">Original shots vs. optimal placement</p>\n   568                </div>\n   569                <div className=\"p-6\">\n   570                  <CourtTrajectoryAnimation\n   571                    originalTrajectory={strategyResult.original_trajectory}\n   572                    refinedTrajectory={selectedRecommendation?.trajectory2D || strategyResult.refined_trajectory}\n   573                  />\n   574                </div>\n   575              </div>\n   576\n   577              {/* Strategy Recommendations */}\n   578              {recommendations.length > 0 && (\n   579                <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n   580                  <div className=\"p-4 border-b border-gray-200\">\n   581                    <h3 className=\"font-semibold text-gray-900\">Recommended Strategies</h3>\n   582                    <p className=\"text-sm text-gray-500\">Select a strategy to see the optimal trajectory</p>\n   583                  </div>\n   584                  <div className=\"p-4 grid grid-cols-1 md:grid-cols-3 gap-4\">\n   585                    {recommendations.map((rec) => (\n   586                      <button\n   587                        key={rec.id}\n   588                        onClick={() => setSelectedRecommendation(rec)}\n   589                        className={`p-4 rounded-lg border-2 text-left transition ${\n   590                          selectedRecommendation?.id === rec.id\n   591                            ? 'border-green-500 bg-green-50'\n   592                            : 'border-gray-200 hover:border-gray-300'\n   593                        }`}\n   594                      >\n   595                        <div className=\"flex items-center justify-between mb-2\">\n   596                          <h4 className=\"font-medium text-gray-900\">{rec.name}</h4>\n   597                          <span className={`text-sm font-bold ${\n   598                            rec.confidence >= 90 ? 'text-green-600' :\n   599                            rec.confidence >= 80 ? 'text-yellow-600' : 'text-orange-600'\n   600                          }`}>\n   601                            {rec.confidence}%\n   602                          </span>\n   603                        </div>\n   604                        <p className=\"text-sm text-gray-600\">{rec.reason}</p>\n   605                      </button>\n   606                    ))}\n   607                  </div>\n   608                </div>\n   609              )}\n   610\n   611              {/* Coaching Points */}\n   612              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n   613                <div className=\"p-4 border-b border-gray-200\">\n   614                  <h3 className=\"font-semibold text-gray-900\">Key Tactical Insights</h3>\n   615                  <p className=\"text-sm text-gray-500\">{coachingPoints.length} points to improve your game</p>\n   616                </div>\n   617                <div className=\"p-6\">\n   618                  <ul className=\"space-y-4\">\n   619                    {coachingPoints.map((point, index) => (\n   620                      <li key={index} className=\"flex items-start gap-3\">\n   621                        <span className=\"w-6 h-6 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium\">\n   622                          {index + 1}\n   623                        </span>\n   624                        <p className=\"text-gray-700\">{point}</p>\n   625                      </li>\n   626                    ))}\n   627                  </ul>\n   628                </div>\n   629              </div>\n   630\n   631              {/* Actions */}\n   632              <div className=\"flex justify-between\">\n   633                <button\n   634                  onClick={handleConfirmNo}\n   635                  className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n   636                >\n   637                  Analyze Another Video\n   638                </button>\n   639                <Link\n   640                  href=\"/history\"\n   641                  className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n   642                >\n   643                  View All Sessions\n   644                </Link>\n   645              </div>\n   646            </div>\n   647          )}\n   648\n   649          {/* History Drawer */}\n   650          {showHistoryDrawer && (\n   651            <div className=\"fixed inset-0 z-50\">\n   652              <div\n   653                className=\"absolute inset-0 bg-black/50\"\n   654                onClick={() => setShowHistoryDrawer(false)}\n   655              />\n   656              <div className=\"absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl\">\n   657                <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n   658                  <h3 className=\"font-semibold text-gray-900\">Select from History</h3>\n   659                  <button\n   660                    onClick={() => setShowHistoryDrawer(false)}\n   661                    className=\"p-2 hover:bg-gray-100 rounded-lg\"\n   662                  >\n   663                    <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n   664                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n   665                    </svg>\n   666                  </button>\n   667                </div>\n   668                <div className=\"overflow-y-auto h-[calc(100vh-72px)]\">\n   669                  {loadingHistory ? (\n   670                    <div className=\"p-8 text-center\">\n   671                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4\" />\n   672                      <p className=\"text-gray-500\">Loading sessions...</p>\n   673                    </div>\n   674                  ) : historySessions.length === 0 ? (\n   675                    <div className=\"p-8 text-center\">\n   676                      <p className=\"text-gray-500\">No sessions with video found.</p>\n   677                    </div>\n   678                  ) : (\n   679                    <div className=\"p-4 space-y-3\">\n   680                      {historySessions.map((session) => (\n   681                        <button\n   682                          key={session.id}\n   683                          onClick={() => handleHistorySelect(session)}\n   684                          className=\"w-full p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition text-left\"\n   685                        >\n   686                          <div className=\"flex items-center gap-3\">\n   687                            <div className=\"w-16 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0\">\n   688                              {session.video_url ? (\n   689                                <video\n   690                                  src={session.video_url}\n   691                                  className=\"w-full h-full object-cover\"\n   692                                  muted\n   693                                />\n   694                              ) : (\n   695                                <div className=\"w-full h-full flex items-center justify-center\">\n   696                                  <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n   697                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n   698                                  </svg>\n   699                                </div>\n   700                              )}\n   701                            </div>\n   702                            <div className=\"flex-1 min-w-0\">\n   703                              <p className=\"font-medium text-gray-900 truncate\">\n   704                                {session.filename || 'Untitled Session'}\n   705                              </p>\n   706                              <p className=\"text-sm text-gray-500\">\n   707                                {formatDate(session.created_at)}\n   708                              </p>\n   709                            </div>\n   710                            <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n   711                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n   712                            </svg>\n   713                          </div>\n   714                        </button>\n   715                      ))}\n   716                    </div>\n   717                  )}\n   718                </div>\n   719              </div>\n   720            </div>\n   721          )}\n   722        </div>\n   723      </main>\n   724    </div>\n   725  );\n   726}\n   727\n   728// ============================================\n   729// Court Trajectory Animation Component\n   730// Uses PlaybackEngine for proper lifecycle management\n   731// ============================================\n   732\n   733interface CourtTrajectoryAnimationProps {\n   734  originalTrajectory: TrajectoryPoint[];\n   735  refinedTrajectory: TrajectoryPoint[];\n   736}\n   737\n   738// Speed options\n   739const SPEED_OPTIONS: { value: TimeScale; label: string }[] = [\n   740  { value: 0.25, label: '0.25x' },\n   741  { value: 0.5, label: '0.5x' },\n   742  { value: 1, label: '1x' },\n   743  { value: 2, label: '2x' },\n   744];\n   745\n   746function CourtTrajectoryAnimation({\n   747  originalTrajectory,\n   748  refinedTrajectory,\n   749}: CourtTrajectoryAnimationProps) {\n   750  const canvasRef = useRef<HTMLCanvasElement>(null);\n   751\n   752  // UI state (for display only)\n   753  const [isPlaying, setIsPlaying] = useState(true);\n   754  const [showOriginal, setShowOriginal] = useState(true);\n   755  const [showRefined, setShowRefined] = useState(true);\n   756  const [speed, setSpeed] = useState<TimeScale>(1);\n   757  const [activeView, setActiveView] = useState<ActiveView>('2d');\n   758  const [progress, setProgress] = useState(0);\n   759\n   760  // Playback engine refs - these are the source of truth for animation state\n   761  const engineRef = useRef<PlaybackEngineRefs>(createPlaybackEngine());\n   762  const animationRef = useRef<number | null>(null);\n   763  const mountedRef = useRef(true);\n   764\n   765  // Keep refs for callbacks to avoid stale closures\n   766  const showOriginalRef = useRef(showOriginal);\n   767  const showRefinedRef = useRef(showRefined);\n   768  const originalTrajectoryRef = useRef(originalTrajectory);\n   769  const refinedTrajectoryRef = useRef(refinedTrajectory);\n   770\n   771  // Sync refs with state\n   772  useEffect(() => {\n   773    showOriginalRef.current = showOriginal;\n   774  }, [showOriginal]);\n   775\n   776  useEffect(() => {\n   777    showRefinedRef.current = showRefined;\n   778  }, [showRefined]);\n   779\n   780  useEffect(() => {\n   781    originalTrajectoryRef.current = originalTrajectory;\n   782  }, [originalTrajectory]);\n   783\n   784  useEffect(() => {\n   785    refinedTrajectoryRef.current = refinedTrajectory;\n   786  }, [refinedTrajectory]);\n   787\n   788  // Initialize engine on mount\n   789  useEffect(() => {\n   790    mountedRef.current = true;\n   791    const engine = engineRef.current;\n   792    engine.playingRef.current = true;\n   793    engine.timeScaleRef.current = 1;\n   794    engine.tRef.current = 0;\n   795    engine.activeViewRef.current = '2d';\n   796\n   797    return () => {\n   798      mountedRef.current = false;\n   799      if (animationRef.current) {\n   800        cancelAnimationFrame(animationRef.current);\n   801        animationRef.current = null;\n   802      }\n   803    };\n   804  }, []);\n   805\n   806  // 2D Canvas rendering loop\n   807  const render2D = useCallback((timestamp: number) => {\n   808    if (!mountedRef.current) return;\n   809\n   810    const engine = engineRef.current;\n   811    const canvas = canvasRef.current;\n   812\n   813    // Only render if 2D view is active\n   814    if (engine.activeViewRef.current !== '2d' || !canvas) {\n   815      // Continue loop but skip render\n   816      animationRef.current = requestAnimationFrame(render2D);\n   817      return;\n   818    }\n   819\n   820    const ctx = canvas.getContext('2d');\n   821    if (!ctx) {\n   822      animationRef.current = requestAnimationFrame(render2D);\n   823      return;\n   824    }\n   825\n   826    // Update time using playback engine\n   827    const t = updatePlaybackTime(engine, timestamp);\n   828\n   829    // Update progress state for UI (throttled)\n   830    setProgress(t);\n   831\n   832    const width = canvas.width;\n   833    const height = canvas.height;\n   834\n   835    // Court dimensions (scaled)\n   836    const courtMargin = 40;\n   837    const courtWidth = width - courtMargin * 2;\n   838    const courtHeight = height - courtMargin * 2;\n   839\n   840    // Clear\n   841    ctx.clearRect(0, 0, width, height);\n   842\n   843    // Draw court background\n   844    ctx.fillStyle = '#15803d';\n   845    ctx.fillRect(courtMargin, courtMargin, courtWidth, courtHeight);\n   846\n   847    // Draw court lines\n   848    ctx.strokeStyle = '#ffffff';\n   849    ctx.lineWidth = 2;\n   850\n   851    // Outer boundary\n   852    ctx.strokeRect(courtMargin, courtMargin, courtWidth, courtHeight);\n   853\n   854    // Center line\n   855    ctx.beginPath();\n   856    ctx.moveTo(courtMargin, height / 2);\n   857    ctx.lineTo(width - courtMargin, height / 2);\n   858    ctx.stroke();\n   859\n   860    // Service lines\n   861    const serviceLineY1 = courtMargin + courtHeight * 0.22;\n   862    const serviceLineY2 = courtMargin + courtHeight * 0.78;\n   863    ctx.beginPath();\n   864    ctx.moveTo(courtMargin, serviceLineY1);\n   865    ctx.lineTo(width - courtMargin, serviceLineY1);\n   866    ctx.moveTo(courtMargin, serviceLineY2);\n   867    ctx.lineTo(width - courtMargin, serviceLineY2);\n   868    ctx.stroke();\n   869\n   870    // Center service line\n   871    ctx.beginPath();\n   872    ctx.moveTo(width / 2, serviceLineY1);\n   873    ctx.lineTo(width / 2, serviceLineY2);\n   874    ctx.stroke();\n   875\n   876    // Draw trajectory helper\n   877    const drawTrajectory = (\n   878      points: TrajectoryPoint[],\n   879      color: string,\n   880      progress: number\n   881    ) => {\n   882      const visiblePoints = Math.floor(points.length * progress);\n   883\n   884      // Draw lines\n   885      ctx.strokeStyle = color;\n   886      ctx.lineWidth = 3;\n   887      ctx.setLineDash([5, 5]);\n   888      ctx.beginPath();\n   889\n   890      for (let i = 0; i < visiblePoints; i++) {\n   891        const p = points[i];\n   892        const x = courtMargin + p.x * courtWidth;\n   893        const y = courtMargin + p.y * courtHeight;\n   894\n   895        if (i === 0) {\n   896          ctx.moveTo(x, y);\n   897        } else {\n   898          ctx.lineTo(x, y);\n   899        }\n   900      }\n   901      ctx.stroke();\n   902      ctx.setLineDash([]);\n   903\n   904      // Draw points\n   905      for (let i = 0; i < visiblePoints; i++) {\n   906        const p = points[i];\n   907        const x = courtMargin + p.x * courtWidth;\n   908        const y = courtMargin + p.y * courtHeight;\n   909\n   910        ctx.fillStyle = color;\n   911        ctx.beginPath();\n   912        ctx.arc(x, y, 6, 0, Math.PI * 2);\n   913        ctx.fill();\n   914\n   915        ctx.fillStyle = '#ffffff';\n   916        ctx.beginPath();\n   917        ctx.arc(x, y, 3, 0, Math.PI * 2);\n   918        ctx.fill();\n   919      }\n   920    };\n   921\n   922    // Draw trajectories using refs\n   923    if (showOriginalRef.current && originalTrajectoryRef.current.length > 0) {\n   924      drawTrajectory(originalTrajectoryRef.current, '#ef4444', t);\n   925    }\n   926\n   927    if (showRefinedRef.current && refinedTrajectoryRef.current.length > 0) {\n   928      drawTrajectory(refinedTrajectoryRef.current, '#22c55e', t);\n   929    }\n   930\n   931    // Continue animation loop\n   932    animationRef.current = requestAnimationFrame(render2D);\n   933  }, []);\n   934\n   935  // Start/stop animation loop based on active view\n   936  useEffect(() => {\n   937    const engine = engineRef.current;\n   938    engine.activeViewRef.current = activeView;\n   939    engine.lastTimestampRef.current = 0; // Reset timestamp to avoid big delta\n   940\n   941    // Always run the 2D loop for state management, it will skip rendering if 3D is active\n   942    if (activeView === '2d' && !animationRef.current) {\n   943      animationRef.current = requestAnimationFrame(render2D);\n   944    }\n   945\n   946    return () => {\n   947      // Don't cancel on view switch, let it continue\n   948    };\n   949  }, [activeView, render2D]);\n   950\n   951  // Start initial animation\n   952  useEffect(() => {\n   953    if (!animationRef.current) {\n   954      animationRef.current = requestAnimationFrame(render2D);\n   955    }\n   956  }, [render2D]);\n   957\n   958  // Handle play/pause toggle - update both state and ref\n   959  const handlePlayPause = useCallback(() => {\n   960    const engine = engineRef.current;\n   961    const newPlaying = PlaybackEngine.toggle(engine);\n   962    setIsPlaying(newPlaying);\n   963    // Reset timestamp to avoid big jumps when resuming\n   964    engine.lastTimestampRef.current = 0;\n   965  }, []);\n   966\n   967  // Handle speed change - update both state and ref\n   968  const handleSpeedChange = useCallback((newSpeed: TimeScale) => {\n   969    const engine = engineRef.current;\n   970    PlaybackEngine.setSpeed(engine, newSpeed);\n   971    setSpeed(newSpeed);\n   972  }, []);\n   973\n   974  // Handle view change\n   975  const handleViewChange = useCallback((view: ActiveView) => {\n   976    const engine = engineRef.current;\n   977    PlaybackEngine.setActiveView(engine, view);\n   978    setActiveView(view);\n   979  }, []);\n   980\n   981  // Step controls\n   982  const stepForward = useCallback(() => {\n   983    const engine = engineRef.current;\n   984    PlaybackEngine.step(engine, 0.05);\n   985    setProgress(engine.tRef.current);\n   986  }, []);\n   987\n   988  const stepBackward = useCallback(() => {\n   989    const engine = engineRef.current;\n   990    PlaybackEngine.step(engine, -0.05);\n   991    setProgress(engine.tRef.current);\n   992  }, []);\n   993\n   994  const resetAnimation = useCallback(() => {\n   995    const engine = engineRef.current;\n   996    PlaybackEngine.reset(engine);\n   997    setProgress(0);\n   998  }, []);\n   999\n  1000  return (\n  1001    <div>\n  1002      {/* 2D/3D Toggle */}\n  1003      <div className=\"flex justify-center mb-4\">\n  1004        <div className=\"inline-flex rounded-lg border border-gray-200 p-1 bg-gray-50\">\n  1005          <button\n  1006            onClick={() => handleViewChange('2d')}\n  1007            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n  1008              activeView === '2d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n  1009            }`}\n  1010          >\n  1011            2D View\n  1012          </button>\n  1013          <button\n  1014            onClick={() => handleViewChange('3d')}\n  1015            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n  1016              activeView === '3d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n  1017            }`}\n  1018          >\n  1019            3D View\n  1020          </button>\n  1021        </div>\n  1022      </div>\n  1023\n  1024      {/* Conditional 2D/3D rendering - keep both mounted but hide inactive */}\n  1025      <div className={activeView === '2d' ? 'block' : 'hidden'}>\n  1026        <canvas\n  1027          ref={canvasRef}\n  1028          width={500}\n  1029          height={700}\n  1030          className=\"w-full max-w-md mx-auto rounded-lg\"\n  1031        />\n  1032      </div>\n  1033\n  1034      {activeView === '3d' && (\n  1035        <Suspense fallback={\n  1036          <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n  1037            <div className=\"text-white\">Loading 3D view...</div>\n  1038          </div>\n  1039        }>\n  1040          <CourtTrajectory3D\n  1041            originalTrajectory={originalTrajectory}\n  1042            refinedTrajectory={refinedTrajectory}\n  1043            showOriginal={showOriginal}\n  1044            showRefined={showRefined}\n  1045            animationProgress={progress}\n  1046            isPlaying={isPlaying}\n  1047            timeScale={speed}\n  1048          />\n  1049        </Suspense>\n  1050      )}\n  1051\n  1052      {/* Enhanced Controls */}\n  1053      <div className=\"mt-4 space-y-3\">\n  1054        {/* Play/Pause and Step Controls */}\n  1055        <div className=\"flex flex-wrap items-center justify-center gap-2\">\n  1056          <button\n  1057            onClick={stepBackward}\n  1058            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n  1059            title=\"Step backward\"\n  1060          >\n  1061            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n  1062              <path d=\"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z\" />\n  1063            </svg>\n  1064          </button>\n  1065\n  1066          <button\n  1067            onClick={handlePlayPause}\n  1068            className=\"px-4 py-2 bg-primary-500 text-white hover:bg-primary-600 rounded-lg font-medium text-sm flex items-center gap-2\"\n  1069          >\n  1070            {isPlaying ? (\n  1071              <>\n  1072                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n  1073                  <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\" />\n  1074                </svg>\n  1075                Pause\n  1076              </>\n  1077            ) : (\n  1078              <>\n  1079                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n  1080                  <path d=\"M8 5v14l11-7z\" />\n  1081                </svg>\n  1082                Play\n  1083              </>\n  1084            )}\n  1085          </button>\n  1086\n  1087          <button\n  1088            onClick={stepForward}\n  1089            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n  1090            title=\"Step forward\"\n  1091          >\n  1092            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n  1093              <path d=\"M6 18l8.5-6L6 6v12zm2 0V6l6.5 6L8 18zm8-12h2v12h-2V6z\" />\n  1094            </svg>\n  1095          </button>\n  1096\n  1097          <button\n  1098            onClick={resetAnimation}\n  1099            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n  1100            title=\"Reset\"\n  1101          >\n  1102            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n  1103              <path d=\"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\" />\n  1104            </svg>\n  1105          </button>\n  1106        </div>\n  1107\n  1108        {/* Speed Control */}\n  1109        <div className=\"flex items-center justify-center gap-2\">\n  1110          <span className=\"text-sm text-gray-500\">Speed:</span>\n  1111          <div className=\"inline-flex rounded-lg border border-gray-200 p-0.5 bg-gray-50\">\n  1112            {SPEED_OPTIONS.map((option) => (\n  1113              <button\n  1114                key={option.value}\n  1115                onClick={() => handleSpeedChange(option.value)}\n  1116                className={`px-3 py-1 rounded-md text-xs font-medium transition ${\n  1117                  speed === option.value\n  1118                    ? 'bg-white shadow text-gray-900'\n  1119                    : 'text-gray-500 hover:text-gray-700'\n  1120                }`}\n  1121              >\n  1122                {option.label}\n  1123              </button>\n  1124            ))}\n  1125          </div>\n  1126        </div>\n  1127\n  1128        {/* Progress Bar */}\n  1129        <div className=\"flex items-center gap-2 px-4\">\n  1130          <span className=\"text-xs text-gray-500\">{Math.round(progress * 100)}%</span>\n  1131          <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n  1132            <div\n  1133              className=\"h-full bg-primary-500 transition-all duration-100\"\n  1134              style={{ width: `${progress * 100}%` }}\n  1135            />\n  1136          </div>\n  1137        </div>\n  1138\n  1139        {/* Trajectory toggles */}\n  1140        <div className=\"flex items-center justify-center gap-4\">\n  1141          <label className=\"flex items-center gap-2 text-sm\">\n  1142            <input\n  1143              type=\"checkbox\"\n  1144              checked={showOriginal}\n  1145              onChange={(e) => setShowOriginal(e.target.checked)}\n  1146              className=\"rounded\"\n  1147            />\n  1148            <span className=\"flex items-center gap-1\">\n  1149              <span className=\"w-3 h-3 bg-red-500 rounded-full\" />\n  1150              Original\n  1151            </span>\n  1152          </label>\n  1153\n  1154          <label className=\"flex items-center gap-2 text-sm\">\n  1155            <input\n  1156              type=\"checkbox\"\n  1157              checked={showRefined}\n  1158              onChange={(e) => setShowRefined(e.target.checked)}\n  1159              className=\"rounded\"\n  1160            />\n  1161            <span className=\"flex items-center gap-1\">\n  1162              <span className=\"w-3 h-3 bg-green-500 rounded-full\" />\n  1163              Optimal\n  1164            </span>\n  1165          </label>\n  1166        </div>\n  1167      </div>\n  1168\n  1169      {/* Legend */}\n  1170      <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n  1171        <p className=\"text-sm text-gray-600\">\n  1172          <span className=\"text-red-500 font-medium\">Red trajectory:</span> Your actual shot placements during the rally.\n  1173          <br />\n  1174          <span className=\"text-green-500 font-medium\">Green trajectory:</span> AI-suggested optimal placements for better court coverage.\n  1175          {activeView === '3d' && (\n  1176            <>\n  1177              <br />\n  1178              <span className=\"text-gray-500 text-xs mt-2 block\">\n  1179                Tip: Drag to rotate, scroll to zoom, right-click to pan in 3D view.\n  1180              </span>\n  1181            </>\n  1182          )}\n  1183        </p>\n  1184      </div>\n  1185    </div>\n  1186  );\n  1187}\n  1188\n  1189// ============================================\n  1190// Loading Component\n  1191// ============================================\n  1192\n  1193function StrategyLoading() {\n  1194  return (\n  1195    <div className=\"min-h-screen bg-gray-50\">\n  1196      <DashboardNav />\n  1197      <main className=\"ml-64 p-8\">\n  1198        <div className=\"max-w-5xl mx-auto\">\n  1199          <div className=\"animate-pulse\">\n  1200            <div className=\"h-8 bg-gray-200 rounded w-48 mb-4\" />\n  1201            <div className=\"h-4 bg-gray-200 rounded w-96 mb-8\" />\n  1202            <div className=\"grid grid-cols-2 gap-6\">\n  1203              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n  1204              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n  1205            </div>\n  1206          </div>\n  1207        </div>\n  1208      </main>\n  1209    </div>\n  1210  );\n  1211}\n  1212\n  1213// ============================================\n  1214// Export\n  1215// ============================================\n  1216\n  1217export default function StrategyPage() {\n  1218  return (\n  1219    <Suspense fallback={<StrategyLoading />}>\n  1220      <StrategyContent />\n  1221    </Suspense>\n  1222  );\n  1223}\n  1224\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"49316cb6-90ea-46cf-9c11-2f89261fce48","timestamp":"2026-01-24T23:49:52.988Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","content":"'use client';\n\nimport { useState, useEffect, useRef, Suspense, lazy, useCallback, useMemo } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport DashboardNav from '@/components/DashboardNav';\nimport { supabase, uploadVideo, getVideoUrl } from '@/lib/supabase';\nimport type { Session, TrajectoryPoint, StrategyResult } from '@/lib/types';\nimport {\n  createPlaybackEngine,\n  PlaybackEngine,\n  updatePlaybackTime,\n  type TimeScale,\n  type ActiveView,\n  type PlaybackEngineRefs,\n} from '@/lib/playback-engine';\n\n// PHASE 4: Lazy load 3D component to avoid SSR issues\nconst CourtTrajectory3D = lazy(() => import('@/components/CourtTrajectory3D'));\n\n// ============================================\n// Strategy Mode Page\n// ============================================\n\ntype StrategyStep = 'select' | 'confirm' | 'processing' | 'results';\n\ninterface HistorySession extends Session {\n  thumbnail_url?: string;\n}\n\n// Strategy Recommendation types\ninterface StrategyRecommendation {\n  id: string;\n  name: string;\n  reason: string;\n  confidence: number;\n  jumpToVideoTimeSec?: number;\n  trajectory2D: TrajectoryPoint[];\n  trajectory3D?: TrajectoryPoint[];\n}\n\nfunction StrategyContent() {\n  const searchParams = useSearchParams();\n  const sessionIdParam = searchParams.get('session');\n\n  // Step state\n  const [step, setStep] = useState<StrategyStep>('select');\n  const [selectedSource, setSelectedSource] = useState<'upload' | 'history' | null>(null);\n\n  // Video/session state\n  const [videoFile, setVideoFile] = useState<File | null>(null);\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  const [sessionId, setSessionId] = useState<string | null>(sessionIdParam);\n  const [selectedHistorySession, setSelectedHistorySession] = useState<HistorySession | null>(null);\n\n  // History drawer\n  const [showHistoryDrawer, setShowHistoryDrawer] = useState(false);\n  const [historySessions, setHistorySessions] = useState<HistorySession[]>([]);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n\n  // Processing state\n  const [processing, setProcessing] = useState(false);\n  const [processProgress, setProcessProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n\n  // Results state\n  const [strategyResult, setStrategyResult] = useState<StrategyResult | null>(null);\n  const [recommendations, setRecommendations] = useState<StrategyRecommendation[]>([]);\n  const [selectedRecommendation, setSelectedRecommendation] = useState<StrategyRecommendation | null>(null);\n  const [coachingPoints, setCoachingPoints] = useState<string[]>([]);\n\n  // Refs\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  // Load from session param\n  useEffect(() => {\n    if (sessionIdParam) {\n      loadSessionFromHistory(sessionIdParam);\n    }\n  }, [sessionIdParam]);\n\n  // Load history sessions\n  const loadHistorySessions = async () => {\n    setLoadingHistory(true);\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*')\n        .eq('user_id', user.id)\n        .in('type', ['analytics', 'practice'])\n        .not('video_url', 'is', null)\n        .order('created_at', { ascending: false })\n        .limit(50);\n\n      if (error) throw error;\n      setHistorySessions(data || []);\n    } catch (err) {\n      console.error('Error loading history:', err);\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n\n  // Load session from history\n  const loadSessionFromHistory = async (id: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) throw error;\n\n      setSelectedHistorySession(data);\n      setSessionId(data.id);\n      setVideoUrl(data.video_url);\n      setSelectedSource('history');\n      setStep('confirm');\n    } catch (err) {\n      console.error('Error loading session:', err);\n      setError('Failed to load session');\n    }\n  };\n\n  // Handle file upload\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    if (!file.type.startsWith('video/')) {\n      setError('Please select a video file');\n      return;\n    }\n\n    // Max file size 100MB (TUS resumable upload handles large files)\n    if (file.size > 100 * 1024 * 1024) {\n      setError('File size must be less than 100MB. Please compress your video before uploading.');\n      return;\n    }\n\n    setError(null);\n    setVideoFile(file);\n    setVideoUrl(URL.createObjectURL(file));\n    setSelectedSource('upload');\n    setStep('confirm');\n  };\n\n  // Handle history selection\n  const handleHistorySelect = (session: HistorySession) => {\n    setSelectedHistorySession(session);\n    setSessionId(session.id);\n    setVideoUrl(session.video_url || null);\n    setSelectedSource('history');\n    setShowHistoryDrawer(false);\n    setStep('confirm');\n  };\n\n  // Handle confirmation: No\n  const handleConfirmNo = () => {\n    setVideoFile(null);\n    setVideoUrl(null);\n    setSessionId(null);\n    setSelectedHistorySession(null);\n    setSelectedSource(null);\n    setStep('select');\n    setError(null);\n    setRecommendations([]);\n    setSelectedRecommendation(null);\n  };\n\n  // Handle confirmation: Yes\n  const handleConfirmYes = async () => {\n    setStep('processing');\n    setProcessing(true);\n    setProcessProgress(0);\n    setError(null);\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated. Please log in again.');\n\n      // If new upload, create session and upload video\n      let currentSessionId = sessionId;\n      let uploadedVideoUrl = videoUrl;\n\n      if (selectedSource === 'upload' && videoFile) {\n        // Upload video with progress tracking\n        // This is critical - do NOT create session if upload fails\n        setProcessProgress(5);\n\n        let videoPath: string | null = null;\n        try {\n          videoPath = await uploadVideo(videoFile, user.id, (progress) => {\n            // Upload progress: 5-25%\n            setProcessProgress(5 + Math.round(progress * 0.2));\n          });\n\n          if (!videoPath) {\n            throw new Error('Upload returned empty path');\n          }\n\n          // Get public URL\n          uploadedVideoUrl = getVideoUrl(videoPath);\n          console.log('Strategy video uploaded:', videoPath);\n\n        } catch (uploadError) {\n          console.error('Strategy video upload failed:', uploadError);\n          const uploadErrorMsg = uploadError instanceof Error\n            ? uploadError.message\n            : 'Failed to upload video. Please try again.';\n          throw new Error(uploadErrorMsg);\n        }\n\n        // Create session only AFTER successful upload\n        setProcessProgress(25);\n        const { data: session, error: sessionError } = await supabase\n          .from('sessions')\n          .insert({\n            user_id: user.id,\n            type: 'strategy',\n            video_path: videoPath,\n            video_url: uploadedVideoUrl,\n            filename: videoFile.name,\n            status: 'processing',\n          })\n          .select()\n          .single();\n\n        if (sessionError) {\n          console.error('Session creation error:', sessionError);\n          throw new Error('Failed to create analysis session');\n        }\n\n        currentSessionId = session.id;\n        setSessionId(session.id);\n      } else if (sessionId) {\n        // Update existing session type to strategy\n        await supabase\n          .from('sessions')\n          .update({ status: 'processing' })\n          .eq('id', sessionId);\n      }\n\n      if (!currentSessionId) throw new Error('No session ID');\n\n      // Generate strategy analysis\n      setProcessProgress(30);\n      const result = await generateStrategyAnalysis(currentSessionId);\n      setProcessProgress(100);\n\n      setStrategyResult(result);\n      setCoachingPoints(result.coaching_points || []);\n\n      // Generate recommendations from the strategy result\n      const generatedRecs = generateRecommendations(result);\n      setRecommendations(generatedRecs);\n      if (generatedRecs.length > 0) {\n        setSelectedRecommendation(generatedRecs[0]);\n      }\n\n      // Update session status\n      await supabase\n        .from('sessions')\n        .update({ status: 'ready' })\n        .eq('id', currentSessionId);\n\n      setStep('results');\n    } catch (err) {\n      console.error('Strategy processing error:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Failed to analyze video. Please try again.';\n      setError(errorMessage);\n      setStep('confirm');\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  // Generate strategy recommendations from result\n  const generateRecommendations = (result: StrategyResult): StrategyRecommendation[] => {\n    // Generate multiple recommendation variants\n    const recommendations: StrategyRecommendation[] = [];\n\n    // Recommendation 1: Optimal path (existing refined trajectory)\n    recommendations.push({\n      id: 'optimal-deep',\n      name: 'Deep Clear Strategy',\n      reason: 'Push opponent to the back court with deep clears to create attacking opportunities.',\n      confidence: 92,\n      jumpToVideoTimeSec: 2,\n      trajectory2D: result.refined_trajectory,\n      trajectory3D: result.refined_trajectory,\n    });\n\n    // Recommendation 2: Cross-court variant\n    const crossCourtTrajectory = result.refined_trajectory.map((p, i) => ({\n      ...p,\n      x: i % 2 === 0 ? 0.2 : 0.8, // Alternate sides\n      court_x: i % 2 === 0 ? 0.2 : 0.8,\n    }));\n    recommendations.push({\n      id: 'cross-court',\n      name: 'Cross-Court Attack',\n      reason: 'Use sharp cross-court angles to move opponent laterally and open up straight line kills.',\n      confidence: 87,\n      jumpToVideoTimeSec: 4,\n      trajectory2D: crossCourtTrajectory,\n      trajectory3D: crossCourtTrajectory,\n    });\n\n    // Recommendation 3: Net rush\n    const netRushTrajectory = result.refined_trajectory.map((p, i) => ({\n      ...p,\n      y: i % 2 === 0 ? 0.3 : 0.55, // Closer to net\n      court_y: i % 2 === 0 ? 0.3 : 0.55,\n    }));\n    recommendations.push({\n      id: 'net-rush',\n      name: 'Net Domination',\n      reason: 'Control the front court with tight net shots to force weak lifts and create smash opportunities.',\n      confidence: 78,\n      jumpToVideoTimeSec: 6,\n      trajectory2D: netRushTrajectory,\n      trajectory3D: netRushTrajectory,\n    });\n\n    return recommendations;\n  };\n\n  // Generate strategy analysis (mock implementation)\n  const generateStrategyAnalysis = async (sessionId: string): Promise<StrategyResult> => {\n    // Simulate processing time\n    for (let i = 30; i <= 90; i += 10) {\n      await new Promise((resolve) => setTimeout(resolve, 500));\n      setProcessProgress(i);\n    }\n\n    // Generate mock trajectory data\n    const originalTrajectory: TrajectoryPoint[] = [];\n    const refinedTrajectory: TrajectoryPoint[] = [];\n\n    // Generate a rally pattern\n    const rallyPoints = 8;\n    for (let i = 0; i < rallyPoints; i++) {\n      const t = i / rallyPoints;\n      const isEven = i % 2 === 0;\n\n      // Original trajectory (player's actual shots)\n      originalTrajectory.push({\n        x: 0.3 + Math.random() * 0.4,\n        y: isEven ? 0.15 + Math.random() * 0.2 : 0.65 + Math.random() * 0.2,\n        timestamp: i * 2,\n        court_x: 0.3 + Math.random() * 0.4,\n        court_y: isEven ? 0.2 : 0.8,\n      });\n\n      // Refined trajectory (optimal shots)\n      refinedTrajectory.push({\n        x: isEven ? 0.7 : 0.3, // More decisive placement\n        y: isEven ? 0.1 : 0.9, // Deeper shots\n        timestamp: i * 2,\n        court_x: isEven ? 0.7 : 0.3,\n        court_y: isEven ? 0.1 : 0.9,\n      });\n    }\n\n    // Generate coaching points\n    const coachingPointsOptions = [\n      'Your shots tend to land mid-court. Push for deeper clears to the back tramlines.',\n      'Good variation in cross-court angles. Consider adding more straight drops to surprise opponents.',\n      'Rally patterns show predictable sequences. Mix up the pace with sudden smashes.',\n      'Effective use of the net area. Maintain the pressure with quicker net exchanges.',\n      'Recovery positioning is slightly late. Focus on split-step timing after each shot.',\n      'Strong defensive clears under pressure. Work on transitioning to attack faster.',\n      'Shot selection in the forecourt is excellent. Add deceptive flicks to your arsenal.',\n      'Backhand shots are going wide. Adjust your grip and follow-through angle.',\n    ];\n\n    const selectedPoints = coachingPointsOptions\n      .sort(() => Math.random() - 0.5)\n      .slice(0, 5 + Math.floor(Math.random() * 2));\n\n    // Save to database\n    const result: StrategyResult = {\n      id: crypto.randomUUID(),\n      session_id: sessionId,\n      original_trajectory: originalTrajectory,\n      refined_trajectory: refinedTrajectory,\n      coaching_points: selectedPoints,\n      created_at: new Date().toISOString(),\n    };\n\n    await supabase.from('strategy_results').insert(result);\n\n    return result;\n  };\n\n  // Format date\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">Strategy Analysis</h1>\n            <p className=\"text-gray-600 mt-1\">\n              Analyze your rally patterns and get AI-powered tactical insights\n            </p>\n          </div>\n\n          {/* Error display */}\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n              {error}\n              <button\n                onClick={() => setError(null)}\n                className=\"ml-4 text-red-500 hover:text-red-700\"\n              >\n                Dismiss\n              </button>\n            </div>\n          )}\n\n          {/* Step: Select Source */}\n          {step === 'select' && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Upload New */}\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n              >\n                <div className=\"w-16 h-16 bg-primary-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-primary-200 transition\">\n                  <svg className=\"w-8 h-8 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Upload Video</h3>\n                <p className=\"text-gray-500\">\n                  Upload a new match or rally video for strategy analysis\n                </p>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n              </button>\n\n              {/* Choose from History */}\n              <button\n                onClick={() => {\n                  loadHistorySessions();\n                  setShowHistoryDrawer(true);\n                }}\n                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n              >\n                <div className=\"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-200 transition\">\n                  <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Choose from History</h3>\n                <p className=\"text-gray-500\">\n                  Select a previously analyzed video from your session history\n                </p>\n              </button>\n            </div>\n          )}\n\n          {/* Step: Confirm Video */}\n          {step === 'confirm' && videoUrl && (\n            <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n              {/* Video preview */}\n              <div className=\"bg-gray-900 aspect-video relative\">\n                <video\n                  ref={videoRef}\n                  src={videoUrl}\n                  className=\"w-full h-full object-contain\"\n                  controls\n                />\n              </div>\n\n              {/* Confirmation prompt */}\n              <div className=\"p-6 border-t border-gray-200\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n                      Is this the correct video?\n                    </h3>\n                    <p className=\"text-gray-500 text-sm\">\n                      {selectedSource === 'upload' && videoFile\n                        ? videoFile.name\n                        : selectedHistorySession?.filename || 'Selected video'}\n                      {selectedHistorySession && (\n                        <span className=\"ml-2 text-gray-400\">\n                          from {formatDate(selectedHistorySession.created_at)}\n                        </span>\n                      )}\n                    </p>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <button\n                      onClick={handleConfirmNo}\n                      className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n                    >\n                      No, go back\n                    </button>\n                    <button\n                      onClick={handleConfirmYes}\n                      className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n                    >\n                      Yes, analyze\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step: Processing */}\n          {step === 'processing' && (\n            <div className=\"bg-white rounded-xl p-12 shadow-sm text-center\">\n              <div className=\"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <svg className=\"w-10 h-10 text-primary-500 animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                Analyzing Your Strategy...\n              </h3>\n              <p className=\"text-gray-500 mb-6\">\n                Tracking shuttle trajectories and generating tactical insights\n              </p>\n              <div className=\"w-64 mx-auto bg-gray-200 rounded-full h-2 mb-2\">\n                <div\n                  className=\"bg-primary-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${processProgress}%` }}\n                />\n              </div>\n              <p className=\"text-sm text-gray-500\">{processProgress}% complete</p>\n            </div>\n          )}\n\n          {/* Step: Results */}\n          {step === 'results' && strategyResult && (\n            <div className=\"space-y-6\">\n              {/* Court Animation */}\n              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200\">\n                  <h3 className=\"font-semibold text-gray-900\">Rally Trajectory Analysis</h3>\n                  <p className=\"text-sm text-gray-500\">Original shots vs. optimal placement</p>\n                </div>\n                <div className=\"p-6\">\n                  <CourtTrajectoryAnimation\n                    originalTrajectory={strategyResult.original_trajectory}\n                    refinedTrajectory={selectedRecommendation?.trajectory2D || strategyResult.refined_trajectory}\n                  />\n                </div>\n              </div>\n\n              {/* Strategy Recommendations */}\n              {recommendations.length > 0 && (\n                <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                  <div className=\"p-4 border-b border-gray-200\">\n                    <h3 className=\"font-semibold text-gray-900\">Recommended Strategies</h3>\n                    <p className=\"text-sm text-gray-500\">Select a strategy to see the optimal trajectory</p>\n                  </div>\n                  <div className=\"p-4 grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    {recommendations.map((rec) => (\n                      <button\n                        key={rec.id}\n                        onClick={() => setSelectedRecommendation(rec)}\n                        className={`p-4 rounded-lg border-2 text-left transition ${\n                          selectedRecommendation?.id === rec.id\n                            ? 'border-green-500 bg-green-50'\n                            : 'border-gray-200 hover:border-gray-300'\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-medium text-gray-900\">{rec.name}</h4>\n                          <span className={`text-sm font-bold ${\n                            rec.confidence >= 90 ? 'text-green-600' :\n                            rec.confidence >= 80 ? 'text-yellow-600' : 'text-orange-600'\n                          }`}>\n                            {rec.confidence}%\n                          </span>\n                        </div>\n                        <p className=\"text-sm text-gray-600\">{rec.reason}</p>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Coaching Points */}\n              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200\">\n                  <h3 className=\"font-semibold text-gray-900\">Key Tactical Insights</h3>\n                  <p className=\"text-sm text-gray-500\">{coachingPoints.length} points to improve your game</p>\n                </div>\n                <div className=\"p-6\">\n                  <ul className=\"space-y-4\">\n                    {coachingPoints.map((point, index) => (\n                      <li key={index} className=\"flex items-start gap-3\">\n                        <span className=\"w-6 h-6 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium\">\n                          {index + 1}\n                        </span>\n                        <p className=\"text-gray-700\">{point}</p>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex justify-between\">\n                <button\n                  onClick={handleConfirmNo}\n                  className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n                >\n                  Analyze Another Video\n                </button>\n                <Link\n                  href=\"/history\"\n                  className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n                >\n                  View All Sessions\n                </Link>\n              </div>\n            </div>\n          )}\n\n          {/* History Drawer */}\n          {showHistoryDrawer && (\n            <div className=\"fixed inset-0 z-50\">\n              <div\n                className=\"absolute inset-0 bg-black/50\"\n                onClick={() => setShowHistoryDrawer(false)}\n              />\n              <div className=\"absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl\">\n                <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n                  <h3 className=\"font-semibold text-gray-900\">Select from History</h3>\n                  <button\n                    onClick={() => setShowHistoryDrawer(false)}\n                    className=\"p-2 hover:bg-gray-100 rounded-lg\"\n                  >\n                    <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n                <div className=\"overflow-y-auto h-[calc(100vh-72px)]\">\n                  {loadingHistory ? (\n                    <div className=\"p-8 text-center\">\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4\" />\n                      <p className=\"text-gray-500\">Loading sessions...</p>\n                    </div>\n                  ) : historySessions.length === 0 ? (\n                    <div className=\"p-8 text-center\">\n                      <p className=\"text-gray-500\">No sessions with video found.</p>\n                    </div>\n                  ) : (\n                    <div className=\"p-4 space-y-3\">\n                      {historySessions.map((session) => (\n                        <button\n                          key={session.id}\n                          onClick={() => handleHistorySelect(session)}\n                          className=\"w-full p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition text-left\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-16 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0\">\n                              {session.video_url ? (\n                                <video\n                                  src={session.video_url}\n                                  className=\"w-full h-full object-cover\"\n                                  muted\n                                />\n                              ) : (\n                                <div className=\"w-full h-full flex items-center justify-center\">\n                                  <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                                  </svg>\n                                </div>\n                              )}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <p className=\"font-medium text-gray-900 truncate\">\n                                {session.filename || 'Untitled Session'}\n                              </p>\n                              <p className=\"text-sm text-gray-500\">\n                                {formatDate(session.created_at)}\n                              </p>\n                            </div>\n                            <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                            </svg>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// ============================================\n// Court Trajectory Animation Component\n// Uses PlaybackEngine for proper lifecycle management\n// ============================================\n\ninterface CourtTrajectoryAnimationProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n}\n\n// Speed options\nconst SPEED_OPTIONS: { value: TimeScale; label: string }[] = [\n  { value: 0.25, label: '0.25x' },\n  { value: 0.5, label: '0.5x' },\n  { value: 1, label: '1x' },\n  { value: 2, label: '2x' },\n];\n\nfunction CourtTrajectoryAnimation({\n  originalTrajectory,\n  refinedTrajectory,\n}: CourtTrajectoryAnimationProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // UI state (for display only)\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [showOriginal, setShowOriginal] = useState(true);\n  const [showRefined, setShowRefined] = useState(true);\n  const [speed, setSpeed] = useState<TimeScale>(1);\n  const [activeView, setActiveView] = useState<ActiveView>('2d');\n  const [progress, setProgress] = useState(0);\n\n  // Playback engine refs - these are the source of truth for animation state\n  const engineRef = useRef<PlaybackEngineRefs>(createPlaybackEngine());\n  const animationRef = useRef<number | null>(null);\n  const mountedRef = useRef(true);\n\n  // Keep refs for callbacks to avoid stale closures\n  const showOriginalRef = useRef(showOriginal);\n  const showRefinedRef = useRef(showRefined);\n  const originalTrajectoryRef = useRef(originalTrajectory);\n  const refinedTrajectoryRef = useRef(refinedTrajectory);\n\n  // Sync refs with state\n  useEffect(() => {\n    showOriginalRef.current = showOriginal;\n  }, [showOriginal]);\n\n  useEffect(() => {\n    showRefinedRef.current = showRefined;\n  }, [showRefined]);\n\n  useEffect(() => {\n    originalTrajectoryRef.current = originalTrajectory;\n  }, [originalTrajectory]);\n\n  useEffect(() => {\n    refinedTrajectoryRef.current = refinedTrajectory;\n  }, [refinedTrajectory]);\n\n  // Initialize engine on mount\n  useEffect(() => {\n    mountedRef.current = true;\n    const engine = engineRef.current;\n    engine.playingRef.current = true;\n    engine.timeScaleRef.current = 1;\n    engine.tRef.current = 0;\n    engine.activeViewRef.current = '2d';\n\n    return () => {\n      mountedRef.current = false;\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n    };\n  }, []);\n\n  // 2D Canvas rendering loop\n  const render2D = useCallback((timestamp: number) => {\n    if (!mountedRef.current) return;\n\n    const engine = engineRef.current;\n    const canvas = canvasRef.current;\n\n    // Only render if 2D view is active\n    if (engine.activeViewRef.current !== '2d' || !canvas) {\n      // Continue loop but skip render\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    // Update time using playback engine\n    const t = updatePlaybackTime(engine, timestamp);\n\n    // Update progress state for UI (throttled)\n    setProgress(t);\n\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Court dimensions (scaled)\n    const courtMargin = 40;\n    const courtWidth = width - courtMargin * 2;\n    const courtHeight = height - courtMargin * 2;\n\n    // Clear\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // Outer boundary\n    ctx.strokeRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Center line\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, height / 2);\n    ctx.lineTo(width - courtMargin, height / 2);\n    ctx.stroke();\n\n    // Service lines\n    const serviceLineY1 = courtMargin + courtHeight * 0.22;\n    const serviceLineY2 = courtMargin + courtHeight * 0.78;\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, serviceLineY1);\n    ctx.lineTo(width - courtMargin, serviceLineY1);\n    ctx.moveTo(courtMargin, serviceLineY2);\n    ctx.lineTo(width - courtMargin, serviceLineY2);\n    ctx.stroke();\n\n    // Center service line\n    ctx.beginPath();\n    ctx.moveTo(width / 2, serviceLineY1);\n    ctx.lineTo(width / 2, serviceLineY2);\n    ctx.stroke();\n\n    // Draw trajectory helper\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(x, y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };\n\n    // Draw trajectories using refs\n    if (showOriginalRef.current && originalTrajectoryRef.current.length > 0) {\n      drawTrajectory(originalTrajectoryRef.current, '#ef4444', t);\n    }\n\n    if (showRefinedRef.current && refinedTrajectoryRef.current.length > 0) {\n      drawTrajectory(refinedTrajectoryRef.current, '#22c55e', t);\n    }\n\n    // Continue animation loop\n    animationRef.current = requestAnimationFrame(render2D);\n  }, []);\n\n  // Start/stop animation loop based on active view\n  useEffect(() => {\n    const engine = engineRef.current;\n    engine.activeViewRef.current = activeView;\n    engine.lastTimestampRef.current = 0; // Reset timestamp to avoid big delta\n\n    // Always run the 2D loop for state management, it will skip rendering if 3D is active\n    if (activeView === '2d' && !animationRef.current) {\n      animationRef.current = requestAnimationFrame(render2D);\n    }\n\n    return () => {\n      // Don't cancel on view switch, let it continue\n    };\n  }, [activeView, render2D]);\n\n  // Start initial animation\n  useEffect(() => {\n    if (!animationRef.current) {\n      animationRef.current = requestAnimationFrame(render2D);\n    }\n  }, [render2D]);\n\n  // Handle play/pause toggle - update both state and ref\n  const handlePlayPause = useCallback(() => {\n    const engine = engineRef.current;\n    const newPlaying = PlaybackEngine.toggle(engine);\n    setIsPlaying(newPlaying);\n    // Reset timestamp to avoid big jumps when resuming\n    engine.lastTimestampRef.current = 0;\n  }, []);\n\n  // Handle speed change - update both state and ref\n  const handleSpeedChange = useCallback((newSpeed: TimeScale) => {\n    const engine = engineRef.current;\n    PlaybackEngine.setSpeed(engine, newSpeed);\n    setSpeed(newSpeed);\n  }, []);\n\n  // Handle view change\n  const handleViewChange = useCallback((view: ActiveView) => {\n    const engine = engineRef.current;\n    PlaybackEngine.setActiveView(engine, view);\n    setActiveView(view);\n  }, []);\n\n  // Step controls\n  const stepForward = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.step(engine, 0.05);\n    setProgress(engine.tRef.current);\n  }, []);\n\n  const stepBackward = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.step(engine, -0.05);\n    setProgress(engine.tRef.current);\n  }, []);\n\n  const resetAnimation = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.reset(engine);\n    setProgress(0);\n  }, []);\n\n  return (\n    <div>\n      {/* 2D/3D Toggle */}\n      <div className=\"flex justify-center mb-4\">\n        <div className=\"inline-flex rounded-lg border border-gray-200 p-1 bg-gray-50\">\n          <button\n            onClick={() => handleViewChange('2d')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n              activeView === '2d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            2D View\n          </button>\n          <button\n            onClick={() => handleViewChange('3d')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n              activeView === '3d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            3D View\n          </button>\n        </div>\n      </div>\n\n      {/* Conditional 2D/3D rendering - keep both mounted but hide inactive */}\n      <div className={activeView === '2d' ? 'block' : 'hidden'}>\n        <canvas\n          ref={canvasRef}\n          width={500}\n          height={700}\n          className=\"w-full max-w-md mx-auto rounded-lg\"\n        />\n      </div>\n\n      {activeView === '3d' && (\n        <Suspense fallback={\n          <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n            <div className=\"text-white\">Loading 3D view...</div>\n          </div>\n        }>\n          <CourtTrajectory3D\n            originalTrajectory={originalTrajectory}\n            refinedTrajectory={refinedTrajectory}\n            showOriginal={showOriginal}\n            showRefined={showRefined}\n            animationProgress={progress}\n            isPlaying={isPlaying}\n            timeScale={speed}\n          />\n        </Suspense>\n      )}\n\n      {/* Enhanced Controls */}\n      <div className=\"mt-4 space-y-3\">\n        {/* Play/Pause and Step Controls */}\n        <div className=\"flex flex-wrap items-center justify-center gap-2\">\n          <button\n            onClick={stepBackward}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Step backward\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={handlePlayPause}\n            className=\"px-4 py-2 bg-primary-500 text-white hover:bg-primary-600 rounded-lg font-medium text-sm flex items-center gap-2\"\n          >\n            {isPlaying ? (\n              <>\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\" />\n                </svg>\n                Pause\n              </>\n            ) : (\n              <>\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M8 5v14l11-7z\" />\n                </svg>\n                Play\n              </>\n            )}\n          </button>\n\n          <button\n            onClick={stepForward}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Step forward\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M6 18l8.5-6L6 6v12zm2 0V6l6.5 6L8 18zm8-12h2v12h-2V6z\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={resetAnimation}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Reset\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Speed Control */}\n        <div className=\"flex items-center justify-center gap-2\">\n          <span className=\"text-sm text-gray-500\">Speed:</span>\n          <div className=\"inline-flex rounded-lg border border-gray-200 p-0.5 bg-gray-50\">\n            {SPEED_OPTIONS.map((option) => (\n              <button\n                key={option.value}\n                onClick={() => handleSpeedChange(option.value)}\n                className={`px-3 py-1 rounded-md text-xs font-medium transition ${\n                  speed === option.value\n                    ? 'bg-white shadow text-gray-900'\n                    : 'text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"flex items-center gap-2 px-4\">\n          <span className=\"text-xs text-gray-500\">{Math.round(progress * 100)}%</span>\n          <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-primary-500 transition-all duration-100\"\n              style={{ width: `${progress * 100}%` }}\n            />\n          </div>\n        </div>\n\n        {/* Trajectory toggles */}\n        <div className=\"flex items-center justify-center gap-4\">\n          <label className=\"flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={showOriginal}\n              onChange={(e) => setShowOriginal(e.target.checked)}\n              className=\"rounded\"\n            />\n            <span className=\"flex items-center gap-1\">\n              <span className=\"w-3 h-3 bg-red-500 rounded-full\" />\n              Original\n            </span>\n          </label>\n\n          <label className=\"flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={showRefined}\n              onChange={(e) => setShowRefined(e.target.checked)}\n              className=\"rounded\"\n            />\n            <span className=\"flex items-center gap-1\">\n              <span className=\"w-3 h-3 bg-green-500 rounded-full\" />\n              Optimal\n            </span>\n          </label>\n        </div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n        <p className=\"text-sm text-gray-600\">\n          <span className=\"text-red-500 font-medium\">Red trajectory:</span> Your actual shot placements during the rally.\n          <br />\n          <span className=\"text-green-500 font-medium\">Green trajectory:</span> AI-suggested optimal placements for better court coverage.\n          {activeView === '3d' && (\n            <>\n              <br />\n              <span className=\"text-gray-500 text-xs mt-2 block\">\n                Tip: Drag to rotate, scroll to zoom, right-click to pan in 3D view.\n              </span>\n            </>\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Loading Component\n// ============================================\n\nfunction StrategyLoading() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-48 mb-4\" />\n            <div className=\"h-4 bg-gray-200 rounded w-96 mb-8\" />\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// ============================================\n// Export\n// ============================================\n\nexport default function StrategyPage() {\n  return (\n    <Suspense fallback={<StrategyLoading />}>\n      <StrategyContent />\n    </Suspense>\n  );\n}\n","numLines":1224,"startLine":1,"totalLines":1224}},"sourceToolAssistantUUID":"a37a44a1-0b5a-4f46-a4e7-4d4492e27a28"}
{"parentUuid":"49316cb6-90ea-46cf-9c11-2f89261fce48","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01PEFC2cHigzkd7aYDTkGfKC","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I have a clear understanding of both files. Let me analyze what needs to be fixed:\n\n**Current Issues:**\n\n1. **2D Canvas (strategy/page.tsx lines 835-874):**\n   - Uses arbitrary percentage-based positioning (e.g., `courtHeight * 0.22`)\n   - Doesn't maintain correct aspect ratio (canvas is 500x700, but court should be 6.1:13.4)\n   - Service lines are at 22% and 78% instead of correct positions\n   - Center line runs all the way across (should only be in service boxes)\n   - Missing singles sidelines and doubles long service lines\n\n2. **3D Court (CourtTrajectory3D.tsx):**\n   - Has some correct constants (COURT_LENGTH, COURT_WIDTH, SINGLES_WIDTH)\n   - But service lines are drawn at fixed 1.98m from center (incorrect - should be 4.72m and 8.68m from baseline)\n   - Center line goes between service lines (incorrect segment positions)\n   - Missing doubles long service lines (at 0.76m from baseline)\n\n**BWF Standard Badminton Court Spec (from the user's requirements):**\n- Court length: 13.4m\n- Doubles width: 6.1m\n- Singles width: 5.18m (inset 0.46m on each side)\n- Net line at center: y = 6.7m\n- Short service lines: 1.98m from net = y = 4.72m and y = 8.68m\n- Doubles long service lines: 0.76m from baseline = y = 0.76m and y = 12.64m\n- Center line: runs between short service line and back boundary on each side\n  - Near side: y in [0, 4.72]\n  - Far side: y in [8.68, 13.4]\n\n**Plan:**\n\n\nI'll extract the court dimensions into a shared constants file, then fix both renderers to use these specifications. This means creating `src/lib/courtSpec.ts` with all the standard measurements, updating the 2D canvas to properly scale and position each line, and correcting the 3D court to draw service lines and long service lines at their actual positions.","signature":"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"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5576,"cache_creation_input_tokens":17662,"cache_read_input_tokens":30798,"cache_creation":{"ephemeral_5m_input_tokens":17662,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXT6hR7jY94VtXN15zP46","type":"assistant","uuid":"7a2e099d-cd54-4363-a31e-73b9cd8a1930","timestamp":"2026-01-24T23:50:07.957Z"}
{"parentUuid":"7a2e099d-cd54-4363-a31e-73b9cd8a1930","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01PEFC2cHigzkd7aYDTkGfKC","type":"message","role":"assistant","content":[{"type":"text","text":"Now I understand the current implementation. Let me create a todo list to track the changes needed."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5576,"cache_creation_input_tokens":17662,"cache_read_input_tokens":30798,"cache_creation":{"ephemeral_5m_input_tokens":17662,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXT6hR7jY94VtXN15zP46","type":"assistant","uuid":"866fb0fe-0cc7-481c-9378-c22e6a53ac28","timestamp":"2026-01-24T23:50:08.132Z"}
{"parentUuid":"866fb0fe-0cc7-481c-9378-c22e6a53ac28","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01PEFC2cHigzkd7aYDTkGfKC","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_014YuBX1sZNnYmPjpGqxpcmQ","name":"TodoWrite","input":{"todos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"in_progress","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5576,"cache_creation_input_tokens":17662,"cache_read_input_tokens":30798,"cache_creation":{"ephemeral_5m_input_tokens":17662,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXT6hR7jY94VtXN15zP46","type":"assistant","uuid":"7ba213ff-2003-4678-bae5-e04534a47e85","timestamp":"2026-01-24T23:50:09.908Z"}
{"parentUuid":"7ba213ff-2003-4678-bae5-e04534a47e85","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_014YuBX1sZNnYmPjpGqxpcmQ","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"ac00e581-855e-4f8e-8fc9-5e7f173b587d","timestamp":"2026-01-24T23:50:10.149Z","toolUseResult":{"oldTodos":[],"newTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"in_progress","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}]},"sourceToolAssistantUUID":"7ba213ff-2003-4678-bae5-e04534a47e85"}
{"parentUuid":"ac00e581-855e-4f8e-8fc9-5e7f173b587d","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_017WNSJ568A8LnKGBmo2aUj6","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Let me start by creating the shared court specification module.","signature":"EucBCkYICxgCKkB+eCQw1MhMDPYJ6H2Xl+DV+jjPzvozC2VJMKCoN4+octa6vZp3+SF3QGWvL2tEDt464wD41775b3F6ABlNGQ6IEgx2nIpa9Ix5MaLlwLwaDPlhbtOlHyGRoPMUhiIwrLLsaTTDy3gFwmhcXDnv0kSxugQr0r8XjjbNkWpmc601V5QoofRyd2q4z2eD+yahKk96Lc5Z4s3+gqyCk7SoP6p21c9+s05GQ5WI4KiDuzpnCcZpVPDjHxE+TMV3oVRsqQeUrIhRBZjz/dDrCt0d6fOm0av1sR0b1J5mYP022NEQGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":6346,"cache_read_input_tokens":48460,"cache_creation":{"ephemeral_5m_input_tokens":6346,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT6igHaYsg98urVCdUga","type":"assistant","uuid":"5c5a2231-a114-4fc0-b6c9-76927eda94ee","timestamp":"2026-01-24T23:50:13.322Z"}
{"parentUuid":"5c5a2231-a114-4fc0-b6c9-76927eda94ee","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_017WNSJ568A8LnKGBmo2aUj6","type":"message","role":"assistant","content":[{"type":"text","text":"Let me start by creating the shared court specification module with BWF-standard dimensions."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":6346,"cache_read_input_tokens":48460,"cache_creation":{"ephemeral_5m_input_tokens":6346,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT6igHaYsg98urVCdUga","type":"assistant","uuid":"02fd88ce-5ec6-4c8d-98ef-c3c7c45edbaf","timestamp":"2026-01-24T23:50:13.843Z"}
{"parentUuid":"02fd88ce-5ec6-4c8d-98ef-c3c7c45edbaf","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_017WNSJ568A8LnKGBmo2aUj6","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Fwfx8eNL6bGxr5UUHHffee","name":"Write","input":{"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\lib\\courtSpec.ts","content":"/**\n * BWF Standard Badminton Court Specification\n * All dimensions in meters\n *\n * Reference: Badminton World Federation (BWF) Laws of Badminton\n *\n * Court Layout (y=0 at bottom baseline, x=0 at left sideline):\n *\n *    x=0                    x=3.05               x=6.1\n *    |                        |                    |\n *    +------------------------+--------------------+ y=13.4 (far baseline)\n *    |                        |                    |\n *    |  Far Back             |       Far Back     | y=12.64 (doubles long service)\n *    |  Service Box          |       Service Box  |\n *    |        (L)            |         (R)        |\n *    +------------------------+--------------------+ y=8.68 (far short service)\n *    |                                             |\n *    |              (No center line                |\n *    |               in this zone)                 |\n *    |                                             |\n *    +---------------------------------------------+ y=6.7 (NET)\n *    |                                             |\n *    |              (No center line                |\n *    |               in this zone)                 |\n *    |                                             |\n *    +------------------------+--------------------+ y=4.72 (near short service)\n *    |                        |                    |\n *    |  Near Front           |      Near Front    | y=0.76 (doubles long service)\n *    |  Service Box          |      Service Box   |\n *    |        (L)            |         (R)        |\n *    +------------------------+--------------------+ y=0 (near baseline)\n *\n *    |<---- 0.46m --->|      Singles sidelines at x=0.46 and x=5.64\n */\n\n// ===========================================\n// Court Dimensions (meters)\n// ===========================================\n\n/** Full court length (baseline to baseline) */\nexport const COURT_LENGTH = 13.4;\n\n/** Doubles court width (sideline to sideline) */\nexport const COURT_WIDTH = 6.1;\n\n/** Singles court width */\nexport const SINGLES_WIDTH = 5.18;\n\n/** Inset from doubles sideline to singles sideline */\nexport const SINGLES_INSET = (COURT_WIDTH - SINGLES_WIDTH) / 2; // 0.46m\n\n/** Net line position (center of court) */\nexport const NET_Y = COURT_LENGTH / 2; // 6.7m\n\n/** Distance from net to short service line */\nexport const SHORT_SERVICE_DIST = 1.98;\n\n/** Distance from baseline to doubles long service line */\nexport const LONG_SERVICE_DIST = 0.76;\n\n/** Net height at center */\nexport const NET_HEIGHT_CENTER = 1.524; // 1.524m at center\n\n/** Net height at posts */\nexport const NET_HEIGHT_POSTS = 1.55; // 1.55m at posts\n\n/** Line thickness (40mm = 0.04m, but render wider for visibility) */\nexport const LINE_THICKNESS = 0.04;\n\n// ===========================================\n// Computed Y-positions (from baseline y=0)\n// ===========================================\n\n/** Near short service line (1.98m from net toward y=0) */\nexport const NEAR_SHORT_SERVICE_Y = NET_Y - SHORT_SERVICE_DIST; // 4.72m\n\n/** Far short service line (1.98m from net toward y=13.4) */\nexport const FAR_SHORT_SERVICE_Y = NET_Y + SHORT_SERVICE_DIST; // 8.68m\n\n/** Near doubles long service line (0.76m from near baseline) */\nexport const NEAR_LONG_SERVICE_Y = LONG_SERVICE_DIST; // 0.76m\n\n/** Far doubles long service line (0.76m from far baseline) */\nexport const FAR_LONG_SERVICE_Y = COURT_LENGTH - LONG_SERVICE_DIST; // 12.64m\n\n/** Center line x-position */\nexport const CENTER_X = COURT_WIDTH / 2; // 3.05m\n\n/** Singles sideline positions */\nexport const SINGLES_LEFT_X = SINGLES_INSET; // 0.46m\nexport const SINGLES_RIGHT_X = COURT_WIDTH - SINGLES_INSET; // 5.64m\n\n// ===========================================\n// Court Specification Object\n// ===========================================\n\nexport interface CourtSpec {\n  // Dimensions\n  length: number;\n  width: number;\n  singlesWidth: number;\n  singlesInset: number;\n\n  // Key Y positions\n  netY: number;\n  nearShortServiceY: number;\n  farShortServiceY: number;\n  nearLongServiceY: number;\n  farLongServiceY: number;\n\n  // Key X positions\n  centerX: number;\n  singlesLeftX: number;\n  singlesRightX: number;\n\n  // Net\n  netHeightCenter: number;\n  netHeightPosts: number;\n\n  // Line\n  lineThickness: number;\n}\n\nexport const COURT_SPEC: CourtSpec = {\n  length: COURT_LENGTH,\n  width: COURT_WIDTH,\n  singlesWidth: SINGLES_WIDTH,\n  singlesInset: SINGLES_INSET,\n\n  netY: NET_Y,\n  nearShortServiceY: NEAR_SHORT_SERVICE_Y,\n  farShortServiceY: FAR_SHORT_SERVICE_Y,\n  nearLongServiceY: NEAR_LONG_SERVICE_Y,\n  farLongServiceY: FAR_LONG_SERVICE_Y,\n\n  centerX: CENTER_X,\n  singlesLeftX: SINGLES_LEFT_X,\n  singlesRightX: SINGLES_RIGHT_X,\n\n  netHeightCenter: NET_HEIGHT_CENTER,\n  netHeightPosts: NET_HEIGHT_POSTS,\n\n  lineThickness: LINE_THICKNESS,\n};\n\n// ===========================================\n// Coordinate Conversion Helpers\n// ===========================================\n\n/**\n * Convert normalized coordinates (0-1) to court meters.\n * Normalized coordinates have origin at top-left (0,0) and go to bottom-right (1,1).\n * Court coordinates have origin at bottom-left (0,0) in meters.\n *\n * @param normX Normalized x (0-1, 0=left, 1=right)\n * @param normY Normalized y (0-1, 0=top/far, 1=bottom/near)\n * @returns Court coordinates in meters\n */\nexport function normalizedToMeters(normX: number, normY: number): { x: number; y: number } {\n  return {\n    x: normX * COURT_WIDTH,\n    y: (1 - normY) * COURT_LENGTH, // Flip Y: normalized 0=far, court 0=near\n  };\n}\n\n/**\n * Convert court meters to normalized coordinates (0-1).\n *\n * @param meterX Court x in meters (0=left sideline)\n * @param meterY Court y in meters (0=near baseline)\n * @returns Normalized coordinates (0-1)\n */\nexport function metersToNormalized(meterX: number, meterY: number): { x: number; y: number } {\n  return {\n    x: meterX / COURT_WIDTH,\n    y: 1 - (meterY / COURT_LENGTH), // Flip Y\n  };\n}\n\n/**\n * Convert court meters to 3D scene coordinates.\n * 3D scene has origin at court center, x=left-right, z=near-far.\n *\n * @param meterX Court x in meters (0=left sideline)\n * @param meterY Court y in meters (0=near baseline)\n * @returns 3D scene coordinates { x, z } (y is height)\n */\nexport function metersTo3D(meterX: number, meterY: number): { x: number; z: number } {\n  return {\n    x: meterX - COURT_WIDTH / 2,  // Center at 0\n    z: meterY - COURT_LENGTH / 2, // Center at 0\n  };\n}\n\n/**\n * Convert normalized coordinates directly to 3D scene coordinates.\n *\n * @param normX Normalized x (0-1)\n * @param normY Normalized y (0-1)\n * @returns 3D scene coordinates { x, z }\n */\nexport function normalizedTo3D(normX: number, normY: number): { x: number; z: number } {\n  const meters = normalizedToMeters(normX, normY);\n  return metersTo3D(meters.x, meters.y);\n}\n\n/**\n * Calculate proper scale to fit court in viewport while maintaining aspect ratio.\n *\n * @param viewportWidth Available width in pixels\n * @param viewportHeight Available height in pixels\n * @param padding Padding in pixels on each side\n * @returns Scale factor (pixels per meter) and offsets\n */\nexport function calculateCourtScale(\n  viewportWidth: number,\n  viewportHeight: number,\n  padding: number = 40\n): {\n  scale: number;\n  offsetX: number;\n  offsetY: number;\n  courtPixelWidth: number;\n  courtPixelHeight: number;\n} {\n  const availableWidth = viewportWidth - 2 * padding;\n  const availableHeight = viewportHeight - 2 * padding;\n\n  // Calculate scale to fit court while maintaining aspect ratio\n  const scaleX = availableWidth / COURT_WIDTH;\n  const scaleY = availableHeight / COURT_LENGTH;\n  const scale = Math.min(scaleX, scaleY);\n\n  // Calculate actual court dimensions in pixels\n  const courtPixelWidth = COURT_WIDTH * scale;\n  const courtPixelHeight = COURT_LENGTH * scale;\n\n  // Center the court in the viewport\n  const offsetX = padding + (availableWidth - courtPixelWidth) / 2;\n  const offsetY = padding + (availableHeight - courtPixelHeight) / 2;\n\n  return {\n    scale,\n    offsetX,\n    offsetY,\n    courtPixelWidth,\n    courtPixelHeight,\n  };\n}\n\n/**\n * Convert court meters to canvas pixels for 2D rendering.\n *\n * @param meterX Court x in meters\n * @param meterY Court y in meters\n * @param scale Pixels per meter\n * @param offsetX X offset in pixels\n * @param offsetY Y offset in pixels\n * @returns Canvas pixel coordinates\n */\nexport function metersToCanvas(\n  meterX: number,\n  meterY: number,\n  scale: number,\n  offsetX: number,\n  offsetY: number\n): { x: number; y: number } {\n  return {\n    x: offsetX + meterX * scale,\n    // Canvas Y is inverted (0 at top), court Y has 0 at near baseline\n    // So far baseline (y=13.4m) should be at top of canvas\n    y: offsetY + (COURT_LENGTH - meterY) * scale,\n  };\n}\n\n/**\n * Convert normalized coordinates to canvas pixels.\n */\nexport function normalizedToCanvas(\n  normX: number,\n  normY: number,\n  scale: number,\n  offsetX: number,\n  offsetY: number\n): { x: number; y: number } {\n  const meters = normalizedToMeters(normX, normY);\n  return metersToCanvas(meters.x, meters.y, scale, offsetX, offsetY);\n}\n"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":6346,"cache_read_input_tokens":48460,"cache_creation":{"ephemeral_5m_input_tokens":6346,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT6igHaYsg98urVCdUga","type":"assistant","uuid":"63d1cdbc-da68-40fd-b599-70348776533a","timestamp":"2026-01-24T23:50:49.106Z"}
{"type":"file-history-snapshot","messageId":"63d1cdbc-da68-40fd-b599-70348776533a","snapshot":{"messageId":"f976949d-fc76-4c77-86e9-3bd6d5ec90b7","trackedFileBackups":{"rallycoach\\src\\lib\\courtSpec.ts":{"backupFileName":null,"version":1,"backupTime":"2026-01-24T23:56:02.737Z"}},"timestamp":"2026-01-24T23:44:54.240Z"},"isSnapshotUpdate":true}
{"parentUuid":"63d1cdbc-da68-40fd-b599-70348776533a","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Fwfx8eNL6bGxr5UUHHffee","type":"tool_result","content":"File created successfully at: c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\lib\\courtSpec.ts"}]},"uuid":"fa08047e-be13-4f5b-8e40-1b766066f56a","timestamp":"2026-01-24T23:56:03.754Z","toolUseResult":{"type":"create","filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\lib\\courtSpec.ts","content":"/**\n * BWF Standard Badminton Court Specification\n * All dimensions in meters\n *\n * Reference: Badminton World Federation (BWF) Laws of Badminton\n *\n * Court Layout (y=0 at bottom baseline, x=0 at left sideline):\n *\n *    x=0                    x=3.05               x=6.1\n *    |                        |                    |\n *    +------------------------+--------------------+ y=13.4 (far baseline)\n *    |                        |                    |\n *    |  Far Back             |       Far Back     | y=12.64 (doubles long service)\n *    |  Service Box          |       Service Box  |\n *    |        (L)            |         (R)        |\n *    +------------------------+--------------------+ y=8.68 (far short service)\n *    |                                             |\n *    |              (No center line                |\n *    |               in this zone)                 |\n *    |                                             |\n *    +---------------------------------------------+ y=6.7 (NET)\n *    |                                             |\n *    |              (No center line                |\n *    |               in this zone)                 |\n *    |                                             |\n *    +------------------------+--------------------+ y=4.72 (near short service)\n *    |                        |                    |\n *    |  Near Front           |      Near Front    | y=0.76 (doubles long service)\n *    |  Service Box          |      Service Box   |\n *    |        (L)            |         (R)        |\n *    +------------------------+--------------------+ y=0 (near baseline)\n *\n *    |<---- 0.46m --->|      Singles sidelines at x=0.46 and x=5.64\n */\n\n// ===========================================\n// Court Dimensions (meters)\n// ===========================================\n\n/** Full court length (baseline to baseline) */\nexport const COURT_LENGTH = 13.4;\n\n/** Doubles court width (sideline to sideline) */\nexport const COURT_WIDTH = 6.1;\n\n/** Singles court width */\nexport const SINGLES_WIDTH = 5.18;\n\n/** Inset from doubles sideline to singles sideline */\nexport const SINGLES_INSET = (COURT_WIDTH - SINGLES_WIDTH) / 2; // 0.46m\n\n/** Net line position (center of court) */\nexport const NET_Y = COURT_LENGTH / 2; // 6.7m\n\n/** Distance from net to short service line */\nexport const SHORT_SERVICE_DIST = 1.98;\n\n/** Distance from baseline to doubles long service line */\nexport const LONG_SERVICE_DIST = 0.76;\n\n/** Net height at center */\nexport const NET_HEIGHT_CENTER = 1.524; // 1.524m at center\n\n/** Net height at posts */\nexport const NET_HEIGHT_POSTS = 1.55; // 1.55m at posts\n\n/** Line thickness (40mm = 0.04m, but render wider for visibility) */\nexport const LINE_THICKNESS = 0.04;\n\n// ===========================================\n// Computed Y-positions (from baseline y=0)\n// ===========================================\n\n/** Near short service line (1.98m from net toward y=0) */\nexport const NEAR_SHORT_SERVICE_Y = NET_Y - SHORT_SERVICE_DIST; // 4.72m\n\n/** Far short service line (1.98m from net toward y=13.4) */\nexport const FAR_SHORT_SERVICE_Y = NET_Y + SHORT_SERVICE_DIST; // 8.68m\n\n/** Near doubles long service line (0.76m from near baseline) */\nexport const NEAR_LONG_SERVICE_Y = LONG_SERVICE_DIST; // 0.76m\n\n/** Far doubles long service line (0.76m from far baseline) */\nexport const FAR_LONG_SERVICE_Y = COURT_LENGTH - LONG_SERVICE_DIST; // 12.64m\n\n/** Center line x-position */\nexport const CENTER_X = COURT_WIDTH / 2; // 3.05m\n\n/** Singles sideline positions */\nexport const SINGLES_LEFT_X = SINGLES_INSET; // 0.46m\nexport const SINGLES_RIGHT_X = COURT_WIDTH - SINGLES_INSET; // 5.64m\n\n// ===========================================\n// Court Specification Object\n// ===========================================\n\nexport interface CourtSpec {\n  // Dimensions\n  length: number;\n  width: number;\n  singlesWidth: number;\n  singlesInset: number;\n\n  // Key Y positions\n  netY: number;\n  nearShortServiceY: number;\n  farShortServiceY: number;\n  nearLongServiceY: number;\n  farLongServiceY: number;\n\n  // Key X positions\n  centerX: number;\n  singlesLeftX: number;\n  singlesRightX: number;\n\n  // Net\n  netHeightCenter: number;\n  netHeightPosts: number;\n\n  // Line\n  lineThickness: number;\n}\n\nexport const COURT_SPEC: CourtSpec = {\n  length: COURT_LENGTH,\n  width: COURT_WIDTH,\n  singlesWidth: SINGLES_WIDTH,\n  singlesInset: SINGLES_INSET,\n\n  netY: NET_Y,\n  nearShortServiceY: NEAR_SHORT_SERVICE_Y,\n  farShortServiceY: FAR_SHORT_SERVICE_Y,\n  nearLongServiceY: NEAR_LONG_SERVICE_Y,\n  farLongServiceY: FAR_LONG_SERVICE_Y,\n\n  centerX: CENTER_X,\n  singlesLeftX: SINGLES_LEFT_X,\n  singlesRightX: SINGLES_RIGHT_X,\n\n  netHeightCenter: NET_HEIGHT_CENTER,\n  netHeightPosts: NET_HEIGHT_POSTS,\n\n  lineThickness: LINE_THICKNESS,\n};\n\n// ===========================================\n// Coordinate Conversion Helpers\n// ===========================================\n\n/**\n * Convert normalized coordinates (0-1) to court meters.\n * Normalized coordinates have origin at top-left (0,0) and go to bottom-right (1,1).\n * Court coordinates have origin at bottom-left (0,0) in meters.\n *\n * @param normX Normalized x (0-1, 0=left, 1=right)\n * @param normY Normalized y (0-1, 0=top/far, 1=bottom/near)\n * @returns Court coordinates in meters\n */\nexport function normalizedToMeters(normX: number, normY: number): { x: number; y: number } {\n  return {\n    x: normX * COURT_WIDTH,\n    y: (1 - normY) * COURT_LENGTH, // Flip Y: normalized 0=far, court 0=near\n  };\n}\n\n/**\n * Convert court meters to normalized coordinates (0-1).\n *\n * @param meterX Court x in meters (0=left sideline)\n * @param meterY Court y in meters (0=near baseline)\n * @returns Normalized coordinates (0-1)\n */\nexport function metersToNormalized(meterX: number, meterY: number): { x: number; y: number } {\n  return {\n    x: meterX / COURT_WIDTH,\n    y: 1 - (meterY / COURT_LENGTH), // Flip Y\n  };\n}\n\n/**\n * Convert court meters to 3D scene coordinates.\n * 3D scene has origin at court center, x=left-right, z=near-far.\n *\n * @param meterX Court x in meters (0=left sideline)\n * @param meterY Court y in meters (0=near baseline)\n * @returns 3D scene coordinates { x, z } (y is height)\n */\nexport function metersTo3D(meterX: number, meterY: number): { x: number; z: number } {\n  return {\n    x: meterX - COURT_WIDTH / 2,  // Center at 0\n    z: meterY - COURT_LENGTH / 2, // Center at 0\n  };\n}\n\n/**\n * Convert normalized coordinates directly to 3D scene coordinates.\n *\n * @param normX Normalized x (0-1)\n * @param normY Normalized y (0-1)\n * @returns 3D scene coordinates { x, z }\n */\nexport function normalizedTo3D(normX: number, normY: number): { x: number; z: number } {\n  const meters = normalizedToMeters(normX, normY);\n  return metersTo3D(meters.x, meters.y);\n}\n\n/**\n * Calculate proper scale to fit court in viewport while maintaining aspect ratio.\n *\n * @param viewportWidth Available width in pixels\n * @param viewportHeight Available height in pixels\n * @param padding Padding in pixels on each side\n * @returns Scale factor (pixels per meter) and offsets\n */\nexport function calculateCourtScale(\n  viewportWidth: number,\n  viewportHeight: number,\n  padding: number = 40\n): {\n  scale: number;\n  offsetX: number;\n  offsetY: number;\n  courtPixelWidth: number;\n  courtPixelHeight: number;\n} {\n  const availableWidth = viewportWidth - 2 * padding;\n  const availableHeight = viewportHeight - 2 * padding;\n\n  // Calculate scale to fit court while maintaining aspect ratio\n  const scaleX = availableWidth / COURT_WIDTH;\n  const scaleY = availableHeight / COURT_LENGTH;\n  const scale = Math.min(scaleX, scaleY);\n\n  // Calculate actual court dimensions in pixels\n  const courtPixelWidth = COURT_WIDTH * scale;\n  const courtPixelHeight = COURT_LENGTH * scale;\n\n  // Center the court in the viewport\n  const offsetX = padding + (availableWidth - courtPixelWidth) / 2;\n  const offsetY = padding + (availableHeight - courtPixelHeight) / 2;\n\n  return {\n    scale,\n    offsetX,\n    offsetY,\n    courtPixelWidth,\n    courtPixelHeight,\n  };\n}\n\n/**\n * Convert court meters to canvas pixels for 2D rendering.\n *\n * @param meterX Court x in meters\n * @param meterY Court y in meters\n * @param scale Pixels per meter\n * @param offsetX X offset in pixels\n * @param offsetY Y offset in pixels\n * @returns Canvas pixel coordinates\n */\nexport function metersToCanvas(\n  meterX: number,\n  meterY: number,\n  scale: number,\n  offsetX: number,\n  offsetY: number\n): { x: number; y: number } {\n  return {\n    x: offsetX + meterX * scale,\n    // Canvas Y is inverted (0 at top), court Y has 0 at near baseline\n    // So far baseline (y=13.4m) should be at top of canvas\n    y: offsetY + (COURT_LENGTH - meterY) * scale,\n  };\n}\n\n/**\n * Convert normalized coordinates to canvas pixels.\n */\nexport function normalizedToCanvas(\n  normX: number,\n  normY: number,\n  scale: number,\n  offsetX: number,\n  offsetY: number\n): { x: number; y: number } {\n  const meters = normalizedToMeters(normX, normY);\n  return metersToCanvas(meters.x, meters.y, scale, offsetX, offsetY);\n}\n","structuredPatch":[],"originalFile":null},"sourceToolAssistantUUID":"63d1cdbc-da68-40fd-b599-70348776533a"}
{"parentUuid":"fa08047e-be13-4f5b-8e40-1b766066f56a","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01PkTG9PNjyMKiXdbnQcE8Mo","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now let me update the todo list and proceed to update the 2D canvas rendering in the strategy page.","signature":"EosCCkYICxgCKkAUQuexb0JgJMmOQl6aVmUE5uJRU8o6a+DQSlGXPttmAEhw+Yf1GbasrTi4lakgJg+nQmctmvrLHASojJqJMFelEgzJ3PVvGdvCxadTRVcaDGEFAzK9qAmcWOU0piIwUvq7U68dsTF/s0EuLEzaYxqT9Aud5CU6TTiR3wRgSO7iDkWspZKepJGg+HtFERcAKnOZ8+UGCDX16+TDWyqNV2U1OkCfSh70xjff+iROJnLyO1ja6ZUhv75I04S+FL+OHnGNp4OUbBJQ43i47McX/GXn6QM+Cqwdv3rdG+HGssndWo75LrmpRs2BFRnKOlurrnnF+44cRLHLeuv0B9Vb7A9wQ1nNGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":43955,"cache_read_input_tokens":13927,"cache_creation":{"ephemeral_5m_input_tokens":43955,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CXT7AoaM49tC6D8aENdcA","type":"assistant","uuid":"cebe171c-2d16-4323-85b0-336d06786547","timestamp":"2026-01-24T23:56:07.808Z"}
{"parentUuid":"cebe171c-2d16-4323-85b0-336d06786547","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01PkTG9PNjyMKiXdbnQcE8Mo","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Ak1YmZVirwsjUaKQyY3QUR","name":"TodoWrite","input":{"todos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"in_progress","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":43955,"cache_read_input_tokens":13927,"cache_creation":{"ephemeral_5m_input_tokens":43955,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CXT7AoaM49tC6D8aENdcA","type":"assistant","uuid":"42c94c85-d1fd-4842-8b7c-755483629786","timestamp":"2026-01-24T23:56:09.130Z"}
{"parentUuid":"42c94c85-d1fd-4842-8b7c-755483629786","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Ak1YmZVirwsjUaKQyY3QUR","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"37f2b9b9-4fdb-4791-bcaf-eec7a07a90f3","timestamp":"2026-01-24T23:56:09.193Z","toolUseResult":{"oldTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"in_progress","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}],"newTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"in_progress","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}]},"sourceToolAssistantUUID":"42c94c85-d1fd-4842-8b7c-755483629786"}
{"parentUuid":"37f2b9b9-4fdb-4791-bcaf-eec7a07a90f3","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_016MBB1yt9W8xLm8Yviin6m3","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now let me update the 2D canvas rendering in the strategy page. I need to:\n\n1. Import the court spec module\n2. Update the canvas dimensions to use proper aspect ratio\n3. Draw all correct badminton court lines using the spec\n4. Update trajectory point mapping to use the new coordinate conversion\n\nLooking at the current code (lines 806-933), the key changes are:\n- Calculate scale to maintain aspect ratio\n- Draw outer boundary (doubles)\n- Draw singles sidelines\n- Draw net line\n- Draw short service lines\n- Draw doubles long service lines\n- Draw center line only in the service box areas\n- Update trajectory rendering to use the new coordinate system","signature":"EqoGCkYICxgCKkD634P7yR9MuM2L7f6aHWiEjB/+brLbju4oL+HyFEPEyJXFrmOJ0wpfPyonc60DbA5EJHPLeTUovGqW5hRvdmPOEgzFfW6zRK7rqtcF3V0aDJKANzv58f0B6GpiXyIw45sqSDbGV5ZrzUF5+2ytuighcQdTrNReobclK1mHGzO5RZAlqZVY+N2OW0gKnlnqKpEFbeMdorqWcqc6NGB9+V/4dNtr8AjbJT8aCwHXuJysvZ/hDx2g4TIsSgoJBAH47vFGeisFKg7iWS4BXzQuja7ZJz/Sl05oI/P0l2pJk717dhQWAQL47K6SfQA6fonT+O20JMZoaf9gZUM0LmRYpFnHigLTJhnQE+cOTgTqNFp5FG0jRq+p+/72Rr9RgLuX8EQO4BR99zyQqfs0essljUlpYFOTWSMFkUsil4+uOtS3Q1EDya8Fj8JMrIQImtyW60sXe8WOnf8cXloWt/eaa1k/6JWY3jQxZ754T0i6Pa9m9YPQeT7wuMHF84+IQGTtnKg8s8S9zLI/DBa1zJwmA63iSv9ALeA2N381N71hJGO8Vr1OpZDnUjcOPVEfiH6fNfRD0XAUwXzpm1Y4Ua7SuCSY+5O4OHokDQu/y5L3vNp8d8JKEBYTRBaCPbW4i/0woKqgdSKGfXrdlvM90HANmSAS4yBwphlTQ/pSP76h4k0YdyECPNk/qeq41OGaaQq7FLoLHKRKy0n1HVAau0XK1e91aW7xQdZttJeWKG+4f1e+Yb0l7067jQXKQc9s73VVmcyBE0MKhPRYwxydObm2oJeSbjmi9veWaQZE9Q6EcKXNATEVb40ryh9576ooficbZx+b3tgogboAakLEY8G2Qf2FtSaDWU9JOWB6MdklLtyjNfDWHDrR0h/43tUIs5qUkLJnqyV7rgpnydKy3wVnKFI3l+kK7eGBzCk54eOq+ZT5WC5IWnIuEuIsB3lbyPkbxEx3e1cy6w/h5JjUFBpS2Mga8EJfKQ7HQgXHHIV9HsLN4GKV+buUkrAsq+HVBc/sSd8fZRu4XNCTlmNZGrU1TW1xHDLgY/F+yhXSTMCDMUIl8RBLGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":282,"cache_read_input_tokens":57882,"cache_creation":{"ephemeral_5m_input_tokens":282,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7B8f4VSCByA9ArRjWZ","type":"assistant","uuid":"e3cfb657-0db1-4f25-b2b5-efdec28dc0b1","timestamp":"2026-01-24T23:56:14.794Z"}
{"parentUuid":"e3cfb657-0db1-4f25-b2b5-efdec28dc0b1","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_016MBB1yt9W8xLm8Yviin6m3","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me update the 2D canvas court rendering in the strategy page. I'll modify the `render2D` function to use the correct BWF dimensions."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":282,"cache_read_input_tokens":57882,"cache_creation":{"ephemeral_5m_input_tokens":282,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7B8f4VSCByA9ArRjWZ","type":"assistant","uuid":"89e1a350-512c-488a-b4d3-3523977f565e","timestamp":"2026-01-24T23:56:15.471Z"}
{"parentUuid":"89e1a350-512c-488a-b4d3-3523977f565e","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_016MBB1yt9W8xLm8Yviin6m3","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_012caLEFXfMNZVLSbmsgPnbw","name":"Edit","input":{"replace_all":false,"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","old_string":"import {\n  createPlaybackEngine,\n  PlaybackEngine,\n  updatePlaybackTime,\n  type TimeScale,\n  type ActiveView,\n  type PlaybackEngineRefs,\n} from '@/lib/playback-engine';","new_string":"import {\n  createPlaybackEngine,\n  PlaybackEngine,\n  updatePlaybackTime,\n  type TimeScale,\n  type ActiveView,\n  type PlaybackEngineRefs,\n} from '@/lib/playback-engine';\nimport {\n  COURT_SPEC,\n  calculateCourtScale,\n  metersToCanvas,\n  normalizedToCanvas,\n} from '@/lib/courtSpec';"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":282,"cache_read_input_tokens":57882,"cache_creation":{"ephemeral_5m_input_tokens":282,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7B8f4VSCByA9ArRjWZ","type":"assistant","uuid":"307abf0c-56e1-4454-907e-3e3c0d16c976","timestamp":"2026-01-24T23:56:18.306Z"}
{"type":"file-history-snapshot","messageId":"307abf0c-56e1-4454-907e-3e3c0d16c976","snapshot":{"messageId":"f976949d-fc76-4c77-86e9-3bd6d5ec90b7","trackedFileBackups":{"rallycoach\\src\\lib\\courtSpec.ts":{"backupFileName":null,"version":1,"backupTime":"2026-01-24T23:56:02.737Z"},"rallycoach\\src\\app\\strategy\\page.tsx":{"backupFileName":"b46a24357b6f5579@v1","version":1,"backupTime":"2026-01-24T23:56:19.264Z"}},"timestamp":"2026-01-24T23:44:54.240Z"},"isSnapshotUpdate":true}
{"parentUuid":"307abf0c-56e1-4454-907e-3e3c0d16c976","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_012caLEFXfMNZVLSbmsgPnbw","type":"tool_result","content":"The file c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx has been updated successfully."}]},"uuid":"106cc7ca-37b3-422d-b8f4-00442541a2c6","timestamp":"2026-01-24T23:56:19.278Z","toolUseResult":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","oldString":"import {\n  createPlaybackEngine,\n  PlaybackEngine,\n  updatePlaybackTime,\n  type TimeScale,\n  type ActiveView,\n  type PlaybackEngineRefs,\n} from '@/lib/playback-engine';","newString":"import {\n  createPlaybackEngine,\n  PlaybackEngine,\n  updatePlaybackTime,\n  type TimeScale,\n  type ActiveView,\n  type PlaybackEngineRefs,\n} from '@/lib/playback-engine';\nimport {\n  COURT_SPEC,\n  calculateCourtScale,\n  metersToCanvas,\n  normalizedToCanvas,\n} from '@/lib/courtSpec';","originalFile":"'use client';\n\nimport { useState, useEffect, useRef, Suspense, lazy, useCallback, useMemo } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport DashboardNav from '@/components/DashboardNav';\nimport { supabase, uploadVideo, getVideoUrl } from '@/lib/supabase';\nimport type { Session, TrajectoryPoint, StrategyResult } from '@/lib/types';\nimport {\n  createPlaybackEngine,\n  PlaybackEngine,\n  updatePlaybackTime,\n  type TimeScale,\n  type ActiveView,\n  type PlaybackEngineRefs,\n} from '@/lib/playback-engine';\n\n// PHASE 4: Lazy load 3D component to avoid SSR issues\nconst CourtTrajectory3D = lazy(() => import('@/components/CourtTrajectory3D'));\n\n// ============================================\n// Strategy Mode Page\n// ============================================\n\ntype StrategyStep = 'select' | 'confirm' | 'processing' | 'results';\n\ninterface HistorySession extends Session {\n  thumbnail_url?: string;\n}\n\n// Strategy Recommendation types\ninterface StrategyRecommendation {\n  id: string;\n  name: string;\n  reason: string;\n  confidence: number;\n  jumpToVideoTimeSec?: number;\n  trajectory2D: TrajectoryPoint[];\n  trajectory3D?: TrajectoryPoint[];\n}\n\nfunction StrategyContent() {\n  const searchParams = useSearchParams();\n  const sessionIdParam = searchParams.get('session');\n\n  // Step state\n  const [step, setStep] = useState<StrategyStep>('select');\n  const [selectedSource, setSelectedSource] = useState<'upload' | 'history' | null>(null);\n\n  // Video/session state\n  const [videoFile, setVideoFile] = useState<File | null>(null);\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  const [sessionId, setSessionId] = useState<string | null>(sessionIdParam);\n  const [selectedHistorySession, setSelectedHistorySession] = useState<HistorySession | null>(null);\n\n  // History drawer\n  const [showHistoryDrawer, setShowHistoryDrawer] = useState(false);\n  const [historySessions, setHistorySessions] = useState<HistorySession[]>([]);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n\n  // Processing state\n  const [processing, setProcessing] = useState(false);\n  const [processProgress, setProcessProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n\n  // Results state\n  const [strategyResult, setStrategyResult] = useState<StrategyResult | null>(null);\n  const [recommendations, setRecommendations] = useState<StrategyRecommendation[]>([]);\n  const [selectedRecommendation, setSelectedRecommendation] = useState<StrategyRecommendation | null>(null);\n  const [coachingPoints, setCoachingPoints] = useState<string[]>([]);\n\n  // Refs\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  // Load from session param\n  useEffect(() => {\n    if (sessionIdParam) {\n      loadSessionFromHistory(sessionIdParam);\n    }\n  }, [sessionIdParam]);\n\n  // Load history sessions\n  const loadHistorySessions = async () => {\n    setLoadingHistory(true);\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*')\n        .eq('user_id', user.id)\n        .in('type', ['analytics', 'practice'])\n        .not('video_url', 'is', null)\n        .order('created_at', { ascending: false })\n        .limit(50);\n\n      if (error) throw error;\n      setHistorySessions(data || []);\n    } catch (err) {\n      console.error('Error loading history:', err);\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n\n  // Load session from history\n  const loadSessionFromHistory = async (id: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) throw error;\n\n      setSelectedHistorySession(data);\n      setSessionId(data.id);\n      setVideoUrl(data.video_url);\n      setSelectedSource('history');\n      setStep('confirm');\n    } catch (err) {\n      console.error('Error loading session:', err);\n      setError('Failed to load session');\n    }\n  };\n\n  // Handle file upload\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    if (!file.type.startsWith('video/')) {\n      setError('Please select a video file');\n      return;\n    }\n\n    // Max file size 100MB (TUS resumable upload handles large files)\n    if (file.size > 100 * 1024 * 1024) {\n      setError('File size must be less than 100MB. Please compress your video before uploading.');\n      return;\n    }\n\n    setError(null);\n    setVideoFile(file);\n    setVideoUrl(URL.createObjectURL(file));\n    setSelectedSource('upload');\n    setStep('confirm');\n  };\n\n  // Handle history selection\n  const handleHistorySelect = (session: HistorySession) => {\n    setSelectedHistorySession(session);\n    setSessionId(session.id);\n    setVideoUrl(session.video_url || null);\n    setSelectedSource('history');\n    setShowHistoryDrawer(false);\n    setStep('confirm');\n  };\n\n  // Handle confirmation: No\n  const handleConfirmNo = () => {\n    setVideoFile(null);\n    setVideoUrl(null);\n    setSessionId(null);\n    setSelectedHistorySession(null);\n    setSelectedSource(null);\n    setStep('select');\n    setError(null);\n    setRecommendations([]);\n    setSelectedRecommendation(null);\n  };\n\n  // Handle confirmation: Yes\n  const handleConfirmYes = async () => {\n    setStep('processing');\n    setProcessing(true);\n    setProcessProgress(0);\n    setError(null);\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated. Please log in again.');\n\n      // If new upload, create session and upload video\n      let currentSessionId = sessionId;\n      let uploadedVideoUrl = videoUrl;\n\n      if (selectedSource === 'upload' && videoFile) {\n        // Upload video with progress tracking\n        // This is critical - do NOT create session if upload fails\n        setProcessProgress(5);\n\n        let videoPath: string | null = null;\n        try {\n          videoPath = await uploadVideo(videoFile, user.id, (progress) => {\n            // Upload progress: 5-25%\n            setProcessProgress(5 + Math.round(progress * 0.2));\n          });\n\n          if (!videoPath) {\n            throw new Error('Upload returned empty path');\n          }\n\n          // Get public URL\n          uploadedVideoUrl = getVideoUrl(videoPath);\n          console.log('Strategy video uploaded:', videoPath);\n\n        } catch (uploadError) {\n          console.error('Strategy video upload failed:', uploadError);\n          const uploadErrorMsg = uploadError instanceof Error\n            ? uploadError.message\n            : 'Failed to upload video. Please try again.';\n          throw new Error(uploadErrorMsg);\n        }\n\n        // Create session only AFTER successful upload\n        setProcessProgress(25);\n        const { data: session, error: sessionError } = await supabase\n          .from('sessions')\n          .insert({\n            user_id: user.id,\n            type: 'strategy',\n            video_path: videoPath,\n            video_url: uploadedVideoUrl,\n            filename: videoFile.name,\n            status: 'processing',\n          })\n          .select()\n          .single();\n\n        if (sessionError) {\n          console.error('Session creation error:', sessionError);\n          throw new Error('Failed to create analysis session');\n        }\n\n        currentSessionId = session.id;\n        setSessionId(session.id);\n      } else if (sessionId) {\n        // Update existing session type to strategy\n        await supabase\n          .from('sessions')\n          .update({ status: 'processing' })\n          .eq('id', sessionId);\n      }\n\n      if (!currentSessionId) throw new Error('No session ID');\n\n      // Generate strategy analysis\n      setProcessProgress(30);\n      const result = await generateStrategyAnalysis(currentSessionId);\n      setProcessProgress(100);\n\n      setStrategyResult(result);\n      setCoachingPoints(result.coaching_points || []);\n\n      // Generate recommendations from the strategy result\n      const generatedRecs = generateRecommendations(result);\n      setRecommendations(generatedRecs);\n      if (generatedRecs.length > 0) {\n        setSelectedRecommendation(generatedRecs[0]);\n      }\n\n      // Update session status\n      await supabase\n        .from('sessions')\n        .update({ status: 'ready' })\n        .eq('id', currentSessionId);\n\n      setStep('results');\n    } catch (err) {\n      console.error('Strategy processing error:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Failed to analyze video. Please try again.';\n      setError(errorMessage);\n      setStep('confirm');\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  // Generate strategy recommendations from result\n  const generateRecommendations = (result: StrategyResult): StrategyRecommendation[] => {\n    // Generate multiple recommendation variants\n    const recommendations: StrategyRecommendation[] = [];\n\n    // Recommendation 1: Optimal path (existing refined trajectory)\n    recommendations.push({\n      id: 'optimal-deep',\n      name: 'Deep Clear Strategy',\n      reason: 'Push opponent to the back court with deep clears to create attacking opportunities.',\n      confidence: 92,\n      jumpToVideoTimeSec: 2,\n      trajectory2D: result.refined_trajectory,\n      trajectory3D: result.refined_trajectory,\n    });\n\n    // Recommendation 2: Cross-court variant\n    const crossCourtTrajectory = result.refined_trajectory.map((p, i) => ({\n      ...p,\n      x: i % 2 === 0 ? 0.2 : 0.8, // Alternate sides\n      court_x: i % 2 === 0 ? 0.2 : 0.8,\n    }));\n    recommendations.push({\n      id: 'cross-court',\n      name: 'Cross-Court Attack',\n      reason: 'Use sharp cross-court angles to move opponent laterally and open up straight line kills.',\n      confidence: 87,\n      jumpToVideoTimeSec: 4,\n      trajectory2D: crossCourtTrajectory,\n      trajectory3D: crossCourtTrajectory,\n    });\n\n    // Recommendation 3: Net rush\n    const netRushTrajectory = result.refined_trajectory.map((p, i) => ({\n      ...p,\n      y: i % 2 === 0 ? 0.3 : 0.55, // Closer to net\n      court_y: i % 2 === 0 ? 0.3 : 0.55,\n    }));\n    recommendations.push({\n      id: 'net-rush',\n      name: 'Net Domination',\n      reason: 'Control the front court with tight net shots to force weak lifts and create smash opportunities.',\n      confidence: 78,\n      jumpToVideoTimeSec: 6,\n      trajectory2D: netRushTrajectory,\n      trajectory3D: netRushTrajectory,\n    });\n\n    return recommendations;\n  };\n\n  // Generate strategy analysis (mock implementation)\n  const generateStrategyAnalysis = async (sessionId: string): Promise<StrategyResult> => {\n    // Simulate processing time\n    for (let i = 30; i <= 90; i += 10) {\n      await new Promise((resolve) => setTimeout(resolve, 500));\n      setProcessProgress(i);\n    }\n\n    // Generate mock trajectory data\n    const originalTrajectory: TrajectoryPoint[] = [];\n    const refinedTrajectory: TrajectoryPoint[] = [];\n\n    // Generate a rally pattern\n    const rallyPoints = 8;\n    for (let i = 0; i < rallyPoints; i++) {\n      const t = i / rallyPoints;\n      const isEven = i % 2 === 0;\n\n      // Original trajectory (player's actual shots)\n      originalTrajectory.push({\n        x: 0.3 + Math.random() * 0.4,\n        y: isEven ? 0.15 + Math.random() * 0.2 : 0.65 + Math.random() * 0.2,\n        timestamp: i * 2,\n        court_x: 0.3 + Math.random() * 0.4,\n        court_y: isEven ? 0.2 : 0.8,\n      });\n\n      // Refined trajectory (optimal shots)\n      refinedTrajectory.push({\n        x: isEven ? 0.7 : 0.3, // More decisive placement\n        y: isEven ? 0.1 : 0.9, // Deeper shots\n        timestamp: i * 2,\n        court_x: isEven ? 0.7 : 0.3,\n        court_y: isEven ? 0.1 : 0.9,\n      });\n    }\n\n    // Generate coaching points\n    const coachingPointsOptions = [\n      'Your shots tend to land mid-court. Push for deeper clears to the back tramlines.',\n      'Good variation in cross-court angles. Consider adding more straight drops to surprise opponents.',\n      'Rally patterns show predictable sequences. Mix up the pace with sudden smashes.',\n      'Effective use of the net area. Maintain the pressure with quicker net exchanges.',\n      'Recovery positioning is slightly late. Focus on split-step timing after each shot.',\n      'Strong defensive clears under pressure. Work on transitioning to attack faster.',\n      'Shot selection in the forecourt is excellent. Add deceptive flicks to your arsenal.',\n      'Backhand shots are going wide. Adjust your grip and follow-through angle.',\n    ];\n\n    const selectedPoints = coachingPointsOptions\n      .sort(() => Math.random() - 0.5)\n      .slice(0, 5 + Math.floor(Math.random() * 2));\n\n    // Save to database\n    const result: StrategyResult = {\n      id: crypto.randomUUID(),\n      session_id: sessionId,\n      original_trajectory: originalTrajectory,\n      refined_trajectory: refinedTrajectory,\n      coaching_points: selectedPoints,\n      created_at: new Date().toISOString(),\n    };\n\n    await supabase.from('strategy_results').insert(result);\n\n    return result;\n  };\n\n  // Format date\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">Strategy Analysis</h1>\n            <p className=\"text-gray-600 mt-1\">\n              Analyze your rally patterns and get AI-powered tactical insights\n            </p>\n          </div>\n\n          {/* Error display */}\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n              {error}\n              <button\n                onClick={() => setError(null)}\n                className=\"ml-4 text-red-500 hover:text-red-700\"\n              >\n                Dismiss\n              </button>\n            </div>\n          )}\n\n          {/* Step: Select Source */}\n          {step === 'select' && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Upload New */}\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n              >\n                <div className=\"w-16 h-16 bg-primary-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-primary-200 transition\">\n                  <svg className=\"w-8 h-8 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Upload Video</h3>\n                <p className=\"text-gray-500\">\n                  Upload a new match or rally video for strategy analysis\n                </p>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n              </button>\n\n              {/* Choose from History */}\n              <button\n                onClick={() => {\n                  loadHistorySessions();\n                  setShowHistoryDrawer(true);\n                }}\n                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n              >\n                <div className=\"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-200 transition\">\n                  <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Choose from History</h3>\n                <p className=\"text-gray-500\">\n                  Select a previously analyzed video from your session history\n                </p>\n              </button>\n            </div>\n          )}\n\n          {/* Step: Confirm Video */}\n          {step === 'confirm' && videoUrl && (\n            <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n              {/* Video preview */}\n              <div className=\"bg-gray-900 aspect-video relative\">\n                <video\n                  ref={videoRef}\n                  src={videoUrl}\n                  className=\"w-full h-full object-contain\"\n                  controls\n                />\n              </div>\n\n              {/* Confirmation prompt */}\n              <div className=\"p-6 border-t border-gray-200\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n                      Is this the correct video?\n                    </h3>\n                    <p className=\"text-gray-500 text-sm\">\n                      {selectedSource === 'upload' && videoFile\n                        ? videoFile.name\n                        : selectedHistorySession?.filename || 'Selected video'}\n                      {selectedHistorySession && (\n                        <span className=\"ml-2 text-gray-400\">\n                          from {formatDate(selectedHistorySession.created_at)}\n                        </span>\n                      )}\n                    </p>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <button\n                      onClick={handleConfirmNo}\n                      className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n                    >\n                      No, go back\n                    </button>\n                    <button\n                      onClick={handleConfirmYes}\n                      className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n                    >\n                      Yes, analyze\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step: Processing */}\n          {step === 'processing' && (\n            <div className=\"bg-white rounded-xl p-12 shadow-sm text-center\">\n              <div className=\"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <svg className=\"w-10 h-10 text-primary-500 animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                Analyzing Your Strategy...\n              </h3>\n              <p className=\"text-gray-500 mb-6\">\n                Tracking shuttle trajectories and generating tactical insights\n              </p>\n              <div className=\"w-64 mx-auto bg-gray-200 rounded-full h-2 mb-2\">\n                <div\n                  className=\"bg-primary-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${processProgress}%` }}\n                />\n              </div>\n              <p className=\"text-sm text-gray-500\">{processProgress}% complete</p>\n            </div>\n          )}\n\n          {/* Step: Results */}\n          {step === 'results' && strategyResult && (\n            <div className=\"space-y-6\">\n              {/* Court Animation */}\n              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200\">\n                  <h3 className=\"font-semibold text-gray-900\">Rally Trajectory Analysis</h3>\n                  <p className=\"text-sm text-gray-500\">Original shots vs. optimal placement</p>\n                </div>\n                <div className=\"p-6\">\n                  <CourtTrajectoryAnimation\n                    originalTrajectory={strategyResult.original_trajectory}\n                    refinedTrajectory={selectedRecommendation?.trajectory2D || strategyResult.refined_trajectory}\n                  />\n                </div>\n              </div>\n\n              {/* Strategy Recommendations */}\n              {recommendations.length > 0 && (\n                <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                  <div className=\"p-4 border-b border-gray-200\">\n                    <h3 className=\"font-semibold text-gray-900\">Recommended Strategies</h3>\n                    <p className=\"text-sm text-gray-500\">Select a strategy to see the optimal trajectory</p>\n                  </div>\n                  <div className=\"p-4 grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    {recommendations.map((rec) => (\n                      <button\n                        key={rec.id}\n                        onClick={() => setSelectedRecommendation(rec)}\n                        className={`p-4 rounded-lg border-2 text-left transition ${\n                          selectedRecommendation?.id === rec.id\n                            ? 'border-green-500 bg-green-50'\n                            : 'border-gray-200 hover:border-gray-300'\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-medium text-gray-900\">{rec.name}</h4>\n                          <span className={`text-sm font-bold ${\n                            rec.confidence >= 90 ? 'text-green-600' :\n                            rec.confidence >= 80 ? 'text-yellow-600' : 'text-orange-600'\n                          }`}>\n                            {rec.confidence}%\n                          </span>\n                        </div>\n                        <p className=\"text-sm text-gray-600\">{rec.reason}</p>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Coaching Points */}\n              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200\">\n                  <h3 className=\"font-semibold text-gray-900\">Key Tactical Insights</h3>\n                  <p className=\"text-sm text-gray-500\">{coachingPoints.length} points to improve your game</p>\n                </div>\n                <div className=\"p-6\">\n                  <ul className=\"space-y-4\">\n                    {coachingPoints.map((point, index) => (\n                      <li key={index} className=\"flex items-start gap-3\">\n                        <span className=\"w-6 h-6 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium\">\n                          {index + 1}\n                        </span>\n                        <p className=\"text-gray-700\">{point}</p>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex justify-between\">\n                <button\n                  onClick={handleConfirmNo}\n                  className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n                >\n                  Analyze Another Video\n                </button>\n                <Link\n                  href=\"/history\"\n                  className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n                >\n                  View All Sessions\n                </Link>\n              </div>\n            </div>\n          )}\n\n          {/* History Drawer */}\n          {showHistoryDrawer && (\n            <div className=\"fixed inset-0 z-50\">\n              <div\n                className=\"absolute inset-0 bg-black/50\"\n                onClick={() => setShowHistoryDrawer(false)}\n              />\n              <div className=\"absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl\">\n                <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n                  <h3 className=\"font-semibold text-gray-900\">Select from History</h3>\n                  <button\n                    onClick={() => setShowHistoryDrawer(false)}\n                    className=\"p-2 hover:bg-gray-100 rounded-lg\"\n                  >\n                    <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n                <div className=\"overflow-y-auto h-[calc(100vh-72px)]\">\n                  {loadingHistory ? (\n                    <div className=\"p-8 text-center\">\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4\" />\n                      <p className=\"text-gray-500\">Loading sessions...</p>\n                    </div>\n                  ) : historySessions.length === 0 ? (\n                    <div className=\"p-8 text-center\">\n                      <p className=\"text-gray-500\">No sessions with video found.</p>\n                    </div>\n                  ) : (\n                    <div className=\"p-4 space-y-3\">\n                      {historySessions.map((session) => (\n                        <button\n                          key={session.id}\n                          onClick={() => handleHistorySelect(session)}\n                          className=\"w-full p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition text-left\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-16 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0\">\n                              {session.video_url ? (\n                                <video\n                                  src={session.video_url}\n                                  className=\"w-full h-full object-cover\"\n                                  muted\n                                />\n                              ) : (\n                                <div className=\"w-full h-full flex items-center justify-center\">\n                                  <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                                  </svg>\n                                </div>\n                              )}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <p className=\"font-medium text-gray-900 truncate\">\n                                {session.filename || 'Untitled Session'}\n                              </p>\n                              <p className=\"text-sm text-gray-500\">\n                                {formatDate(session.created_at)}\n                              </p>\n                            </div>\n                            <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                            </svg>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// ============================================\n// Court Trajectory Animation Component\n// Uses PlaybackEngine for proper lifecycle management\n// ============================================\n\ninterface CourtTrajectoryAnimationProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n}\n\n// Speed options\nconst SPEED_OPTIONS: { value: TimeScale; label: string }[] = [\n  { value: 0.25, label: '0.25x' },\n  { value: 0.5, label: '0.5x' },\n  { value: 1, label: '1x' },\n  { value: 2, label: '2x' },\n];\n\nfunction CourtTrajectoryAnimation({\n  originalTrajectory,\n  refinedTrajectory,\n}: CourtTrajectoryAnimationProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // UI state (for display only)\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [showOriginal, setShowOriginal] = useState(true);\n  const [showRefined, setShowRefined] = useState(true);\n  const [speed, setSpeed] = useState<TimeScale>(1);\n  const [activeView, setActiveView] = useState<ActiveView>('2d');\n  const [progress, setProgress] = useState(0);\n\n  // Playback engine refs - these are the source of truth for animation state\n  const engineRef = useRef<PlaybackEngineRefs>(createPlaybackEngine());\n  const animationRef = useRef<number | null>(null);\n  const mountedRef = useRef(true);\n\n  // Keep refs for callbacks to avoid stale closures\n  const showOriginalRef = useRef(showOriginal);\n  const showRefinedRef = useRef(showRefined);\n  const originalTrajectoryRef = useRef(originalTrajectory);\n  const refinedTrajectoryRef = useRef(refinedTrajectory);\n\n  // Sync refs with state\n  useEffect(() => {\n    showOriginalRef.current = showOriginal;\n  }, [showOriginal]);\n\n  useEffect(() => {\n    showRefinedRef.current = showRefined;\n  }, [showRefined]);\n\n  useEffect(() => {\n    originalTrajectoryRef.current = originalTrajectory;\n  }, [originalTrajectory]);\n\n  useEffect(() => {\n    refinedTrajectoryRef.current = refinedTrajectory;\n  }, [refinedTrajectory]);\n\n  // Initialize engine on mount\n  useEffect(() => {\n    mountedRef.current = true;\n    const engine = engineRef.current;\n    engine.playingRef.current = true;\n    engine.timeScaleRef.current = 1;\n    engine.tRef.current = 0;\n    engine.activeViewRef.current = '2d';\n\n    return () => {\n      mountedRef.current = false;\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n    };\n  }, []);\n\n  // 2D Canvas rendering loop\n  const render2D = useCallback((timestamp: number) => {\n    if (!mountedRef.current) return;\n\n    const engine = engineRef.current;\n    const canvas = canvasRef.current;\n\n    // Only render if 2D view is active\n    if (engine.activeViewRef.current !== '2d' || !canvas) {\n      // Continue loop but skip render\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    // Update time using playback engine\n    const t = updatePlaybackTime(engine, timestamp);\n\n    // Update progress state for UI (throttled)\n    setProgress(t);\n\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Court dimensions (scaled)\n    const courtMargin = 40;\n    const courtWidth = width - courtMargin * 2;\n    const courtHeight = height - courtMargin * 2;\n\n    // Clear\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // Outer boundary\n    ctx.strokeRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Center line\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, height / 2);\n    ctx.lineTo(width - courtMargin, height / 2);\n    ctx.stroke();\n\n    // Service lines\n    const serviceLineY1 = courtMargin + courtHeight * 0.22;\n    const serviceLineY2 = courtMargin + courtHeight * 0.78;\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, serviceLineY1);\n    ctx.lineTo(width - courtMargin, serviceLineY1);\n    ctx.moveTo(courtMargin, serviceLineY2);\n    ctx.lineTo(width - courtMargin, serviceLineY2);\n    ctx.stroke();\n\n    // Center service line\n    ctx.beginPath();\n    ctx.moveTo(width / 2, serviceLineY1);\n    ctx.lineTo(width / 2, serviceLineY2);\n    ctx.stroke();\n\n    // Draw trajectory helper\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(x, y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };\n\n    // Draw trajectories using refs\n    if (showOriginalRef.current && originalTrajectoryRef.current.length > 0) {\n      drawTrajectory(originalTrajectoryRef.current, '#ef4444', t);\n    }\n\n    if (showRefinedRef.current && refinedTrajectoryRef.current.length > 0) {\n      drawTrajectory(refinedTrajectoryRef.current, '#22c55e', t);\n    }\n\n    // Continue animation loop\n    animationRef.current = requestAnimationFrame(render2D);\n  }, []);\n\n  // Start/stop animation loop based on active view\n  useEffect(() => {\n    const engine = engineRef.current;\n    engine.activeViewRef.current = activeView;\n    engine.lastTimestampRef.current = 0; // Reset timestamp to avoid big delta\n\n    // Always run the 2D loop for state management, it will skip rendering if 3D is active\n    if (activeView === '2d' && !animationRef.current) {\n      animationRef.current = requestAnimationFrame(render2D);\n    }\n\n    return () => {\n      // Don't cancel on view switch, let it continue\n    };\n  }, [activeView, render2D]);\n\n  // Start initial animation\n  useEffect(() => {\n    if (!animationRef.current) {\n      animationRef.current = requestAnimationFrame(render2D);\n    }\n  }, [render2D]);\n\n  // Handle play/pause toggle - update both state and ref\n  const handlePlayPause = useCallback(() => {\n    const engine = engineRef.current;\n    const newPlaying = PlaybackEngine.toggle(engine);\n    setIsPlaying(newPlaying);\n    // Reset timestamp to avoid big jumps when resuming\n    engine.lastTimestampRef.current = 0;\n  }, []);\n\n  // Handle speed change - update both state and ref\n  const handleSpeedChange = useCallback((newSpeed: TimeScale) => {\n    const engine = engineRef.current;\n    PlaybackEngine.setSpeed(engine, newSpeed);\n    setSpeed(newSpeed);\n  }, []);\n\n  // Handle view change\n  const handleViewChange = useCallback((view: ActiveView) => {\n    const engine = engineRef.current;\n    PlaybackEngine.setActiveView(engine, view);\n    setActiveView(view);\n  }, []);\n\n  // Step controls\n  const stepForward = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.step(engine, 0.05);\n    setProgress(engine.tRef.current);\n  }, []);\n\n  const stepBackward = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.step(engine, -0.05);\n    setProgress(engine.tRef.current);\n  }, []);\n\n  const resetAnimation = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.reset(engine);\n    setProgress(0);\n  }, []);\n\n  return (\n    <div>\n      {/* 2D/3D Toggle */}\n      <div className=\"flex justify-center mb-4\">\n        <div className=\"inline-flex rounded-lg border border-gray-200 p-1 bg-gray-50\">\n          <button\n            onClick={() => handleViewChange('2d')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n              activeView === '2d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            2D View\n          </button>\n          <button\n            onClick={() => handleViewChange('3d')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n              activeView === '3d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            3D View\n          </button>\n        </div>\n      </div>\n\n      {/* Conditional 2D/3D rendering - keep both mounted but hide inactive */}\n      <div className={activeView === '2d' ? 'block' : 'hidden'}>\n        <canvas\n          ref={canvasRef}\n          width={500}\n          height={700}\n          className=\"w-full max-w-md mx-auto rounded-lg\"\n        />\n      </div>\n\n      {activeView === '3d' && (\n        <Suspense fallback={\n          <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n            <div className=\"text-white\">Loading 3D view...</div>\n          </div>\n        }>\n          <CourtTrajectory3D\n            originalTrajectory={originalTrajectory}\n            refinedTrajectory={refinedTrajectory}\n            showOriginal={showOriginal}\n            showRefined={showRefined}\n            animationProgress={progress}\n            isPlaying={isPlaying}\n            timeScale={speed}\n          />\n        </Suspense>\n      )}\n\n      {/* Enhanced Controls */}\n      <div className=\"mt-4 space-y-3\">\n        {/* Play/Pause and Step Controls */}\n        <div className=\"flex flex-wrap items-center justify-center gap-2\">\n          <button\n            onClick={stepBackward}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Step backward\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={handlePlayPause}\n            className=\"px-4 py-2 bg-primary-500 text-white hover:bg-primary-600 rounded-lg font-medium text-sm flex items-center gap-2\"\n          >\n            {isPlaying ? (\n              <>\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\" />\n                </svg>\n                Pause\n              </>\n            ) : (\n              <>\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M8 5v14l11-7z\" />\n                </svg>\n                Play\n              </>\n            )}\n          </button>\n\n          <button\n            onClick={stepForward}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Step forward\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M6 18l8.5-6L6 6v12zm2 0V6l6.5 6L8 18zm8-12h2v12h-2V6z\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={resetAnimation}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Reset\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Speed Control */}\n        <div className=\"flex items-center justify-center gap-2\">\n          <span className=\"text-sm text-gray-500\">Speed:</span>\n          <div className=\"inline-flex rounded-lg border border-gray-200 p-0.5 bg-gray-50\">\n            {SPEED_OPTIONS.map((option) => (\n              <button\n                key={option.value}\n                onClick={() => handleSpeedChange(option.value)}\n                className={`px-3 py-1 rounded-md text-xs font-medium transition ${\n                  speed === option.value\n                    ? 'bg-white shadow text-gray-900'\n                    : 'text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"flex items-center gap-2 px-4\">\n          <span className=\"text-xs text-gray-500\">{Math.round(progress * 100)}%</span>\n          <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-primary-500 transition-all duration-100\"\n              style={{ width: `${progress * 100}%` }}\n            />\n          </div>\n        </div>\n\n        {/* Trajectory toggles */}\n        <div className=\"flex items-center justify-center gap-4\">\n          <label className=\"flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={showOriginal}\n              onChange={(e) => setShowOriginal(e.target.checked)}\n              className=\"rounded\"\n            />\n            <span className=\"flex items-center gap-1\">\n              <span className=\"w-3 h-3 bg-red-500 rounded-full\" />\n              Original\n            </span>\n          </label>\n\n          <label className=\"flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={showRefined}\n              onChange={(e) => setShowRefined(e.target.checked)}\n              className=\"rounded\"\n            />\n            <span className=\"flex items-center gap-1\">\n              <span className=\"w-3 h-3 bg-green-500 rounded-full\" />\n              Optimal\n            </span>\n          </label>\n        </div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n        <p className=\"text-sm text-gray-600\">\n          <span className=\"text-red-500 font-medium\">Red trajectory:</span> Your actual shot placements during the rally.\n          <br />\n          <span className=\"text-green-500 font-medium\">Green trajectory:</span> AI-suggested optimal placements for better court coverage.\n          {activeView === '3d' && (\n            <>\n              <br />\n              <span className=\"text-gray-500 text-xs mt-2 block\">\n                Tip: Drag to rotate, scroll to zoom, right-click to pan in 3D view.\n              </span>\n            </>\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Loading Component\n// ============================================\n\nfunction StrategyLoading() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-48 mb-4\" />\n            <div className=\"h-4 bg-gray-200 rounded w-96 mb-8\" />\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// ============================================\n// Export\n// ============================================\n\nexport default function StrategyPage() {\n  return (\n    <Suspense fallback={<StrategyLoading />}>\n      <StrategyContent />\n    </Suspense>\n  );\n}\n","structuredPatch":[{"oldStart":14,"oldLines":6,"newStart":14,"newLines":12,"lines":["   type ActiveView,","   type PlaybackEngineRefs,"," } from '@/lib/playback-engine';","+import {","+  COURT_SPEC,","+  calculateCourtScale,","+  metersToCanvas,","+  normalizedToCanvas,","+} from '@/lib/courtSpec';"," "," // PHASE 4: Lazy load 3D component to avoid SSR issues"," const CourtTrajectory3D = lazy(() => import('@/components/CourtTrajectory3D'));"]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"307abf0c-56e1-4454-907e-3e3c0d16c976"}
{"parentUuid":"106cc7ca-37b3-422d-b8f4-00442541a2c6","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01M2ruYrLJ716YQRyX7nenND","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I need to update the render2D function to draw the correct badminton court. Let me replace the court drawing section.","signature":"EqICCkYICxgCKkBPiRWLJ/cxBkcjTFqBLagJwodMOuLTiIWrFcjxPj9W99oRBUHhPORFkBNhr7j5DxSySV/bFhWcr6KEgh9oG2t9EgyiralwcSp0vJ3+GbwaDL4hbTxVNgigS/31rCIwRkrSUp8cBDKBNuDy+bwXY2fDfYrt80QLI1HZ+3qiMFVffDgApnoFdk4WI4zK87wNKokB+2y9Yg+gY1Ph7HB8bYgqYw010iMizA1NYvjgiukVYTvxtLmRa32uWXItYkFwOoaHrLi3s85sBAm4+cN8zf2NHEto7g/BtRrUU2hpf9zSiV/4MP+AajLfv76P+f9mbRwq6oudG0EZX476W7dvfXUqeIm2QWuO22O/1NrMFMERrEg0B6M5tI+/E8MYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":533,"cache_read_input_tokens":58164,"cache_creation":{"ephemeral_5m_input_tokens":533,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7BxD38fyxEtaLg3ox9","type":"assistant","uuid":"3447d77b-b2d1-4e91-824b-ee7eb23ca88f","timestamp":"2026-01-24T23:56:23.759Z"}
{"parentUuid":"3447d77b-b2d1-4e91-824b-ee7eb23ca88f","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01M2ruYrLJ716YQRyX7nenND","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me replace the court drawing code in the `render2D` function."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":533,"cache_read_input_tokens":58164,"cache_creation":{"ephemeral_5m_input_tokens":533,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7BxD38fyxEtaLg3ox9","type":"assistant","uuid":"fb51b55c-cf08-47dd-a4f0-655e3bc97489","timestamp":"2026-01-24T23:56:24.111Z"}
{"parentUuid":"fb51b55c-cf08-47dd-a4f0-655e3bc97489","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01M2ruYrLJ716YQRyX7nenND","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01AGPMwQzVVZvL3a9978z1vs","name":"Edit","input":{"replace_all":false,"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","old_string":"    const width = canvas.width;\n    const height = canvas.height;\n\n    // Court dimensions (scaled)\n    const courtMargin = 40;\n    const courtWidth = width - courtMargin * 2;\n    const courtHeight = height - courtMargin * 2;\n\n    // Clear\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // Outer boundary\n    ctx.strokeRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Center line\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, height / 2);\n    ctx.lineTo(width - courtMargin, height / 2);\n    ctx.stroke();\n\n    // Service lines\n    const serviceLineY1 = courtMargin + courtHeight * 0.22;\n    const serviceLineY2 = courtMargin + courtHeight * 0.78;\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, serviceLineY1);\n    ctx.lineTo(width - courtMargin, serviceLineY1);\n    ctx.moveTo(courtMargin, serviceLineY2);\n    ctx.lineTo(width - courtMargin, serviceLineY2);\n    ctx.stroke();\n\n    // Center service line\n    ctx.beginPath();\n    ctx.moveTo(width / 2, serviceLineY1);\n    ctx.lineTo(width / 2, serviceLineY2);\n    ctx.stroke();","new_string":"    const width = canvas.width;\n    const height = canvas.height;\n\n    // Calculate court scale to maintain BWF aspect ratio (6.1m x 13.4m)\n    const padding = 40;\n    const { scale, offsetX, offsetY, courtPixelWidth, courtPixelHeight } =\n      calculateCourtScale(width, height, padding);\n\n    // Helper to convert court meters to canvas pixels\n    const toCanvas = (meterX: number, meterY: number) =>\n      metersToCanvas(meterX, meterY, scale, offsetX, offsetY);\n\n    // Clear canvas\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background (doubles court)\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // === Outer boundary (doubles) ===\n    ctx.strokeRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n\n    // === Singles sidelines ===\n    ctx.lineWidth = 1.5;\n    // Left singles sideline\n    const singlesLeftTop = toCanvas(COURT_SPEC.singlesLeftX, COURT_SPEC.length);\n    const singlesLeftBot = toCanvas(COURT_SPEC.singlesLeftX, 0);\n    ctx.beginPath();\n    ctx.moveTo(singlesLeftTop.x, singlesLeftTop.y);\n    ctx.lineTo(singlesLeftBot.x, singlesLeftBot.y);\n    ctx.stroke();\n\n    // Right singles sideline\n    const singlesRightTop = toCanvas(COURT_SPEC.singlesRightX, COURT_SPEC.length);\n    const singlesRightBot = toCanvas(COURT_SPEC.singlesRightX, 0);\n    ctx.beginPath();\n    ctx.moveTo(singlesRightTop.x, singlesRightTop.y);\n    ctx.lineTo(singlesRightBot.x, singlesRightBot.y);\n    ctx.stroke();\n\n    // === Net line (center) ===\n    ctx.lineWidth = 2;\n    const netLeft = toCanvas(0, COURT_SPEC.netY);\n    const netRight = toCanvas(COURT_SPEC.width, COURT_SPEC.netY);\n    ctx.beginPath();\n    ctx.moveTo(netLeft.x, netLeft.y);\n    ctx.lineTo(netRight.x, netRight.y);\n    ctx.stroke();\n\n    // === Short service lines ===\n    ctx.lineWidth = 1.5;\n    // Near short service line (closer to y=0)\n    const nearServiceLeft = toCanvas(0, COURT_SPEC.nearShortServiceY);\n    const nearServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(nearServiceLeft.x, nearServiceLeft.y);\n    ctx.lineTo(nearServiceRight.x, nearServiceRight.y);\n    ctx.stroke();\n\n    // Far short service line (closer to y=13.4)\n    const farServiceLeft = toCanvas(0, COURT_SPEC.farShortServiceY);\n    const farServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(farServiceLeft.x, farServiceLeft.y);\n    ctx.lineTo(farServiceRight.x, farServiceRight.y);\n    ctx.stroke();\n\n    // === Doubles long service lines ===\n    // Near long service line (0.76m from near baseline)\n    const nearLongLeft = toCanvas(0, COURT_SPEC.nearLongServiceY);\n    const nearLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearLongServiceY);\n    ctx.beginPath();\n    ctx.moveTo(nearLongLeft.x, nearLongLeft.y);\n    ctx.lineTo(nearLongRight.x, nearLongRight.y);\n    ctx.stroke();\n\n    // Far long service line (0.76m from far baseline)\n    const farLongLeft = toCanvas(0, COURT_SPEC.farLongServiceY);\n    const farLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farLongServiceY);\n    ctx.beginPath();\n    ctx.moveTo(farLongLeft.x, farLongLeft.y);\n    ctx.lineTo(farLongRight.x, farLongRight.y);\n    ctx.stroke();\n\n    // === Center line (only in service box areas) ===\n    // Near side: from baseline (y=0) to near short service line (y=4.72)\n    const centerNearBot = toCanvas(COURT_SPEC.centerX, 0);\n    const centerNearTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.nearShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(centerNearBot.x, centerNearBot.y);\n    ctx.lineTo(centerNearTop.x, centerNearTop.y);\n    ctx.stroke();\n\n    // Far side: from far short service line (y=8.68) to far baseline (y=13.4)\n    const centerFarBot = toCanvas(COURT_SPEC.centerX, COURT_SPEC.farShortServiceY);\n    const centerFarTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.length);\n    ctx.beginPath();\n    ctx.moveTo(centerFarBot.x, centerFarBot.y);\n    ctx.lineTo(centerFarTop.x, centerFarTop.y);\n    ctx.stroke();"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":533,"cache_read_input_tokens":58164,"cache_creation":{"ephemeral_5m_input_tokens":533,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7BxD38fyxEtaLg3ox9","type":"assistant","uuid":"0fa3c16c-80dd-4fe7-bd33-c48dffe771d2","timestamp":"2026-01-24T23:56:41.864Z"}
{"parentUuid":"0fa3c16c-80dd-4fe7-bd33-c48dffe771d2","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01AGPMwQzVVZvL3a9978z1vs","type":"tool_result","content":"The file c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx has been updated successfully."}]},"uuid":"0e0f274c-6527-45c4-bd48-eb2d04c0c476","timestamp":"2026-01-24T23:56:45.054Z","toolUseResult":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","oldString":"    const width = canvas.width;\n    const height = canvas.height;\n\n    // Court dimensions (scaled)\n    const courtMargin = 40;\n    const courtWidth = width - courtMargin * 2;\n    const courtHeight = height - courtMargin * 2;\n\n    // Clear\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // Outer boundary\n    ctx.strokeRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Center line\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, height / 2);\n    ctx.lineTo(width - courtMargin, height / 2);\n    ctx.stroke();\n\n    // Service lines\n    const serviceLineY1 = courtMargin + courtHeight * 0.22;\n    const serviceLineY2 = courtMargin + courtHeight * 0.78;\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, serviceLineY1);\n    ctx.lineTo(width - courtMargin, serviceLineY1);\n    ctx.moveTo(courtMargin, serviceLineY2);\n    ctx.lineTo(width - courtMargin, serviceLineY2);\n    ctx.stroke();\n\n    // Center service line\n    ctx.beginPath();\n    ctx.moveTo(width / 2, serviceLineY1);\n    ctx.lineTo(width / 2, serviceLineY2);\n    ctx.stroke();","newString":"    const width = canvas.width;\n    const height = canvas.height;\n\n    // Calculate court scale to maintain BWF aspect ratio (6.1m x 13.4m)\n    const padding = 40;\n    const { scale, offsetX, offsetY, courtPixelWidth, courtPixelHeight } =\n      calculateCourtScale(width, height, padding);\n\n    // Helper to convert court meters to canvas pixels\n    const toCanvas = (meterX: number, meterY: number) =>\n      metersToCanvas(meterX, meterY, scale, offsetX, offsetY);\n\n    // Clear canvas\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background (doubles court)\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // === Outer boundary (doubles) ===\n    ctx.strokeRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n\n    // === Singles sidelines ===\n    ctx.lineWidth = 1.5;\n    // Left singles sideline\n    const singlesLeftTop = toCanvas(COURT_SPEC.singlesLeftX, COURT_SPEC.length);\n    const singlesLeftBot = toCanvas(COURT_SPEC.singlesLeftX, 0);\n    ctx.beginPath();\n    ctx.moveTo(singlesLeftTop.x, singlesLeftTop.y);\n    ctx.lineTo(singlesLeftBot.x, singlesLeftBot.y);\n    ctx.stroke();\n\n    // Right singles sideline\n    const singlesRightTop = toCanvas(COURT_SPEC.singlesRightX, COURT_SPEC.length);\n    const singlesRightBot = toCanvas(COURT_SPEC.singlesRightX, 0);\n    ctx.beginPath();\n    ctx.moveTo(singlesRightTop.x, singlesRightTop.y);\n    ctx.lineTo(singlesRightBot.x, singlesRightBot.y);\n    ctx.stroke();\n\n    // === Net line (center) ===\n    ctx.lineWidth = 2;\n    const netLeft = toCanvas(0, COURT_SPEC.netY);\n    const netRight = toCanvas(COURT_SPEC.width, COURT_SPEC.netY);\n    ctx.beginPath();\n    ctx.moveTo(netLeft.x, netLeft.y);\n    ctx.lineTo(netRight.x, netRight.y);\n    ctx.stroke();\n\n    // === Short service lines ===\n    ctx.lineWidth = 1.5;\n    // Near short service line (closer to y=0)\n    const nearServiceLeft = toCanvas(0, COURT_SPEC.nearShortServiceY);\n    const nearServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(nearServiceLeft.x, nearServiceLeft.y);\n    ctx.lineTo(nearServiceRight.x, nearServiceRight.y);\n    ctx.stroke();\n\n    // Far short service line (closer to y=13.4)\n    const farServiceLeft = toCanvas(0, COURT_SPEC.farShortServiceY);\n    const farServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(farServiceLeft.x, farServiceLeft.y);\n    ctx.lineTo(farServiceRight.x, farServiceRight.y);\n    ctx.stroke();\n\n    // === Doubles long service lines ===\n    // Near long service line (0.76m from near baseline)\n    const nearLongLeft = toCanvas(0, COURT_SPEC.nearLongServiceY);\n    const nearLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearLongServiceY);\n    ctx.beginPath();\n    ctx.moveTo(nearLongLeft.x, nearLongLeft.y);\n    ctx.lineTo(nearLongRight.x, nearLongRight.y);\n    ctx.stroke();\n\n    // Far long service line (0.76m from far baseline)\n    const farLongLeft = toCanvas(0, COURT_SPEC.farLongServiceY);\n    const farLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farLongServiceY);\n    ctx.beginPath();\n    ctx.moveTo(farLongLeft.x, farLongLeft.y);\n    ctx.lineTo(farLongRight.x, farLongRight.y);\n    ctx.stroke();\n\n    // === Center line (only in service box areas) ===\n    // Near side: from baseline (y=0) to near short service line (y=4.72)\n    const centerNearBot = toCanvas(COURT_SPEC.centerX, 0);\n    const centerNearTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.nearShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(centerNearBot.x, centerNearBot.y);\n    ctx.lineTo(centerNearTop.x, centerNearTop.y);\n    ctx.stroke();\n\n    // Far side: from far short service line (y=8.68) to far baseline (y=13.4)\n    const centerFarBot = toCanvas(COURT_SPEC.centerX, COURT_SPEC.farShortServiceY);\n    const centerFarTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.length);\n    ctx.beginPath();\n    ctx.moveTo(centerFarBot.x, centerFarBot.y);\n    ctx.lineTo(centerFarTop.x, centerFarTop.y);\n    ctx.stroke();","originalFile":"'use client';\n\nimport { useState, useEffect, useRef, Suspense, lazy, useCallback, useMemo } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport DashboardNav from '@/components/DashboardNav';\nimport { supabase, uploadVideo, getVideoUrl } from '@/lib/supabase';\nimport type { Session, TrajectoryPoint, StrategyResult } from '@/lib/types';\nimport {\n  createPlaybackEngine,\n  PlaybackEngine,\n  updatePlaybackTime,\n  type TimeScale,\n  type ActiveView,\n  type PlaybackEngineRefs,\n} from '@/lib/playback-engine';\nimport {\n  COURT_SPEC,\n  calculateCourtScale,\n  metersToCanvas,\n  normalizedToCanvas,\n} from '@/lib/courtSpec';\n\n// PHASE 4: Lazy load 3D component to avoid SSR issues\nconst CourtTrajectory3D = lazy(() => import('@/components/CourtTrajectory3D'));\n\n// ============================================\n// Strategy Mode Page\n// ============================================\n\ntype StrategyStep = 'select' | 'confirm' | 'processing' | 'results';\n\ninterface HistorySession extends Session {\n  thumbnail_url?: string;\n}\n\n// Strategy Recommendation types\ninterface StrategyRecommendation {\n  id: string;\n  name: string;\n  reason: string;\n  confidence: number;\n  jumpToVideoTimeSec?: number;\n  trajectory2D: TrajectoryPoint[];\n  trajectory3D?: TrajectoryPoint[];\n}\n\nfunction StrategyContent() {\n  const searchParams = useSearchParams();\n  const sessionIdParam = searchParams.get('session');\n\n  // Step state\n  const [step, setStep] = useState<StrategyStep>('select');\n  const [selectedSource, setSelectedSource] = useState<'upload' | 'history' | null>(null);\n\n  // Video/session state\n  const [videoFile, setVideoFile] = useState<File | null>(null);\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  const [sessionId, setSessionId] = useState<string | null>(sessionIdParam);\n  const [selectedHistorySession, setSelectedHistorySession] = useState<HistorySession | null>(null);\n\n  // History drawer\n  const [showHistoryDrawer, setShowHistoryDrawer] = useState(false);\n  const [historySessions, setHistorySessions] = useState<HistorySession[]>([]);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n\n  // Processing state\n  const [processing, setProcessing] = useState(false);\n  const [processProgress, setProcessProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n\n  // Results state\n  const [strategyResult, setStrategyResult] = useState<StrategyResult | null>(null);\n  const [recommendations, setRecommendations] = useState<StrategyRecommendation[]>([]);\n  const [selectedRecommendation, setSelectedRecommendation] = useState<StrategyRecommendation | null>(null);\n  const [coachingPoints, setCoachingPoints] = useState<string[]>([]);\n\n  // Refs\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  // Load from session param\n  useEffect(() => {\n    if (sessionIdParam) {\n      loadSessionFromHistory(sessionIdParam);\n    }\n  }, [sessionIdParam]);\n\n  // Load history sessions\n  const loadHistorySessions = async () => {\n    setLoadingHistory(true);\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*')\n        .eq('user_id', user.id)\n        .in('type', ['analytics', 'practice'])\n        .not('video_url', 'is', null)\n        .order('created_at', { ascending: false })\n        .limit(50);\n\n      if (error) throw error;\n      setHistorySessions(data || []);\n    } catch (err) {\n      console.error('Error loading history:', err);\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n\n  // Load session from history\n  const loadSessionFromHistory = async (id: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) throw error;\n\n      setSelectedHistorySession(data);\n      setSessionId(data.id);\n      setVideoUrl(data.video_url);\n      setSelectedSource('history');\n      setStep('confirm');\n    } catch (err) {\n      console.error('Error loading session:', err);\n      setError('Failed to load session');\n    }\n  };\n\n  // Handle file upload\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    if (!file.type.startsWith('video/')) {\n      setError('Please select a video file');\n      return;\n    }\n\n    // Max file size 100MB (TUS resumable upload handles large files)\n    if (file.size > 100 * 1024 * 1024) {\n      setError('File size must be less than 100MB. Please compress your video before uploading.');\n      return;\n    }\n\n    setError(null);\n    setVideoFile(file);\n    setVideoUrl(URL.createObjectURL(file));\n    setSelectedSource('upload');\n    setStep('confirm');\n  };\n\n  // Handle history selection\n  const handleHistorySelect = (session: HistorySession) => {\n    setSelectedHistorySession(session);\n    setSessionId(session.id);\n    setVideoUrl(session.video_url || null);\n    setSelectedSource('history');\n    setShowHistoryDrawer(false);\n    setStep('confirm');\n  };\n\n  // Handle confirmation: No\n  const handleConfirmNo = () => {\n    setVideoFile(null);\n    setVideoUrl(null);\n    setSessionId(null);\n    setSelectedHistorySession(null);\n    setSelectedSource(null);\n    setStep('select');\n    setError(null);\n    setRecommendations([]);\n    setSelectedRecommendation(null);\n  };\n\n  // Handle confirmation: Yes\n  const handleConfirmYes = async () => {\n    setStep('processing');\n    setProcessing(true);\n    setProcessProgress(0);\n    setError(null);\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated. Please log in again.');\n\n      // If new upload, create session and upload video\n      let currentSessionId = sessionId;\n      let uploadedVideoUrl = videoUrl;\n\n      if (selectedSource === 'upload' && videoFile) {\n        // Upload video with progress tracking\n        // This is critical - do NOT create session if upload fails\n        setProcessProgress(5);\n\n        let videoPath: string | null = null;\n        try {\n          videoPath = await uploadVideo(videoFile, user.id, (progress) => {\n            // Upload progress: 5-25%\n            setProcessProgress(5 + Math.round(progress * 0.2));\n          });\n\n          if (!videoPath) {\n            throw new Error('Upload returned empty path');\n          }\n\n          // Get public URL\n          uploadedVideoUrl = getVideoUrl(videoPath);\n          console.log('Strategy video uploaded:', videoPath);\n\n        } catch (uploadError) {\n          console.error('Strategy video upload failed:', uploadError);\n          const uploadErrorMsg = uploadError instanceof Error\n            ? uploadError.message\n            : 'Failed to upload video. Please try again.';\n          throw new Error(uploadErrorMsg);\n        }\n\n        // Create session only AFTER successful upload\n        setProcessProgress(25);\n        const { data: session, error: sessionError } = await supabase\n          .from('sessions')\n          .insert({\n            user_id: user.id,\n            type: 'strategy',\n            video_path: videoPath,\n            video_url: uploadedVideoUrl,\n            filename: videoFile.name,\n            status: 'processing',\n          })\n          .select()\n          .single();\n\n        if (sessionError) {\n          console.error('Session creation error:', sessionError);\n          throw new Error('Failed to create analysis session');\n        }\n\n        currentSessionId = session.id;\n        setSessionId(session.id);\n      } else if (sessionId) {\n        // Update existing session type to strategy\n        await supabase\n          .from('sessions')\n          .update({ status: 'processing' })\n          .eq('id', sessionId);\n      }\n\n      if (!currentSessionId) throw new Error('No session ID');\n\n      // Generate strategy analysis\n      setProcessProgress(30);\n      const result = await generateStrategyAnalysis(currentSessionId);\n      setProcessProgress(100);\n\n      setStrategyResult(result);\n      setCoachingPoints(result.coaching_points || []);\n\n      // Generate recommendations from the strategy result\n      const generatedRecs = generateRecommendations(result);\n      setRecommendations(generatedRecs);\n      if (generatedRecs.length > 0) {\n        setSelectedRecommendation(generatedRecs[0]);\n      }\n\n      // Update session status\n      await supabase\n        .from('sessions')\n        .update({ status: 'ready' })\n        .eq('id', currentSessionId);\n\n      setStep('results');\n    } catch (err) {\n      console.error('Strategy processing error:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Failed to analyze video. Please try again.';\n      setError(errorMessage);\n      setStep('confirm');\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  // Generate strategy recommendations from result\n  const generateRecommendations = (result: StrategyResult): StrategyRecommendation[] => {\n    // Generate multiple recommendation variants\n    const recommendations: StrategyRecommendation[] = [];\n\n    // Recommendation 1: Optimal path (existing refined trajectory)\n    recommendations.push({\n      id: 'optimal-deep',\n      name: 'Deep Clear Strategy',\n      reason: 'Push opponent to the back court with deep clears to create attacking opportunities.',\n      confidence: 92,\n      jumpToVideoTimeSec: 2,\n      trajectory2D: result.refined_trajectory,\n      trajectory3D: result.refined_trajectory,\n    });\n\n    // Recommendation 2: Cross-court variant\n    const crossCourtTrajectory = result.refined_trajectory.map((p, i) => ({\n      ...p,\n      x: i % 2 === 0 ? 0.2 : 0.8, // Alternate sides\n      court_x: i % 2 === 0 ? 0.2 : 0.8,\n    }));\n    recommendations.push({\n      id: 'cross-court',\n      name: 'Cross-Court Attack',\n      reason: 'Use sharp cross-court angles to move opponent laterally and open up straight line kills.',\n      confidence: 87,\n      jumpToVideoTimeSec: 4,\n      trajectory2D: crossCourtTrajectory,\n      trajectory3D: crossCourtTrajectory,\n    });\n\n    // Recommendation 3: Net rush\n    const netRushTrajectory = result.refined_trajectory.map((p, i) => ({\n      ...p,\n      y: i % 2 === 0 ? 0.3 : 0.55, // Closer to net\n      court_y: i % 2 === 0 ? 0.3 : 0.55,\n    }));\n    recommendations.push({\n      id: 'net-rush',\n      name: 'Net Domination',\n      reason: 'Control the front court with tight net shots to force weak lifts and create smash opportunities.',\n      confidence: 78,\n      jumpToVideoTimeSec: 6,\n      trajectory2D: netRushTrajectory,\n      trajectory3D: netRushTrajectory,\n    });\n\n    return recommendations;\n  };\n\n  // Generate strategy analysis (mock implementation)\n  const generateStrategyAnalysis = async (sessionId: string): Promise<StrategyResult> => {\n    // Simulate processing time\n    for (let i = 30; i <= 90; i += 10) {\n      await new Promise((resolve) => setTimeout(resolve, 500));\n      setProcessProgress(i);\n    }\n\n    // Generate mock trajectory data\n    const originalTrajectory: TrajectoryPoint[] = [];\n    const refinedTrajectory: TrajectoryPoint[] = [];\n\n    // Generate a rally pattern\n    const rallyPoints = 8;\n    for (let i = 0; i < rallyPoints; i++) {\n      const t = i / rallyPoints;\n      const isEven = i % 2 === 0;\n\n      // Original trajectory (player's actual shots)\n      originalTrajectory.push({\n        x: 0.3 + Math.random() * 0.4,\n        y: isEven ? 0.15 + Math.random() * 0.2 : 0.65 + Math.random() * 0.2,\n        timestamp: i * 2,\n        court_x: 0.3 + Math.random() * 0.4,\n        court_y: isEven ? 0.2 : 0.8,\n      });\n\n      // Refined trajectory (optimal shots)\n      refinedTrajectory.push({\n        x: isEven ? 0.7 : 0.3, // More decisive placement\n        y: isEven ? 0.1 : 0.9, // Deeper shots\n        timestamp: i * 2,\n        court_x: isEven ? 0.7 : 0.3,\n        court_y: isEven ? 0.1 : 0.9,\n      });\n    }\n\n    // Generate coaching points\n    const coachingPointsOptions = [\n      'Your shots tend to land mid-court. Push for deeper clears to the back tramlines.',\n      'Good variation in cross-court angles. Consider adding more straight drops to surprise opponents.',\n      'Rally patterns show predictable sequences. Mix up the pace with sudden smashes.',\n      'Effective use of the net area. Maintain the pressure with quicker net exchanges.',\n      'Recovery positioning is slightly late. Focus on split-step timing after each shot.',\n      'Strong defensive clears under pressure. Work on transitioning to attack faster.',\n      'Shot selection in the forecourt is excellent. Add deceptive flicks to your arsenal.',\n      'Backhand shots are going wide. Adjust your grip and follow-through angle.',\n    ];\n\n    const selectedPoints = coachingPointsOptions\n      .sort(() => Math.random() - 0.5)\n      .slice(0, 5 + Math.floor(Math.random() * 2));\n\n    // Save to database\n    const result: StrategyResult = {\n      id: crypto.randomUUID(),\n      session_id: sessionId,\n      original_trajectory: originalTrajectory,\n      refined_trajectory: refinedTrajectory,\n      coaching_points: selectedPoints,\n      created_at: new Date().toISOString(),\n    };\n\n    await supabase.from('strategy_results').insert(result);\n\n    return result;\n  };\n\n  // Format date\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">Strategy Analysis</h1>\n            <p className=\"text-gray-600 mt-1\">\n              Analyze your rally patterns and get AI-powered tactical insights\n            </p>\n          </div>\n\n          {/* Error display */}\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n              {error}\n              <button\n                onClick={() => setError(null)}\n                className=\"ml-4 text-red-500 hover:text-red-700\"\n              >\n                Dismiss\n              </button>\n            </div>\n          )}\n\n          {/* Step: Select Source */}\n          {step === 'select' && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Upload New */}\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n              >\n                <div className=\"w-16 h-16 bg-primary-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-primary-200 transition\">\n                  <svg className=\"w-8 h-8 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Upload Video</h3>\n                <p className=\"text-gray-500\">\n                  Upload a new match or rally video for strategy analysis\n                </p>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n              </button>\n\n              {/* Choose from History */}\n              <button\n                onClick={() => {\n                  loadHistorySessions();\n                  setShowHistoryDrawer(true);\n                }}\n                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n              >\n                <div className=\"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-200 transition\">\n                  <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Choose from History</h3>\n                <p className=\"text-gray-500\">\n                  Select a previously analyzed video from your session history\n                </p>\n              </button>\n            </div>\n          )}\n\n          {/* Step: Confirm Video */}\n          {step === 'confirm' && videoUrl && (\n            <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n              {/* Video preview */}\n              <div className=\"bg-gray-900 aspect-video relative\">\n                <video\n                  ref={videoRef}\n                  src={videoUrl}\n                  className=\"w-full h-full object-contain\"\n                  controls\n                />\n              </div>\n\n              {/* Confirmation prompt */}\n              <div className=\"p-6 border-t border-gray-200\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n                      Is this the correct video?\n                    </h3>\n                    <p className=\"text-gray-500 text-sm\">\n                      {selectedSource === 'upload' && videoFile\n                        ? videoFile.name\n                        : selectedHistorySession?.filename || 'Selected video'}\n                      {selectedHistorySession && (\n                        <span className=\"ml-2 text-gray-400\">\n                          from {formatDate(selectedHistorySession.created_at)}\n                        </span>\n                      )}\n                    </p>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <button\n                      onClick={handleConfirmNo}\n                      className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n                    >\n                      No, go back\n                    </button>\n                    <button\n                      onClick={handleConfirmYes}\n                      className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n                    >\n                      Yes, analyze\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step: Processing */}\n          {step === 'processing' && (\n            <div className=\"bg-white rounded-xl p-12 shadow-sm text-center\">\n              <div className=\"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <svg className=\"w-10 h-10 text-primary-500 animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                Analyzing Your Strategy...\n              </h3>\n              <p className=\"text-gray-500 mb-6\">\n                Tracking shuttle trajectories and generating tactical insights\n              </p>\n              <div className=\"w-64 mx-auto bg-gray-200 rounded-full h-2 mb-2\">\n                <div\n                  className=\"bg-primary-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${processProgress}%` }}\n                />\n              </div>\n              <p className=\"text-sm text-gray-500\">{processProgress}% complete</p>\n            </div>\n          )}\n\n          {/* Step: Results */}\n          {step === 'results' && strategyResult && (\n            <div className=\"space-y-6\">\n              {/* Court Animation */}\n              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200\">\n                  <h3 className=\"font-semibold text-gray-900\">Rally Trajectory Analysis</h3>\n                  <p className=\"text-sm text-gray-500\">Original shots vs. optimal placement</p>\n                </div>\n                <div className=\"p-6\">\n                  <CourtTrajectoryAnimation\n                    originalTrajectory={strategyResult.original_trajectory}\n                    refinedTrajectory={selectedRecommendation?.trajectory2D || strategyResult.refined_trajectory}\n                  />\n                </div>\n              </div>\n\n              {/* Strategy Recommendations */}\n              {recommendations.length > 0 && (\n                <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                  <div className=\"p-4 border-b border-gray-200\">\n                    <h3 className=\"font-semibold text-gray-900\">Recommended Strategies</h3>\n                    <p className=\"text-sm text-gray-500\">Select a strategy to see the optimal trajectory</p>\n                  </div>\n                  <div className=\"p-4 grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    {recommendations.map((rec) => (\n                      <button\n                        key={rec.id}\n                        onClick={() => setSelectedRecommendation(rec)}\n                        className={`p-4 rounded-lg border-2 text-left transition ${\n                          selectedRecommendation?.id === rec.id\n                            ? 'border-green-500 bg-green-50'\n                            : 'border-gray-200 hover:border-gray-300'\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-medium text-gray-900\">{rec.name}</h4>\n                          <span className={`text-sm font-bold ${\n                            rec.confidence >= 90 ? 'text-green-600' :\n                            rec.confidence >= 80 ? 'text-yellow-600' : 'text-orange-600'\n                          }`}>\n                            {rec.confidence}%\n                          </span>\n                        </div>\n                        <p className=\"text-sm text-gray-600\">{rec.reason}</p>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Coaching Points */}\n              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200\">\n                  <h3 className=\"font-semibold text-gray-900\">Key Tactical Insights</h3>\n                  <p className=\"text-sm text-gray-500\">{coachingPoints.length} points to improve your game</p>\n                </div>\n                <div className=\"p-6\">\n                  <ul className=\"space-y-4\">\n                    {coachingPoints.map((point, index) => (\n                      <li key={index} className=\"flex items-start gap-3\">\n                        <span className=\"w-6 h-6 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium\">\n                          {index + 1}\n                        </span>\n                        <p className=\"text-gray-700\">{point}</p>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex justify-between\">\n                <button\n                  onClick={handleConfirmNo}\n                  className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n                >\n                  Analyze Another Video\n                </button>\n                <Link\n                  href=\"/history\"\n                  className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n                >\n                  View All Sessions\n                </Link>\n              </div>\n            </div>\n          )}\n\n          {/* History Drawer */}\n          {showHistoryDrawer && (\n            <div className=\"fixed inset-0 z-50\">\n              <div\n                className=\"absolute inset-0 bg-black/50\"\n                onClick={() => setShowHistoryDrawer(false)}\n              />\n              <div className=\"absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl\">\n                <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n                  <h3 className=\"font-semibold text-gray-900\">Select from History</h3>\n                  <button\n                    onClick={() => setShowHistoryDrawer(false)}\n                    className=\"p-2 hover:bg-gray-100 rounded-lg\"\n                  >\n                    <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n                <div className=\"overflow-y-auto h-[calc(100vh-72px)]\">\n                  {loadingHistory ? (\n                    <div className=\"p-8 text-center\">\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4\" />\n                      <p className=\"text-gray-500\">Loading sessions...</p>\n                    </div>\n                  ) : historySessions.length === 0 ? (\n                    <div className=\"p-8 text-center\">\n                      <p className=\"text-gray-500\">No sessions with video found.</p>\n                    </div>\n                  ) : (\n                    <div className=\"p-4 space-y-3\">\n                      {historySessions.map((session) => (\n                        <button\n                          key={session.id}\n                          onClick={() => handleHistorySelect(session)}\n                          className=\"w-full p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition text-left\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-16 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0\">\n                              {session.video_url ? (\n                                <video\n                                  src={session.video_url}\n                                  className=\"w-full h-full object-cover\"\n                                  muted\n                                />\n                              ) : (\n                                <div className=\"w-full h-full flex items-center justify-center\">\n                                  <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                                  </svg>\n                                </div>\n                              )}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <p className=\"font-medium text-gray-900 truncate\">\n                                {session.filename || 'Untitled Session'}\n                              </p>\n                              <p className=\"text-sm text-gray-500\">\n                                {formatDate(session.created_at)}\n                              </p>\n                            </div>\n                            <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                            </svg>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// ============================================\n// Court Trajectory Animation Component\n// Uses PlaybackEngine for proper lifecycle management\n// ============================================\n\ninterface CourtTrajectoryAnimationProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n}\n\n// Speed options\nconst SPEED_OPTIONS: { value: TimeScale; label: string }[] = [\n  { value: 0.25, label: '0.25x' },\n  { value: 0.5, label: '0.5x' },\n  { value: 1, label: '1x' },\n  { value: 2, label: '2x' },\n];\n\nfunction CourtTrajectoryAnimation({\n  originalTrajectory,\n  refinedTrajectory,\n}: CourtTrajectoryAnimationProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // UI state (for display only)\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [showOriginal, setShowOriginal] = useState(true);\n  const [showRefined, setShowRefined] = useState(true);\n  const [speed, setSpeed] = useState<TimeScale>(1);\n  const [activeView, setActiveView] = useState<ActiveView>('2d');\n  const [progress, setProgress] = useState(0);\n\n  // Playback engine refs - these are the source of truth for animation state\n  const engineRef = useRef<PlaybackEngineRefs>(createPlaybackEngine());\n  const animationRef = useRef<number | null>(null);\n  const mountedRef = useRef(true);\n\n  // Keep refs for callbacks to avoid stale closures\n  const showOriginalRef = useRef(showOriginal);\n  const showRefinedRef = useRef(showRefined);\n  const originalTrajectoryRef = useRef(originalTrajectory);\n  const refinedTrajectoryRef = useRef(refinedTrajectory);\n\n  // Sync refs with state\n  useEffect(() => {\n    showOriginalRef.current = showOriginal;\n  }, [showOriginal]);\n\n  useEffect(() => {\n    showRefinedRef.current = showRefined;\n  }, [showRefined]);\n\n  useEffect(() => {\n    originalTrajectoryRef.current = originalTrajectory;\n  }, [originalTrajectory]);\n\n  useEffect(() => {\n    refinedTrajectoryRef.current = refinedTrajectory;\n  }, [refinedTrajectory]);\n\n  // Initialize engine on mount\n  useEffect(() => {\n    mountedRef.current = true;\n    const engine = engineRef.current;\n    engine.playingRef.current = true;\n    engine.timeScaleRef.current = 1;\n    engine.tRef.current = 0;\n    engine.activeViewRef.current = '2d';\n\n    return () => {\n      mountedRef.current = false;\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n    };\n  }, []);\n\n  // 2D Canvas rendering loop\n  const render2D = useCallback((timestamp: number) => {\n    if (!mountedRef.current) return;\n\n    const engine = engineRef.current;\n    const canvas = canvasRef.current;\n\n    // Only render if 2D view is active\n    if (engine.activeViewRef.current !== '2d' || !canvas) {\n      // Continue loop but skip render\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    // Update time using playback engine\n    const t = updatePlaybackTime(engine, timestamp);\n\n    // Update progress state for UI (throttled)\n    setProgress(t);\n\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Court dimensions (scaled)\n    const courtMargin = 40;\n    const courtWidth = width - courtMargin * 2;\n    const courtHeight = height - courtMargin * 2;\n\n    // Clear\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // Outer boundary\n    ctx.strokeRect(courtMargin, courtMargin, courtWidth, courtHeight);\n\n    // Center line\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, height / 2);\n    ctx.lineTo(width - courtMargin, height / 2);\n    ctx.stroke();\n\n    // Service lines\n    const serviceLineY1 = courtMargin + courtHeight * 0.22;\n    const serviceLineY2 = courtMargin + courtHeight * 0.78;\n    ctx.beginPath();\n    ctx.moveTo(courtMargin, serviceLineY1);\n    ctx.lineTo(width - courtMargin, serviceLineY1);\n    ctx.moveTo(courtMargin, serviceLineY2);\n    ctx.lineTo(width - courtMargin, serviceLineY2);\n    ctx.stroke();\n\n    // Center service line\n    ctx.beginPath();\n    ctx.moveTo(width / 2, serviceLineY1);\n    ctx.lineTo(width / 2, serviceLineY2);\n    ctx.stroke();\n\n    // Draw trajectory helper\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(x, y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };\n\n    // Draw trajectories using refs\n    if (showOriginalRef.current && originalTrajectoryRef.current.length > 0) {\n      drawTrajectory(originalTrajectoryRef.current, '#ef4444', t);\n    }\n\n    if (showRefinedRef.current && refinedTrajectoryRef.current.length > 0) {\n      drawTrajectory(refinedTrajectoryRef.current, '#22c55e', t);\n    }\n\n    // Continue animation loop\n    animationRef.current = requestAnimationFrame(render2D);\n  }, []);\n\n  // Start/stop animation loop based on active view\n  useEffect(() => {\n    const engine = engineRef.current;\n    engine.activeViewRef.current = activeView;\n    engine.lastTimestampRef.current = 0; // Reset timestamp to avoid big delta\n\n    // Always run the 2D loop for state management, it will skip rendering if 3D is active\n    if (activeView === '2d' && !animationRef.current) {\n      animationRef.current = requestAnimationFrame(render2D);\n    }\n\n    return () => {\n      // Don't cancel on view switch, let it continue\n    };\n  }, [activeView, render2D]);\n\n  // Start initial animation\n  useEffect(() => {\n    if (!animationRef.current) {\n      animationRef.current = requestAnimationFrame(render2D);\n    }\n  }, [render2D]);\n\n  // Handle play/pause toggle - update both state and ref\n  const handlePlayPause = useCallback(() => {\n    const engine = engineRef.current;\n    const newPlaying = PlaybackEngine.toggle(engine);\n    setIsPlaying(newPlaying);\n    // Reset timestamp to avoid big jumps when resuming\n    engine.lastTimestampRef.current = 0;\n  }, []);\n\n  // Handle speed change - update both state and ref\n  const handleSpeedChange = useCallback((newSpeed: TimeScale) => {\n    const engine = engineRef.current;\n    PlaybackEngine.setSpeed(engine, newSpeed);\n    setSpeed(newSpeed);\n  }, []);\n\n  // Handle view change\n  const handleViewChange = useCallback((view: ActiveView) => {\n    const engine = engineRef.current;\n    PlaybackEngine.setActiveView(engine, view);\n    setActiveView(view);\n  }, []);\n\n  // Step controls\n  const stepForward = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.step(engine, 0.05);\n    setProgress(engine.tRef.current);\n  }, []);\n\n  const stepBackward = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.step(engine, -0.05);\n    setProgress(engine.tRef.current);\n  }, []);\n\n  const resetAnimation = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.reset(engine);\n    setProgress(0);\n  }, []);\n\n  return (\n    <div>\n      {/* 2D/3D Toggle */}\n      <div className=\"flex justify-center mb-4\">\n        <div className=\"inline-flex rounded-lg border border-gray-200 p-1 bg-gray-50\">\n          <button\n            onClick={() => handleViewChange('2d')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n              activeView === '2d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            2D View\n          </button>\n          <button\n            onClick={() => handleViewChange('3d')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n              activeView === '3d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            3D View\n          </button>\n        </div>\n      </div>\n\n      {/* Conditional 2D/3D rendering - keep both mounted but hide inactive */}\n      <div className={activeView === '2d' ? 'block' : 'hidden'}>\n        <canvas\n          ref={canvasRef}\n          width={500}\n          height={700}\n          className=\"w-full max-w-md mx-auto rounded-lg\"\n        />\n      </div>\n\n      {activeView === '3d' && (\n        <Suspense fallback={\n          <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n            <div className=\"text-white\">Loading 3D view...</div>\n          </div>\n        }>\n          <CourtTrajectory3D\n            originalTrajectory={originalTrajectory}\n            refinedTrajectory={refinedTrajectory}\n            showOriginal={showOriginal}\n            showRefined={showRefined}\n            animationProgress={progress}\n            isPlaying={isPlaying}\n            timeScale={speed}\n          />\n        </Suspense>\n      )}\n\n      {/* Enhanced Controls */}\n      <div className=\"mt-4 space-y-3\">\n        {/* Play/Pause and Step Controls */}\n        <div className=\"flex flex-wrap items-center justify-center gap-2\">\n          <button\n            onClick={stepBackward}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Step backward\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={handlePlayPause}\n            className=\"px-4 py-2 bg-primary-500 text-white hover:bg-primary-600 rounded-lg font-medium text-sm flex items-center gap-2\"\n          >\n            {isPlaying ? (\n              <>\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\" />\n                </svg>\n                Pause\n              </>\n            ) : (\n              <>\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M8 5v14l11-7z\" />\n                </svg>\n                Play\n              </>\n            )}\n          </button>\n\n          <button\n            onClick={stepForward}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Step forward\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M6 18l8.5-6L6 6v12zm2 0V6l6.5 6L8 18zm8-12h2v12h-2V6z\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={resetAnimation}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Reset\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Speed Control */}\n        <div className=\"flex items-center justify-center gap-2\">\n          <span className=\"text-sm text-gray-500\">Speed:</span>\n          <div className=\"inline-flex rounded-lg border border-gray-200 p-0.5 bg-gray-50\">\n            {SPEED_OPTIONS.map((option) => (\n              <button\n                key={option.value}\n                onClick={() => handleSpeedChange(option.value)}\n                className={`px-3 py-1 rounded-md text-xs font-medium transition ${\n                  speed === option.value\n                    ? 'bg-white shadow text-gray-900'\n                    : 'text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"flex items-center gap-2 px-4\">\n          <span className=\"text-xs text-gray-500\">{Math.round(progress * 100)}%</span>\n          <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-primary-500 transition-all duration-100\"\n              style={{ width: `${progress * 100}%` }}\n            />\n          </div>\n        </div>\n\n        {/* Trajectory toggles */}\n        <div className=\"flex items-center justify-center gap-4\">\n          <label className=\"flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={showOriginal}\n              onChange={(e) => setShowOriginal(e.target.checked)}\n              className=\"rounded\"\n            />\n            <span className=\"flex items-center gap-1\">\n              <span className=\"w-3 h-3 bg-red-500 rounded-full\" />\n              Original\n            </span>\n          </label>\n\n          <label className=\"flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={showRefined}\n              onChange={(e) => setShowRefined(e.target.checked)}\n              className=\"rounded\"\n            />\n            <span className=\"flex items-center gap-1\">\n              <span className=\"w-3 h-3 bg-green-500 rounded-full\" />\n              Optimal\n            </span>\n          </label>\n        </div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n        <p className=\"text-sm text-gray-600\">\n          <span className=\"text-red-500 font-medium\">Red trajectory:</span> Your actual shot placements during the rally.\n          <br />\n          <span className=\"text-green-500 font-medium\">Green trajectory:</span> AI-suggested optimal placements for better court coverage.\n          {activeView === '3d' && (\n            <>\n              <br />\n              <span className=\"text-gray-500 text-xs mt-2 block\">\n                Tip: Drag to rotate, scroll to zoom, right-click to pan in 3D view.\n              </span>\n            </>\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Loading Component\n// ============================================\n\nfunction StrategyLoading() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-48 mb-4\" />\n            <div className=\"h-4 bg-gray-200 rounded w-96 mb-8\" />\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// ============================================\n// Export\n// ============================================\n\nexport default function StrategyPage() {\n  return (\n    <Suspense fallback={<StrategyLoading />}>\n      <StrategyContent />\n    </Suspense>\n  );\n}\n","structuredPatch":[{"oldStart":838,"oldLines":47,"newStart":838,"newLines":108,"lines":["     const width = canvas.width;","     const height = canvas.height;"," ","-    // Court dimensions (scaled)","-    const courtMargin = 40;","-    const courtWidth = width - courtMargin * 2;","-    const courtHeight = height - courtMargin * 2;","+    // Calculate court scale to maintain BWF aspect ratio (6.1m x 13.4m)","+    const padding = 40;","+    const { scale, offsetX, offsetY, courtPixelWidth, courtPixelHeight } =","+      calculateCourtScale(width, height, padding);"," ","-    // Clear","+    // Helper to convert court meters to canvas pixels","+    const toCanvas = (meterX: number, meterY: number) =>","+      metersToCanvas(meterX, meterY, scale, offsetX, offsetY);","+","+    // Clear canvas","     ctx.clearRect(0, 0, width, height);"," ","-    // Draw court background","+    // Draw court background (doubles court)","     ctx.fillStyle = '#15803d';","-    ctx.fillRect(courtMargin, courtMargin, courtWidth, courtHeight);","+    ctx.fillRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);"," ","     // Draw court lines","     ctx.strokeStyle = '#ffffff';","     ctx.lineWidth = 2;"," ","-    // Outer boundary","-    ctx.strokeRect(courtMargin, courtMargin, courtWidth, courtHeight);","+    // === Outer boundary (doubles) ===","+    ctx.strokeRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);"," ","-    // Center line","+    // === Singles sidelines ===","+    ctx.lineWidth = 1.5;","+    // Left singles sideline","+    const singlesLeftTop = toCanvas(COURT_SPEC.singlesLeftX, COURT_SPEC.length);","+    const singlesLeftBot = toCanvas(COURT_SPEC.singlesLeftX, 0);","     ctx.beginPath();","-    ctx.moveTo(courtMargin, height / 2);","-    ctx.lineTo(width - courtMargin, height / 2);","+    ctx.moveTo(singlesLeftTop.x, singlesLeftTop.y);","+    ctx.lineTo(singlesLeftBot.x, singlesLeftBot.y);","     ctx.stroke();"," ","-    // Service lines","-    const serviceLineY1 = courtMargin + courtHeight * 0.22;","-    const serviceLineY2 = courtMargin + courtHeight * 0.78;","+    // Right singles sideline","+    const singlesRightTop = toCanvas(COURT_SPEC.singlesRightX, COURT_SPEC.length);","+    const singlesRightBot = toCanvas(COURT_SPEC.singlesRightX, 0);","     ctx.beginPath();","-    ctx.moveTo(courtMargin, serviceLineY1);","-    ctx.lineTo(width - courtMargin, serviceLineY1);","-    ctx.moveTo(courtMargin, serviceLineY2);","-    ctx.lineTo(width - courtMargin, serviceLineY2);","+    ctx.moveTo(singlesRightTop.x, singlesRightTop.y);","+    ctx.lineTo(singlesRightBot.x, singlesRightBot.y);","     ctx.stroke();"," ","-    // Center service line","+    // === Net line (center) ===","+    ctx.lineWidth = 2;","+    const netLeft = toCanvas(0, COURT_SPEC.netY);","+    const netRight = toCanvas(COURT_SPEC.width, COURT_SPEC.netY);","     ctx.beginPath();","-    ctx.moveTo(width / 2, serviceLineY1);","-    ctx.lineTo(width / 2, serviceLineY2);","+    ctx.moveTo(netLeft.x, netLeft.y);","+    ctx.lineTo(netRight.x, netRight.y);","     ctx.stroke();"," ","+    // === Short service lines ===","+    ctx.lineWidth = 1.5;","+    // Near short service line (closer to y=0)","+    const nearServiceLeft = toCanvas(0, COURT_SPEC.nearShortServiceY);","+    const nearServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearShortServiceY);","+    ctx.beginPath();","+    ctx.moveTo(nearServiceLeft.x, nearServiceLeft.y);","+    ctx.lineTo(nearServiceRight.x, nearServiceRight.y);","+    ctx.stroke();","+","+    // Far short service line (closer to y=13.4)","+    const farServiceLeft = toCanvas(0, COURT_SPEC.farShortServiceY);","+    const farServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farShortServiceY);","+    ctx.beginPath();","+    ctx.moveTo(farServiceLeft.x, farServiceLeft.y);","+    ctx.lineTo(farServiceRight.x, farServiceRight.y);","+    ctx.stroke();","+","+    // === Doubles long service lines ===","+    // Near long service line (0.76m from near baseline)","+    const nearLongLeft = toCanvas(0, COURT_SPEC.nearLongServiceY);","+    const nearLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearLongServiceY);","+    ctx.beginPath();","+    ctx.moveTo(nearLongLeft.x, nearLongLeft.y);","+    ctx.lineTo(nearLongRight.x, nearLongRight.y);","+    ctx.stroke();","+","+    // Far long service line (0.76m from far baseline)","+    const farLongLeft = toCanvas(0, COURT_SPEC.farLongServiceY);","+    const farLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farLongServiceY);","+    ctx.beginPath();","+    ctx.moveTo(farLongLeft.x, farLongLeft.y);","+    ctx.lineTo(farLongRight.x, farLongRight.y);","+    ctx.stroke();","+","+    // === Center line (only in service box areas) ===","+    // Near side: from baseline (y=0) to near short service line (y=4.72)","+    const centerNearBot = toCanvas(COURT_SPEC.centerX, 0);","+    const centerNearTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.nearShortServiceY);","+    ctx.beginPath();","+    ctx.moveTo(centerNearBot.x, centerNearBot.y);","+    ctx.lineTo(centerNearTop.x, centerNearTop.y);","+    ctx.stroke();","+","+    // Far side: from far short service line (y=8.68) to far baseline (y=13.4)","+    const centerFarBot = toCanvas(COURT_SPEC.centerX, COURT_SPEC.farShortServiceY);","+    const centerFarTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.length);","+    ctx.beginPath();","+    ctx.moveTo(centerFarBot.x, centerFarBot.y);","+    ctx.lineTo(centerFarTop.x, centerFarTop.y);","+    ctx.stroke();","+","     // Draw trajectory helper","     const drawTrajectory = (","       points: TrajectoryPoint[],"]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"0fa3c16c-80dd-4fe7-bd33-c48dffe771d2"}
{"parentUuid":"0e0f274c-6527-45c4-bd48-eb2d04c0c476","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01LCAjqaU8YrbA4GCeX9wg6o","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I need to update the trajectory drawing code to use the new coordinate system. The current code uses percentage-based coordinates directly. I need to update it to use the `normalizedToCanvas` function.","signature":"EvYCCkYICxgCKkAtd8pIwHF1Js0h8dz85U+I9LhNEW6DS2FiBPHINLXp4wbkQNS/TvrYnSckItOEbNBYkwwXieYECWDrg+rk9lVXEgwzviwMOT9n16h7dGcaDCihKGtoEqK+25P/QCIwMwe8RVDacsF885+SQ2UoqZJMWDgMHX0ItpwsmJz66QTRmBD8I2dqdRQeEpryR3pTKt0BT/ZdM1pOAADpZyRkwX3+sIRrcXQUqZFnNs4cej/zMIPVULFmufFnCtRzbVaUOS58wgK/BitoSpFBYrA1DxwawCgQ45aDqho3S2sjxBI/s9cyl+rD+rXwcg+rjJYKOG4M9JWTOPR3qZjqoAAt0b7GCL4YM83Q4Ezv3VG7WOmTOpsFOkDJ+1z1Vy7MiGB6+SYIvkRXXkBoNZvrIV44kzAk+MJS1IN9kqgWXjqp0fCf2A4de/UawyQ8hoNp1ByP6+3TdrPhD0zM/NlxcEW5FUI+OyH6vm1003Tyqi7BgzoYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":2121,"cache_read_input_tokens":58697,"cache_creation":{"ephemeral_5m_input_tokens":2121,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7DtRPMwUhtR8CHCb51","type":"assistant","uuid":"45dd7fee-596a-4c60-8dad-1db5053a290d","timestamp":"2026-01-24T23:56:49.356Z"}
{"parentUuid":"45dd7fee-596a-4c60-8dad-1db5053a290d","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01LCAjqaU8YrbA4GCeX9wg6o","type":"message","role":"assistant","content":[{"type":"text","text":"Now I need to update the trajectory drawing helper to use the new coordinate system."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":2121,"cache_read_input_tokens":58697,"cache_creation":{"ephemeral_5m_input_tokens":2121,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7DtRPMwUhtR8CHCb51","type":"assistant","uuid":"711d99b0-b3d2-412f-9c2c-2c41bba8b365","timestamp":"2026-01-24T23:56:49.615Z"}
{"parentUuid":"711d99b0-b3d2-412f-9c2c-2c41bba8b365","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01LCAjqaU8YrbA4GCeX9wg6o","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01H5hJuoNJMpekf6WCE57QDz","name":"Edit","input":{"replace_all":false,"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","old_string":"    // Draw trajectory helper\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(x, y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };","new_string":"    // Draw trajectory helper - uses normalized coordinates (0-1)\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        // Convert normalized (0-1) coordinates to canvas pixels\n        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);\n\n        if (i === 0) {\n          ctx.moveTo(canvasPos.x, canvasPos.y);\n        } else {\n          ctx.lineTo(canvasPos.x, canvasPos.y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(canvasPos.x, canvasPos.y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(canvasPos.x, canvasPos.y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":2121,"cache_read_input_tokens":58697,"cache_creation":{"ephemeral_5m_input_tokens":2121,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7DtRPMwUhtR8CHCb51","type":"assistant","uuid":"59b66fb8-a477-403f-a771-0461d4e66e11","timestamp":"2026-01-24T23:56:56.943Z"}
{"parentUuid":"59b66fb8-a477-403f-a771-0461d4e66e11","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01H5hJuoNJMpekf6WCE57QDz","type":"tool_result","content":"The file c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx has been updated successfully."}]},"uuid":"c1b9d81c-7308-4493-9bec-530538e24da7","timestamp":"2026-01-24T23:57:00.368Z","toolUseResult":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","oldString":"    // Draw trajectory helper\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(x, y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };","newString":"    // Draw trajectory helper - uses normalized coordinates (0-1)\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        // Convert normalized (0-1) coordinates to canvas pixels\n        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);\n\n        if (i === 0) {\n          ctx.moveTo(canvasPos.x, canvasPos.y);\n        } else {\n          ctx.lineTo(canvasPos.x, canvasPos.y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(canvasPos.x, canvasPos.y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(canvasPos.x, canvasPos.y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };","originalFile":"'use client';\n\nimport { useState, useEffect, useRef, Suspense, lazy, useCallback, useMemo } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport DashboardNav from '@/components/DashboardNav';\nimport { supabase, uploadVideo, getVideoUrl } from '@/lib/supabase';\nimport type { Session, TrajectoryPoint, StrategyResult } from '@/lib/types';\nimport {\n  createPlaybackEngine,\n  PlaybackEngine,\n  updatePlaybackTime,\n  type TimeScale,\n  type ActiveView,\n  type PlaybackEngineRefs,\n} from '@/lib/playback-engine';\nimport {\n  COURT_SPEC,\n  calculateCourtScale,\n  metersToCanvas,\n  normalizedToCanvas,\n} from '@/lib/courtSpec';\n\n// PHASE 4: Lazy load 3D component to avoid SSR issues\nconst CourtTrajectory3D = lazy(() => import('@/components/CourtTrajectory3D'));\n\n// ============================================\n// Strategy Mode Page\n// ============================================\n\ntype StrategyStep = 'select' | 'confirm' | 'processing' | 'results';\n\ninterface HistorySession extends Session {\n  thumbnail_url?: string;\n}\n\n// Strategy Recommendation types\ninterface StrategyRecommendation {\n  id: string;\n  name: string;\n  reason: string;\n  confidence: number;\n  jumpToVideoTimeSec?: number;\n  trajectory2D: TrajectoryPoint[];\n  trajectory3D?: TrajectoryPoint[];\n}\n\nfunction StrategyContent() {\n  const searchParams = useSearchParams();\n  const sessionIdParam = searchParams.get('session');\n\n  // Step state\n  const [step, setStep] = useState<StrategyStep>('select');\n  const [selectedSource, setSelectedSource] = useState<'upload' | 'history' | null>(null);\n\n  // Video/session state\n  const [videoFile, setVideoFile] = useState<File | null>(null);\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  const [sessionId, setSessionId] = useState<string | null>(sessionIdParam);\n  const [selectedHistorySession, setSelectedHistorySession] = useState<HistorySession | null>(null);\n\n  // History drawer\n  const [showHistoryDrawer, setShowHistoryDrawer] = useState(false);\n  const [historySessions, setHistorySessions] = useState<HistorySession[]>([]);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n\n  // Processing state\n  const [processing, setProcessing] = useState(false);\n  const [processProgress, setProcessProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n\n  // Results state\n  const [strategyResult, setStrategyResult] = useState<StrategyResult | null>(null);\n  const [recommendations, setRecommendations] = useState<StrategyRecommendation[]>([]);\n  const [selectedRecommendation, setSelectedRecommendation] = useState<StrategyRecommendation | null>(null);\n  const [coachingPoints, setCoachingPoints] = useState<string[]>([]);\n\n  // Refs\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  // Load from session param\n  useEffect(() => {\n    if (sessionIdParam) {\n      loadSessionFromHistory(sessionIdParam);\n    }\n  }, [sessionIdParam]);\n\n  // Load history sessions\n  const loadHistorySessions = async () => {\n    setLoadingHistory(true);\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*')\n        .eq('user_id', user.id)\n        .in('type', ['analytics', 'practice'])\n        .not('video_url', 'is', null)\n        .order('created_at', { ascending: false })\n        .limit(50);\n\n      if (error) throw error;\n      setHistorySessions(data || []);\n    } catch (err) {\n      console.error('Error loading history:', err);\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n\n  // Load session from history\n  const loadSessionFromHistory = async (id: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) throw error;\n\n      setSelectedHistorySession(data);\n      setSessionId(data.id);\n      setVideoUrl(data.video_url);\n      setSelectedSource('history');\n      setStep('confirm');\n    } catch (err) {\n      console.error('Error loading session:', err);\n      setError('Failed to load session');\n    }\n  };\n\n  // Handle file upload\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    if (!file.type.startsWith('video/')) {\n      setError('Please select a video file');\n      return;\n    }\n\n    // Max file size 100MB (TUS resumable upload handles large files)\n    if (file.size > 100 * 1024 * 1024) {\n      setError('File size must be less than 100MB. Please compress your video before uploading.');\n      return;\n    }\n\n    setError(null);\n    setVideoFile(file);\n    setVideoUrl(URL.createObjectURL(file));\n    setSelectedSource('upload');\n    setStep('confirm');\n  };\n\n  // Handle history selection\n  const handleHistorySelect = (session: HistorySession) => {\n    setSelectedHistorySession(session);\n    setSessionId(session.id);\n    setVideoUrl(session.video_url || null);\n    setSelectedSource('history');\n    setShowHistoryDrawer(false);\n    setStep('confirm');\n  };\n\n  // Handle confirmation: No\n  const handleConfirmNo = () => {\n    setVideoFile(null);\n    setVideoUrl(null);\n    setSessionId(null);\n    setSelectedHistorySession(null);\n    setSelectedSource(null);\n    setStep('select');\n    setError(null);\n    setRecommendations([]);\n    setSelectedRecommendation(null);\n  };\n\n  // Handle confirmation: Yes\n  const handleConfirmYes = async () => {\n    setStep('processing');\n    setProcessing(true);\n    setProcessProgress(0);\n    setError(null);\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated. Please log in again.');\n\n      // If new upload, create session and upload video\n      let currentSessionId = sessionId;\n      let uploadedVideoUrl = videoUrl;\n\n      if (selectedSource === 'upload' && videoFile) {\n        // Upload video with progress tracking\n        // This is critical - do NOT create session if upload fails\n        setProcessProgress(5);\n\n        let videoPath: string | null = null;\n        try {\n          videoPath = await uploadVideo(videoFile, user.id, (progress) => {\n            // Upload progress: 5-25%\n            setProcessProgress(5 + Math.round(progress * 0.2));\n          });\n\n          if (!videoPath) {\n            throw new Error('Upload returned empty path');\n          }\n\n          // Get public URL\n          uploadedVideoUrl = getVideoUrl(videoPath);\n          console.log('Strategy video uploaded:', videoPath);\n\n        } catch (uploadError) {\n          console.error('Strategy video upload failed:', uploadError);\n          const uploadErrorMsg = uploadError instanceof Error\n            ? uploadError.message\n            : 'Failed to upload video. Please try again.';\n          throw new Error(uploadErrorMsg);\n        }\n\n        // Create session only AFTER successful upload\n        setProcessProgress(25);\n        const { data: session, error: sessionError } = await supabase\n          .from('sessions')\n          .insert({\n            user_id: user.id,\n            type: 'strategy',\n            video_path: videoPath,\n            video_url: uploadedVideoUrl,\n            filename: videoFile.name,\n            status: 'processing',\n          })\n          .select()\n          .single();\n\n        if (sessionError) {\n          console.error('Session creation error:', sessionError);\n          throw new Error('Failed to create analysis session');\n        }\n\n        currentSessionId = session.id;\n        setSessionId(session.id);\n      } else if (sessionId) {\n        // Update existing session type to strategy\n        await supabase\n          .from('sessions')\n          .update({ status: 'processing' })\n          .eq('id', sessionId);\n      }\n\n      if (!currentSessionId) throw new Error('No session ID');\n\n      // Generate strategy analysis\n      setProcessProgress(30);\n      const result = await generateStrategyAnalysis(currentSessionId);\n      setProcessProgress(100);\n\n      setStrategyResult(result);\n      setCoachingPoints(result.coaching_points || []);\n\n      // Generate recommendations from the strategy result\n      const generatedRecs = generateRecommendations(result);\n      setRecommendations(generatedRecs);\n      if (generatedRecs.length > 0) {\n        setSelectedRecommendation(generatedRecs[0]);\n      }\n\n      // Update session status\n      await supabase\n        .from('sessions')\n        .update({ status: 'ready' })\n        .eq('id', currentSessionId);\n\n      setStep('results');\n    } catch (err) {\n      console.error('Strategy processing error:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Failed to analyze video. Please try again.';\n      setError(errorMessage);\n      setStep('confirm');\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  // Generate strategy recommendations from result\n  const generateRecommendations = (result: StrategyResult): StrategyRecommendation[] => {\n    // Generate multiple recommendation variants\n    const recommendations: StrategyRecommendation[] = [];\n\n    // Recommendation 1: Optimal path (existing refined trajectory)\n    recommendations.push({\n      id: 'optimal-deep',\n      name: 'Deep Clear Strategy',\n      reason: 'Push opponent to the back court with deep clears to create attacking opportunities.',\n      confidence: 92,\n      jumpToVideoTimeSec: 2,\n      trajectory2D: result.refined_trajectory,\n      trajectory3D: result.refined_trajectory,\n    });\n\n    // Recommendation 2: Cross-court variant\n    const crossCourtTrajectory = result.refined_trajectory.map((p, i) => ({\n      ...p,\n      x: i % 2 === 0 ? 0.2 : 0.8, // Alternate sides\n      court_x: i % 2 === 0 ? 0.2 : 0.8,\n    }));\n    recommendations.push({\n      id: 'cross-court',\n      name: 'Cross-Court Attack',\n      reason: 'Use sharp cross-court angles to move opponent laterally and open up straight line kills.',\n      confidence: 87,\n      jumpToVideoTimeSec: 4,\n      trajectory2D: crossCourtTrajectory,\n      trajectory3D: crossCourtTrajectory,\n    });\n\n    // Recommendation 3: Net rush\n    const netRushTrajectory = result.refined_trajectory.map((p, i) => ({\n      ...p,\n      y: i % 2 === 0 ? 0.3 : 0.55, // Closer to net\n      court_y: i % 2 === 0 ? 0.3 : 0.55,\n    }));\n    recommendations.push({\n      id: 'net-rush',\n      name: 'Net Domination',\n      reason: 'Control the front court with tight net shots to force weak lifts and create smash opportunities.',\n      confidence: 78,\n      jumpToVideoTimeSec: 6,\n      trajectory2D: netRushTrajectory,\n      trajectory3D: netRushTrajectory,\n    });\n\n    return recommendations;\n  };\n\n  // Generate strategy analysis (mock implementation)\n  const generateStrategyAnalysis = async (sessionId: string): Promise<StrategyResult> => {\n    // Simulate processing time\n    for (let i = 30; i <= 90; i += 10) {\n      await new Promise((resolve) => setTimeout(resolve, 500));\n      setProcessProgress(i);\n    }\n\n    // Generate mock trajectory data\n    const originalTrajectory: TrajectoryPoint[] = [];\n    const refinedTrajectory: TrajectoryPoint[] = [];\n\n    // Generate a rally pattern\n    const rallyPoints = 8;\n    for (let i = 0; i < rallyPoints; i++) {\n      const t = i / rallyPoints;\n      const isEven = i % 2 === 0;\n\n      // Original trajectory (player's actual shots)\n      originalTrajectory.push({\n        x: 0.3 + Math.random() * 0.4,\n        y: isEven ? 0.15 + Math.random() * 0.2 : 0.65 + Math.random() * 0.2,\n        timestamp: i * 2,\n        court_x: 0.3 + Math.random() * 0.4,\n        court_y: isEven ? 0.2 : 0.8,\n      });\n\n      // Refined trajectory (optimal shots)\n      refinedTrajectory.push({\n        x: isEven ? 0.7 : 0.3, // More decisive placement\n        y: isEven ? 0.1 : 0.9, // Deeper shots\n        timestamp: i * 2,\n        court_x: isEven ? 0.7 : 0.3,\n        court_y: isEven ? 0.1 : 0.9,\n      });\n    }\n\n    // Generate coaching points\n    const coachingPointsOptions = [\n      'Your shots tend to land mid-court. Push for deeper clears to the back tramlines.',\n      'Good variation in cross-court angles. Consider adding more straight drops to surprise opponents.',\n      'Rally patterns show predictable sequences. Mix up the pace with sudden smashes.',\n      'Effective use of the net area. Maintain the pressure with quicker net exchanges.',\n      'Recovery positioning is slightly late. Focus on split-step timing after each shot.',\n      'Strong defensive clears under pressure. Work on transitioning to attack faster.',\n      'Shot selection in the forecourt is excellent. Add deceptive flicks to your arsenal.',\n      'Backhand shots are going wide. Adjust your grip and follow-through angle.',\n    ];\n\n    const selectedPoints = coachingPointsOptions\n      .sort(() => Math.random() - 0.5)\n      .slice(0, 5 + Math.floor(Math.random() * 2));\n\n    // Save to database\n    const result: StrategyResult = {\n      id: crypto.randomUUID(),\n      session_id: sessionId,\n      original_trajectory: originalTrajectory,\n      refined_trajectory: refinedTrajectory,\n      coaching_points: selectedPoints,\n      created_at: new Date().toISOString(),\n    };\n\n    await supabase.from('strategy_results').insert(result);\n\n    return result;\n  };\n\n  // Format date\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">Strategy Analysis</h1>\n            <p className=\"text-gray-600 mt-1\">\n              Analyze your rally patterns and get AI-powered tactical insights\n            </p>\n          </div>\n\n          {/* Error display */}\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n              {error}\n              <button\n                onClick={() => setError(null)}\n                className=\"ml-4 text-red-500 hover:text-red-700\"\n              >\n                Dismiss\n              </button>\n            </div>\n          )}\n\n          {/* Step: Select Source */}\n          {step === 'select' && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Upload New */}\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n              >\n                <div className=\"w-16 h-16 bg-primary-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-primary-200 transition\">\n                  <svg className=\"w-8 h-8 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Upload Video</h3>\n                <p className=\"text-gray-500\">\n                  Upload a new match or rally video for strategy analysis\n                </p>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n              </button>\n\n              {/* Choose from History */}\n              <button\n                onClick={() => {\n                  loadHistorySessions();\n                  setShowHistoryDrawer(true);\n                }}\n                className=\"bg-white rounded-xl p-8 shadow-sm hover:shadow-md transition text-left group\"\n              >\n                <div className=\"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-200 transition\">\n                  <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Choose from History</h3>\n                <p className=\"text-gray-500\">\n                  Select a previously analyzed video from your session history\n                </p>\n              </button>\n            </div>\n          )}\n\n          {/* Step: Confirm Video */}\n          {step === 'confirm' && videoUrl && (\n            <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n              {/* Video preview */}\n              <div className=\"bg-gray-900 aspect-video relative\">\n                <video\n                  ref={videoRef}\n                  src={videoUrl}\n                  className=\"w-full h-full object-contain\"\n                  controls\n                />\n              </div>\n\n              {/* Confirmation prompt */}\n              <div className=\"p-6 border-t border-gray-200\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n                      Is this the correct video?\n                    </h3>\n                    <p className=\"text-gray-500 text-sm\">\n                      {selectedSource === 'upload' && videoFile\n                        ? videoFile.name\n                        : selectedHistorySession?.filename || 'Selected video'}\n                      {selectedHistorySession && (\n                        <span className=\"ml-2 text-gray-400\">\n                          from {formatDate(selectedHistorySession.created_at)}\n                        </span>\n                      )}\n                    </p>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <button\n                      onClick={handleConfirmNo}\n                      className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n                    >\n                      No, go back\n                    </button>\n                    <button\n                      onClick={handleConfirmYes}\n                      className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n                    >\n                      Yes, analyze\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step: Processing */}\n          {step === 'processing' && (\n            <div className=\"bg-white rounded-xl p-12 shadow-sm text-center\">\n              <div className=\"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <svg className=\"w-10 h-10 text-primary-500 animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                Analyzing Your Strategy...\n              </h3>\n              <p className=\"text-gray-500 mb-6\">\n                Tracking shuttle trajectories and generating tactical insights\n              </p>\n              <div className=\"w-64 mx-auto bg-gray-200 rounded-full h-2 mb-2\">\n                <div\n                  className=\"bg-primary-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${processProgress}%` }}\n                />\n              </div>\n              <p className=\"text-sm text-gray-500\">{processProgress}% complete</p>\n            </div>\n          )}\n\n          {/* Step: Results */}\n          {step === 'results' && strategyResult && (\n            <div className=\"space-y-6\">\n              {/* Court Animation */}\n              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200\">\n                  <h3 className=\"font-semibold text-gray-900\">Rally Trajectory Analysis</h3>\n                  <p className=\"text-sm text-gray-500\">Original shots vs. optimal placement</p>\n                </div>\n                <div className=\"p-6\">\n                  <CourtTrajectoryAnimation\n                    originalTrajectory={strategyResult.original_trajectory}\n                    refinedTrajectory={selectedRecommendation?.trajectory2D || strategyResult.refined_trajectory}\n                  />\n                </div>\n              </div>\n\n              {/* Strategy Recommendations */}\n              {recommendations.length > 0 && (\n                <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                  <div className=\"p-4 border-b border-gray-200\">\n                    <h3 className=\"font-semibold text-gray-900\">Recommended Strategies</h3>\n                    <p className=\"text-sm text-gray-500\">Select a strategy to see the optimal trajectory</p>\n                  </div>\n                  <div className=\"p-4 grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    {recommendations.map((rec) => (\n                      <button\n                        key={rec.id}\n                        onClick={() => setSelectedRecommendation(rec)}\n                        className={`p-4 rounded-lg border-2 text-left transition ${\n                          selectedRecommendation?.id === rec.id\n                            ? 'border-green-500 bg-green-50'\n                            : 'border-gray-200 hover:border-gray-300'\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-medium text-gray-900\">{rec.name}</h4>\n                          <span className={`text-sm font-bold ${\n                            rec.confidence >= 90 ? 'text-green-600' :\n                            rec.confidence >= 80 ? 'text-yellow-600' : 'text-orange-600'\n                          }`}>\n                            {rec.confidence}%\n                          </span>\n                        </div>\n                        <p className=\"text-sm text-gray-600\">{rec.reason}</p>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Coaching Points */}\n              <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200\">\n                  <h3 className=\"font-semibold text-gray-900\">Key Tactical Insights</h3>\n                  <p className=\"text-sm text-gray-500\">{coachingPoints.length} points to improve your game</p>\n                </div>\n                <div className=\"p-6\">\n                  <ul className=\"space-y-4\">\n                    {coachingPoints.map((point, index) => (\n                      <li key={index} className=\"flex items-start gap-3\">\n                        <span className=\"w-6 h-6 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium\">\n                          {index + 1}\n                        </span>\n                        <p className=\"text-gray-700\">{point}</p>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex justify-between\">\n                <button\n                  onClick={handleConfirmNo}\n                  className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\"\n                >\n                  Analyze Another Video\n                </button>\n                <Link\n                  href=\"/history\"\n                  className=\"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition\"\n                >\n                  View All Sessions\n                </Link>\n              </div>\n            </div>\n          )}\n\n          {/* History Drawer */}\n          {showHistoryDrawer && (\n            <div className=\"fixed inset-0 z-50\">\n              <div\n                className=\"absolute inset-0 bg-black/50\"\n                onClick={() => setShowHistoryDrawer(false)}\n              />\n              <div className=\"absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl\">\n                <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n                  <h3 className=\"font-semibold text-gray-900\">Select from History</h3>\n                  <button\n                    onClick={() => setShowHistoryDrawer(false)}\n                    className=\"p-2 hover:bg-gray-100 rounded-lg\"\n                  >\n                    <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n                <div className=\"overflow-y-auto h-[calc(100vh-72px)]\">\n                  {loadingHistory ? (\n                    <div className=\"p-8 text-center\">\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4\" />\n                      <p className=\"text-gray-500\">Loading sessions...</p>\n                    </div>\n                  ) : historySessions.length === 0 ? (\n                    <div className=\"p-8 text-center\">\n                      <p className=\"text-gray-500\">No sessions with video found.</p>\n                    </div>\n                  ) : (\n                    <div className=\"p-4 space-y-3\">\n                      {historySessions.map((session) => (\n                        <button\n                          key={session.id}\n                          onClick={() => handleHistorySelect(session)}\n                          className=\"w-full p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition text-left\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-16 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0\">\n                              {session.video_url ? (\n                                <video\n                                  src={session.video_url}\n                                  className=\"w-full h-full object-cover\"\n                                  muted\n                                />\n                              ) : (\n                                <div className=\"w-full h-full flex items-center justify-center\">\n                                  <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                                  </svg>\n                                </div>\n                              )}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <p className=\"font-medium text-gray-900 truncate\">\n                                {session.filename || 'Untitled Session'}\n                              </p>\n                              <p className=\"text-sm text-gray-500\">\n                                {formatDate(session.created_at)}\n                              </p>\n                            </div>\n                            <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                            </svg>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// ============================================\n// Court Trajectory Animation Component\n// Uses PlaybackEngine for proper lifecycle management\n// ============================================\n\ninterface CourtTrajectoryAnimationProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n}\n\n// Speed options\nconst SPEED_OPTIONS: { value: TimeScale; label: string }[] = [\n  { value: 0.25, label: '0.25x' },\n  { value: 0.5, label: '0.5x' },\n  { value: 1, label: '1x' },\n  { value: 2, label: '2x' },\n];\n\nfunction CourtTrajectoryAnimation({\n  originalTrajectory,\n  refinedTrajectory,\n}: CourtTrajectoryAnimationProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // UI state (for display only)\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [showOriginal, setShowOriginal] = useState(true);\n  const [showRefined, setShowRefined] = useState(true);\n  const [speed, setSpeed] = useState<TimeScale>(1);\n  const [activeView, setActiveView] = useState<ActiveView>('2d');\n  const [progress, setProgress] = useState(0);\n\n  // Playback engine refs - these are the source of truth for animation state\n  const engineRef = useRef<PlaybackEngineRefs>(createPlaybackEngine());\n  const animationRef = useRef<number | null>(null);\n  const mountedRef = useRef(true);\n\n  // Keep refs for callbacks to avoid stale closures\n  const showOriginalRef = useRef(showOriginal);\n  const showRefinedRef = useRef(showRefined);\n  const originalTrajectoryRef = useRef(originalTrajectory);\n  const refinedTrajectoryRef = useRef(refinedTrajectory);\n\n  // Sync refs with state\n  useEffect(() => {\n    showOriginalRef.current = showOriginal;\n  }, [showOriginal]);\n\n  useEffect(() => {\n    showRefinedRef.current = showRefined;\n  }, [showRefined]);\n\n  useEffect(() => {\n    originalTrajectoryRef.current = originalTrajectory;\n  }, [originalTrajectory]);\n\n  useEffect(() => {\n    refinedTrajectoryRef.current = refinedTrajectory;\n  }, [refinedTrajectory]);\n\n  // Initialize engine on mount\n  useEffect(() => {\n    mountedRef.current = true;\n    const engine = engineRef.current;\n    engine.playingRef.current = true;\n    engine.timeScaleRef.current = 1;\n    engine.tRef.current = 0;\n    engine.activeViewRef.current = '2d';\n\n    return () => {\n      mountedRef.current = false;\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n    };\n  }, []);\n\n  // 2D Canvas rendering loop\n  const render2D = useCallback((timestamp: number) => {\n    if (!mountedRef.current) return;\n\n    const engine = engineRef.current;\n    const canvas = canvasRef.current;\n\n    // Only render if 2D view is active\n    if (engine.activeViewRef.current !== '2d' || !canvas) {\n      // Continue loop but skip render\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    // Update time using playback engine\n    const t = updatePlaybackTime(engine, timestamp);\n\n    // Update progress state for UI (throttled)\n    setProgress(t);\n\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Calculate court scale to maintain BWF aspect ratio (6.1m x 13.4m)\n    const padding = 40;\n    const { scale, offsetX, offsetY, courtPixelWidth, courtPixelHeight } =\n      calculateCourtScale(width, height, padding);\n\n    // Helper to convert court meters to canvas pixels\n    const toCanvas = (meterX: number, meterY: number) =>\n      metersToCanvas(meterX, meterY, scale, offsetX, offsetY);\n\n    // Clear canvas\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background (doubles court)\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // === Outer boundary (doubles) ===\n    ctx.strokeRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n\n    // === Singles sidelines ===\n    ctx.lineWidth = 1.5;\n    // Left singles sideline\n    const singlesLeftTop = toCanvas(COURT_SPEC.singlesLeftX, COURT_SPEC.length);\n    const singlesLeftBot = toCanvas(COURT_SPEC.singlesLeftX, 0);\n    ctx.beginPath();\n    ctx.moveTo(singlesLeftTop.x, singlesLeftTop.y);\n    ctx.lineTo(singlesLeftBot.x, singlesLeftBot.y);\n    ctx.stroke();\n\n    // Right singles sideline\n    const singlesRightTop = toCanvas(COURT_SPEC.singlesRightX, COURT_SPEC.length);\n    const singlesRightBot = toCanvas(COURT_SPEC.singlesRightX, 0);\n    ctx.beginPath();\n    ctx.moveTo(singlesRightTop.x, singlesRightTop.y);\n    ctx.lineTo(singlesRightBot.x, singlesRightBot.y);\n    ctx.stroke();\n\n    // === Net line (center) ===\n    ctx.lineWidth = 2;\n    const netLeft = toCanvas(0, COURT_SPEC.netY);\n    const netRight = toCanvas(COURT_SPEC.width, COURT_SPEC.netY);\n    ctx.beginPath();\n    ctx.moveTo(netLeft.x, netLeft.y);\n    ctx.lineTo(netRight.x, netRight.y);\n    ctx.stroke();\n\n    // === Short service lines ===\n    ctx.lineWidth = 1.5;\n    // Near short service line (closer to y=0)\n    const nearServiceLeft = toCanvas(0, COURT_SPEC.nearShortServiceY);\n    const nearServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(nearServiceLeft.x, nearServiceLeft.y);\n    ctx.lineTo(nearServiceRight.x, nearServiceRight.y);\n    ctx.stroke();\n\n    // Far short service line (closer to y=13.4)\n    const farServiceLeft = toCanvas(0, COURT_SPEC.farShortServiceY);\n    const farServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(farServiceLeft.x, farServiceLeft.y);\n    ctx.lineTo(farServiceRight.x, farServiceRight.y);\n    ctx.stroke();\n\n    // === Doubles long service lines ===\n    // Near long service line (0.76m from near baseline)\n    const nearLongLeft = toCanvas(0, COURT_SPEC.nearLongServiceY);\n    const nearLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearLongServiceY);\n    ctx.beginPath();\n    ctx.moveTo(nearLongLeft.x, nearLongLeft.y);\n    ctx.lineTo(nearLongRight.x, nearLongRight.y);\n    ctx.stroke();\n\n    // Far long service line (0.76m from far baseline)\n    const farLongLeft = toCanvas(0, COURT_SPEC.farLongServiceY);\n    const farLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farLongServiceY);\n    ctx.beginPath();\n    ctx.moveTo(farLongLeft.x, farLongLeft.y);\n    ctx.lineTo(farLongRight.x, farLongRight.y);\n    ctx.stroke();\n\n    // === Center line (only in service box areas) ===\n    // Near side: from baseline (y=0) to near short service line (y=4.72)\n    const centerNearBot = toCanvas(COURT_SPEC.centerX, 0);\n    const centerNearTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.nearShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(centerNearBot.x, centerNearBot.y);\n    ctx.lineTo(centerNearTop.x, centerNearTop.y);\n    ctx.stroke();\n\n    // Far side: from far short service line (y=8.68) to far baseline (y=13.4)\n    const centerFarBot = toCanvas(COURT_SPEC.centerX, COURT_SPEC.farShortServiceY);\n    const centerFarTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.length);\n    ctx.beginPath();\n    ctx.moveTo(centerFarBot.x, centerFarBot.y);\n    ctx.lineTo(centerFarTop.x, centerFarTop.y);\n    ctx.stroke();\n\n    // Draw trajectory helper\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const x = courtMargin + p.x * courtWidth;\n        const y = courtMargin + p.y * courtHeight;\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(x, y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };\n\n    // Draw trajectories using refs\n    if (showOriginalRef.current && originalTrajectoryRef.current.length > 0) {\n      drawTrajectory(originalTrajectoryRef.current, '#ef4444', t);\n    }\n\n    if (showRefinedRef.current && refinedTrajectoryRef.current.length > 0) {\n      drawTrajectory(refinedTrajectoryRef.current, '#22c55e', t);\n    }\n\n    // Continue animation loop\n    animationRef.current = requestAnimationFrame(render2D);\n  }, []);\n\n  // Start/stop animation loop based on active view\n  useEffect(() => {\n    const engine = engineRef.current;\n    engine.activeViewRef.current = activeView;\n    engine.lastTimestampRef.current = 0; // Reset timestamp to avoid big delta\n\n    // Always run the 2D loop for state management, it will skip rendering if 3D is active\n    if (activeView === '2d' && !animationRef.current) {\n      animationRef.current = requestAnimationFrame(render2D);\n    }\n\n    return () => {\n      // Don't cancel on view switch, let it continue\n    };\n  }, [activeView, render2D]);\n\n  // Start initial animation\n  useEffect(() => {\n    if (!animationRef.current) {\n      animationRef.current = requestAnimationFrame(render2D);\n    }\n  }, [render2D]);\n\n  // Handle play/pause toggle - update both state and ref\n  const handlePlayPause = useCallback(() => {\n    const engine = engineRef.current;\n    const newPlaying = PlaybackEngine.toggle(engine);\n    setIsPlaying(newPlaying);\n    // Reset timestamp to avoid big jumps when resuming\n    engine.lastTimestampRef.current = 0;\n  }, []);\n\n  // Handle speed change - update both state and ref\n  const handleSpeedChange = useCallback((newSpeed: TimeScale) => {\n    const engine = engineRef.current;\n    PlaybackEngine.setSpeed(engine, newSpeed);\n    setSpeed(newSpeed);\n  }, []);\n\n  // Handle view change\n  const handleViewChange = useCallback((view: ActiveView) => {\n    const engine = engineRef.current;\n    PlaybackEngine.setActiveView(engine, view);\n    setActiveView(view);\n  }, []);\n\n  // Step controls\n  const stepForward = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.step(engine, 0.05);\n    setProgress(engine.tRef.current);\n  }, []);\n\n  const stepBackward = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.step(engine, -0.05);\n    setProgress(engine.tRef.current);\n  }, []);\n\n  const resetAnimation = useCallback(() => {\n    const engine = engineRef.current;\n    PlaybackEngine.reset(engine);\n    setProgress(0);\n  }, []);\n\n  return (\n    <div>\n      {/* 2D/3D Toggle */}\n      <div className=\"flex justify-center mb-4\">\n        <div className=\"inline-flex rounded-lg border border-gray-200 p-1 bg-gray-50\">\n          <button\n            onClick={() => handleViewChange('2d')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n              activeView === '2d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            2D View\n          </button>\n          <button\n            onClick={() => handleViewChange('3d')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\n              activeView === '3d' ? 'bg-white shadow text-gray-900' : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            3D View\n          </button>\n        </div>\n      </div>\n\n      {/* Conditional 2D/3D rendering - keep both mounted but hide inactive */}\n      <div className={activeView === '2d' ? 'block' : 'hidden'}>\n        <canvas\n          ref={canvasRef}\n          width={500}\n          height={700}\n          className=\"w-full max-w-md mx-auto rounded-lg\"\n        />\n      </div>\n\n      {activeView === '3d' && (\n        <Suspense fallback={\n          <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n            <div className=\"text-white\">Loading 3D view...</div>\n          </div>\n        }>\n          <CourtTrajectory3D\n            originalTrajectory={originalTrajectory}\n            refinedTrajectory={refinedTrajectory}\n            showOriginal={showOriginal}\n            showRefined={showRefined}\n            animationProgress={progress}\n            isPlaying={isPlaying}\n            timeScale={speed}\n          />\n        </Suspense>\n      )}\n\n      {/* Enhanced Controls */}\n      <div className=\"mt-4 space-y-3\">\n        {/* Play/Pause and Step Controls */}\n        <div className=\"flex flex-wrap items-center justify-center gap-2\">\n          <button\n            onClick={stepBackward}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Step backward\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={handlePlayPause}\n            className=\"px-4 py-2 bg-primary-500 text-white hover:bg-primary-600 rounded-lg font-medium text-sm flex items-center gap-2\"\n          >\n            {isPlaying ? (\n              <>\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\" />\n                </svg>\n                Pause\n              </>\n            ) : (\n              <>\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M8 5v14l11-7z\" />\n                </svg>\n                Play\n              </>\n            )}\n          </button>\n\n          <button\n            onClick={stepForward}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Step forward\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M6 18l8.5-6L6 6v12zm2 0V6l6.5 6L8 18zm8-12h2v12h-2V6z\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={resetAnimation}\n            className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            title=\"Reset\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Speed Control */}\n        <div className=\"flex items-center justify-center gap-2\">\n          <span className=\"text-sm text-gray-500\">Speed:</span>\n          <div className=\"inline-flex rounded-lg border border-gray-200 p-0.5 bg-gray-50\">\n            {SPEED_OPTIONS.map((option) => (\n              <button\n                key={option.value}\n                onClick={() => handleSpeedChange(option.value)}\n                className={`px-3 py-1 rounded-md text-xs font-medium transition ${\n                  speed === option.value\n                    ? 'bg-white shadow text-gray-900'\n                    : 'text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"flex items-center gap-2 px-4\">\n          <span className=\"text-xs text-gray-500\">{Math.round(progress * 100)}%</span>\n          <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-primary-500 transition-all duration-100\"\n              style={{ width: `${progress * 100}%` }}\n            />\n          </div>\n        </div>\n\n        {/* Trajectory toggles */}\n        <div className=\"flex items-center justify-center gap-4\">\n          <label className=\"flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={showOriginal}\n              onChange={(e) => setShowOriginal(e.target.checked)}\n              className=\"rounded\"\n            />\n            <span className=\"flex items-center gap-1\">\n              <span className=\"w-3 h-3 bg-red-500 rounded-full\" />\n              Original\n            </span>\n          </label>\n\n          <label className=\"flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={showRefined}\n              onChange={(e) => setShowRefined(e.target.checked)}\n              className=\"rounded\"\n            />\n            <span className=\"flex items-center gap-1\">\n              <span className=\"w-3 h-3 bg-green-500 rounded-full\" />\n              Optimal\n            </span>\n          </label>\n        </div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n        <p className=\"text-sm text-gray-600\">\n          <span className=\"text-red-500 font-medium\">Red trajectory:</span> Your actual shot placements during the rally.\n          <br />\n          <span className=\"text-green-500 font-medium\">Green trajectory:</span> AI-suggested optimal placements for better court coverage.\n          {activeView === '3d' && (\n            <>\n              <br />\n              <span className=\"text-gray-500 text-xs mt-2 block\">\n                Tip: Drag to rotate, scroll to zoom, right-click to pan in 3D view.\n              </span>\n            </>\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Loading Component\n// ============================================\n\nfunction StrategyLoading() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardNav />\n      <main className=\"ml-64 p-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-48 mb-4\" />\n            <div className=\"h-4 bg-gray-200 rounded w-96 mb-8\" />\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n              <div className=\"h-48 bg-gray-200 rounded-xl\" />\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// ============================================\n// Export\n// ============================================\n\nexport default function StrategyPage() {\n  return (\n    <Suspense fallback={<StrategyLoading />}>\n      <StrategyContent />\n    </Suspense>\n  );\n}\n","structuredPatch":[{"oldStart":940,"oldLines":7,"newStart":940,"newLines":7,"lines":["     ctx.lineTo(centerFarTop.x, centerFarTop.y);","     ctx.stroke();"," ","-    // Draw trajectory helper","+    // Draw trajectory helper - uses normalized coordinates (0-1)","     const drawTrajectory = (","       points: TrajectoryPoint[],","       color: string,"]},{"oldStart":956,"oldLines":13,"newStart":956,"newLines":13,"lines":[" ","       for (let i = 0; i < visiblePoints; i++) {","         const p = points[i];","-        const x = courtMargin + p.x * courtWidth;","-        const y = courtMargin + p.y * courtHeight;","+        // Convert normalized (0-1) coordinates to canvas pixels","+        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);"," ","         if (i === 0) {","-          ctx.moveTo(x, y);","+          ctx.moveTo(canvasPos.x, canvasPos.y);","         } else {","-          ctx.lineTo(x, y);","+          ctx.lineTo(canvasPos.x, canvasPos.y);","         }","       }","       ctx.stroke();"]},{"oldStart":971,"oldLines":17,"newStart":971,"newLines":16,"lines":["       // Draw points","       for (let i = 0; i < visiblePoints; i++) {","         const p = points[i];","-        const x = courtMargin + p.x * courtWidth;","-        const y = courtMargin + p.y * courtHeight;","+        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);"," ","         ctx.fillStyle = color;","         ctx.beginPath();","-        ctx.arc(x, y, 6, 0, Math.PI * 2);","+        ctx.arc(canvasPos.x, canvasPos.y, 6, 0, Math.PI * 2);","         ctx.fill();"," ","         ctx.fillStyle = '#ffffff';","         ctx.beginPath();","-        ctx.arc(x, y, 3, 0, Math.PI * 2);","+        ctx.arc(canvasPos.x, canvasPos.y, 3, 0, Math.PI * 2);","         ctx.fill();","       }","     };"]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"59b66fb8-a477-403f-a771-0461d4e66e11"}
{"parentUuid":"c1b9d81c-7308-4493-9bec-530538e24da7","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_013x6pZxW8dNH7QWJbupx7JP","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now let me update the todo list and proceed to update the 3D court rendering.","signature":"EvUBCkYICxgCKkD5kv8rts4BobDOISnem8P6M7XRbUVYdNAsVdd/5jSp6UOHeO8rrz25DUEFbsx0SMDUfmMRHbEKq+l7jzTNWb+ZEgyALe9aNQ08CnphlqYaDOHWhvtLmGuJNZsLTiIwD9fQLREw5S30g7ROOE/ffcc6KVRdFcrYyLM043yuhiNXzkk1NMYYune6EGSxvFeiKl3UCjl1KPIKyZYa53yvFmGmRzkyXDvSrPBsaCG+ADVyk9BrMEab8Q4DYN2VG68OwbWTyCWtsAo03+7HNH55VevJNUv6bbLOR2srLECQJlbWNKsYimlV6aq7tZjyxNsYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":1076,"cache_read_input_tokens":60818,"cache_creation":{"ephemeral_5m_input_tokens":1076,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CXT7F1sPPZ3RLnz3iEm3Y","type":"assistant","uuid":"99de3d6a-e98b-48c5-8aff-6976b06457f4","timestamp":"2026-01-24T23:57:05.326Z"}
{"parentUuid":"99de3d6a-e98b-48c5-8aff-6976b06457f4","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_013x6pZxW8dNH7QWJbupx7JP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0167Zfb4zoEXDXkGnfhEURxg","name":"TodoWrite","input":{"todos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"in_progress","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":1076,"cache_read_input_tokens":60818,"cache_creation":{"ephemeral_5m_input_tokens":1076,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CXT7F1sPPZ3RLnz3iEm3Y","type":"assistant","uuid":"0cc6bbc0-45a7-497e-ae09-c6e0d2470d1f","timestamp":"2026-01-24T23:57:06.943Z"}
{"parentUuid":"0cc6bbc0-45a7-497e-ae09-c6e0d2470d1f","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0167Zfb4zoEXDXkGnfhEURxg","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"65273579-f332-477a-9b5e-48f4b371fefc","timestamp":"2026-01-24T23:57:07.145Z","toolUseResult":{"oldTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"in_progress","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"pending","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}],"newTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"in_progress","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}]},"sourceToolAssistantUUID":"0cc6bbc0-45a7-497e-ae09-c6e0d2470d1f"}
{"parentUuid":"65273579-f332-477a-9b5e-48f4b371fefc","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Q11KANXnd7QKL6jABpf9tN","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I need to update the 3D court rendering component. Let me update `CourtTrajectory3D.tsx` to use the shared court spec and draw correct lines.","signature":"EroCCkYICxgCKkBUp3H0VgszUy7dljktehXSFBsuqsQ5mX3jZz7Fj/ayfI4yveUpslizG8j9GnDVKem04k2WF91tUw7ltIFHiJcfEgxbvKjjESfaC1/xhlsaDHAdEuS1zoo3xyTSEiIw3/+aoJfOUgPalP/sJjA+NQyWHeW45KNTZGzhEANPgkrt8HCxkl+sQRUQr30NOHjzKqEBHmbprivoanb9nC+IXg1WyrLGyh+/ErsCZB8ZAM2Szuw5lD/lupcLLVMNbUkIY1r66oQsjfD483tWrav9fgMeTA1738gRdAsblbOJh/qa5GD9zXbVbMMeAUJDJe2k41XjlbkppNAit4izJY4RPx91QQ8vgcEWzdRR1hQvSjhQ9COfDfFOnxDO0GYcJScRkv7Y57H0QZhT6yQdIEB6koVA5pQYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":278,"cache_read_input_tokens":61894,"cache_creation":{"ephemeral_5m_input_tokens":278,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT7FSQ24TabnoB84kFrN","type":"assistant","uuid":"16f6fdcb-18c3-423e-b235-7e7141b9e33d","timestamp":"2026-01-24T23:57:10.559Z"}
{"parentUuid":"16f6fdcb-18c3-423e-b235-7e7141b9e33d","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Q11KANXnd7QKL6jABpf9tN","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me update the 3D court rendering component."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":278,"cache_read_input_tokens":61894,"cache_creation":{"ephemeral_5m_input_tokens":278,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT7FSQ24TabnoB84kFrN","type":"assistant","uuid":"df65cb22-e14f-49ab-9106-c921d006e01f","timestamp":"2026-01-24T23:57:10.854Z"}
{"parentUuid":"df65cb22-e14f-49ab-9106-c921d006e01f","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Q11KANXnd7QKL6jABpf9tN","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01N31QJCrKq7tUvfgv4ei2gw","name":"Edit","input":{"replace_all":false,"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","old_string":"import { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Court dimensions (scaled to meters)\nconst COURT_LENGTH = 13.4; // meters\nconst COURT_WIDTH = 6.1;   // meters (doubles)\nconst SINGLES_WIDTH = 5.18;\nconst NET_HEIGHT = 1.55;   // meters at center\nconst SERVICE_LINE = 1.98; // meters from net","new_string":"import { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\nimport {\n  COURT_SPEC,\n  normalizedTo3D,\n} from '@/lib/courtSpec';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Use shared court spec for all dimensions\nconst COURT_LENGTH = COURT_SPEC.length;\nconst COURT_WIDTH = COURT_SPEC.width;\nconst SINGLES_WIDTH = COURT_SPEC.singlesWidth;\nconst NET_HEIGHT = COURT_SPEC.netHeightPosts;"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":278,"cache_read_input_tokens":61894,"cache_creation":{"ephemeral_5m_input_tokens":278,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT7FSQ24TabnoB84kFrN","type":"assistant","uuid":"ee7cc3b8-3660-4213-a6a4-f2c865612fb5","timestamp":"2026-01-24T23:57:19.070Z"}
{"type":"file-history-snapshot","messageId":"ee7cc3b8-3660-4213-a6a4-f2c865612fb5","snapshot":{"messageId":"f976949d-fc76-4c77-86e9-3bd6d5ec90b7","trackedFileBackups":{"rallycoach\\src\\lib\\courtSpec.ts":{"backupFileName":null,"version":1,"backupTime":"2026-01-24T23:56:02.737Z"},"rallycoach\\src\\app\\strategy\\page.tsx":{"backupFileName":"b46a24357b6f5579@v1","version":1,"backupTime":"2026-01-24T23:56:19.264Z"},"rallycoach\\src\\components\\CourtTrajectory3D.tsx":{"backupFileName":"cf5f5717e79ba117@v1","version":1,"backupTime":"2026-01-24T23:57:21.906Z"}},"timestamp":"2026-01-24T23:44:54.240Z"},"isSnapshotUpdate":true}
{"parentUuid":"ee7cc3b8-3660-4213-a6a4-f2c865612fb5","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01N31QJCrKq7tUvfgv4ei2gw","type":"tool_result","content":"The file c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx has been updated successfully."}]},"uuid":"4d820d96-4766-4f1f-8175-acbc2a5787bd","timestamp":"2026-01-24T23:57:21.943Z","toolUseResult":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","oldString":"import { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Court dimensions (scaled to meters)\nconst COURT_LENGTH = 13.4; // meters\nconst COURT_WIDTH = 6.1;   // meters (doubles)\nconst SINGLES_WIDTH = 5.18;\nconst NET_HEIGHT = 1.55;   // meters at center\nconst SERVICE_LINE = 1.98; // meters from net","newString":"import { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\nimport {\n  COURT_SPEC,\n  normalizedTo3D,\n} from '@/lib/courtSpec';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Use shared court spec for all dimensions\nconst COURT_LENGTH = COURT_SPEC.length;\nconst COURT_WIDTH = COURT_SPEC.width;\nconst SINGLES_WIDTH = COURT_SPEC.singlesWidth;\nconst NET_HEIGHT = COURT_SPEC.netHeightPosts;","originalFile":"'use client';\n\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Court dimensions (scaled to meters)\nconst COURT_LENGTH = 13.4; // meters\nconst COURT_WIDTH = 6.1;   // meters (doubles)\nconst SINGLES_WIDTH = 5.18;\nconst NET_HEIGHT = 1.55;   // meters at center\nconst SERVICE_LINE = 1.98; // meters from net\n\n// Pseudo-3D height curve based on shot type heuristic\nfunction calculateHeight(\n  startY: number,\n  endY: number,\n  t: number,\n  shotIndex: number\n): number {\n  // Determine shot type based on court position change\n  const deltaY = Math.abs(endY - startY);\n\n  // Higher arc for clears (long shots), lower for drives and drops\n  let maxHeight = 1.5; // Default medium height\n  if (deltaY > 0.5) {\n    // Long shot - clear\n    maxHeight = 3.5;\n  } else if (deltaY < 0.2) {\n    // Short shot - drop or net\n    maxHeight = 1.0;\n  }\n\n  // Parabolic arc with some variation\n  const arc = Math.sin(t * Math.PI);\n  return arc * maxHeight + 0.3; // Minimum height above net\n}\n\n// Ball component that follows trajectory - uses refs for smooth animation\nfunction Ball({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const progressRef = useRef(progress);\n\n  // Update progress ref\n  useEffect(() => {\n    progressRef.current = progress;\n  }, [progress]);\n\n  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert court coordinates to 3D\n    const x1 = (p1.x - 0.5) * COURT_WIDTH;\n    const z1 = (p1.y - 0.5) * COURT_LENGTH;\n    const x2 = (p2.x - 0.5) * COURT_WIDTH;\n    const z2 = (p2.y - 0.5) * COURT_LENGTH;\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(x1, x2, localT);\n    const z = THREE.MathUtils.lerp(z1, z2, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });\n\n  if (!show) return null;\n\n  return (\n    <mesh ref={meshRef}>\n      <sphereGeometry args={[0.1, 16, 16]} />\n      <meshStandardMaterial color={color} />\n    </mesh>\n  );\n}\n\n// Trajectory path visualization - uses memoization for performance\nfunction TrajectoryPath({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(\n          (p.x - 0.5) * COURT_WIDTH,\n          (nextP.x - 0.5) * COURT_WIDTH,\n          t\n        );\n        const z = THREE.MathUtils.lerp(\n          (p.y - 0.5) * COURT_LENGTH,\n          (nextP.y - 0.5) * COURT_LENGTH,\n          t\n        );\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);\n\n  if (!show || points.length < 2) return null;\n\n  return (\n    <Line\n      points={points}\n      color={color}\n      lineWidth={3}\n      dashed\n      dashSize={0.3}\n      gapSize={0.1}\n    />\n  );\n}\n\n// Court plane with lines\nfunction Court() {\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles boundary */}\n        <Line\n          points={[\n            [-SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [-SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, 0],\n            [COURT_WIDTH / 2, 0, 0],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Service lines */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, -SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center service line */}\n        <Line\n          points={[\n            [0, 0, -SERVICE_LINE],\n            [0, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}\n\n// Net\nfunction Net() {\n  return (\n    <group position={[0, NET_HEIGHT / 2, 0]}>\n      {/* Net posts */}\n      <mesh position={[-COURT_WIDTH / 2 - 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n      <mesh position={[COURT_WIDTH / 2 + 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n\n      {/* Net mesh (simplified) */}\n      <mesh>\n        <planeGeometry args={[COURT_WIDTH + 0.4, NET_HEIGHT]} />\n        <meshStandardMaterial\n          color=\"#ffffff\"\n          transparent\n          opacity={0.3}\n          side={THREE.DoubleSide}\n        />\n      </mesh>\n\n      {/* Top rope */}\n      <mesh position={[0, NET_HEIGHT / 2, 0]}>\n        <boxGeometry args={[COURT_WIDTH + 0.4, 0.02, 0.02]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n    </group>\n  );\n}\n\n// Animation controller component - handles time updates using refs to avoid stale closures\nfunction AnimationController({\n  isPlaying,\n  timeScale,\n  onProgressUpdate,\n  initialProgress,\n}: {\n  isPlaying: boolean;\n  timeScale: number;\n  onProgressUpdate: (progress: number) => void;\n  initialProgress: number;\n}) {\n  const progressRef = useRef(initialProgress);\n  const isPlayingRef = useRef(isPlaying);\n  const timeScaleRef = useRef(timeScale);\n\n  // Keep refs in sync with props\n  useEffect(() => {\n    isPlayingRef.current = isPlaying;\n  }, [isPlaying]);\n\n  useEffect(() => {\n    timeScaleRef.current = timeScale;\n  }, [timeScale]);\n\n  useEffect(() => {\n    progressRef.current = initialProgress;\n  }, [initialProgress]);\n\n  useFrame((state, delta) => {\n    if (!isPlayingRef.current) return;\n\n    // Update progress based on delta time and timeScale\n    // Full loop is 10 seconds at 1x speed\n    const increment = (delta * timeScaleRef.current) / 10;\n    progressRef.current += increment;\n\n    // Loop back to start\n    if (progressRef.current >= 1) {\n      progressRef.current = 0;\n    }\n\n    // Notify parent (throttled to avoid excessive updates)\n    onProgressUpdate(progressRef.current);\n  });\n\n  return null;\n}\n\n// Main 3D Scene\nfunction Scene({\n  originalTrajectory,\n  refinedTrajectory,\n  showOriginal,\n  showRefined,\n  animationProgress,\n  isPlaying,\n  timeScale = 1,\n}: CourtTrajectory3DProps) {\n  // Local progress state for smooth animation\n  const [localProgress, setLocalProgress] = useState(animationProgress);\n\n  // Sync with external progress when it changes significantly\n  useEffect(() => {\n    const diff = Math.abs(localProgress - animationProgress);\n    if (diff > 0.1 || !isPlaying) {\n      setLocalProgress(animationProgress);\n    }\n  }, [animationProgress, isPlaying, localProgress]);\n\n  return (\n    <>\n      {/* Animation Controller - manages time updates without causing re-renders */}\n      <AnimationController\n        isPlaying={isPlaying}\n        timeScale={timeScale}\n        onProgressUpdate={setLocalProgress}\n        initialProgress={animationProgress}\n      />\n\n      {/* Lighting */}\n      <ambientLight intensity={0.6} />\n      <directionalLight position={[10, 10, 5]} intensity={0.8} />\n      <directionalLight position={[-10, 10, -5]} intensity={0.4} />\n\n      {/* Court */}\n      <Court />\n\n      {/* Net */}\n      <Net />\n\n      {/* Trajectories */}\n      <TrajectoryPath\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <TrajectoryPath\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Balls */}\n      <Ball\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <Ball\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Camera controls */}\n      <OrbitControls\n        enablePan={true}\n        enableZoom={true}\n        enableRotate={true}\n        minDistance={5}\n        maxDistance={25}\n        target={[0, 1, 0]}\n      />\n    </>\n  );\n}\n\n// Error boundary wrapper to prevent blank screens\nfunction ErrorFallback() {\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n      <div className=\"text-center text-white\">\n        <p className=\"text-lg font-medium mb-2\">3D View Unavailable</p>\n        <p className=\"text-sm text-gray-400\">Please try switching to 2D view</p>\n      </div>\n    </div>\n  );\n}\n\n// Export the main component with error handling\nexport default function CourtTrajectory3D(props: CourtTrajectory3DProps) {\n  const [hasError, setHasError] = useState(false);\n\n  // Reset error state when props change\n  useEffect(() => {\n    setHasError(false);\n  }, [props.showOriginal, props.showRefined]);\n\n  if (hasError) {\n    return <ErrorFallback />;\n  }\n\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg overflow-hidden\">\n      <Canvas\n        camera={{\n          position: [0, 10, 12],\n          fov: 50,\n          near: 0.1,\n          far: 100,\n        }}\n        onCreated={(state) => {\n          // Ensure proper WebGL context handling\n          state.gl.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        }}\n        onError={() => setHasError(true)}\n      >\n        <Scene {...props} />\n      </Canvas>\n    </div>\n  );\n}\n","structuredPatch":[{"oldStart":5,"oldLines":6,"newStart":5,"newLines":10,"lines":[" import { OrbitControls, Text, Line } from '@react-three/drei';"," import * as THREE from 'three';"," import type { TrajectoryPoint } from '@/lib/types';","+import {","+  COURT_SPEC,","+  normalizedTo3D,","+} from '@/lib/courtSpec';"," "," // ============================================"," // PHASE 4: 3D Court Visualization with Playback Engine Integration"]},{"oldStart":20,"oldLines":12,"newStart":24,"newLines":11,"lines":["   timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2"," }"," ","-// Court dimensions (scaled to meters)","-const COURT_LENGTH = 13.4; // meters","-const COURT_WIDTH = 6.1;   // meters (doubles)","-const SINGLES_WIDTH = 5.18;","-const NET_HEIGHT = 1.55;   // meters at center","-const SERVICE_LINE = 1.98; // meters from net","+// Use shared court spec for all dimensions","+const COURT_LENGTH = COURT_SPEC.length;","+const COURT_WIDTH = COURT_SPEC.width;","+const SINGLES_WIDTH = COURT_SPEC.singlesWidth;","+const NET_HEIGHT = COURT_SPEC.netHeightPosts;"," "," // Pseudo-3D height curve based on shot type heuristic"," function calculateHeight("]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"ee7cc3b8-3660-4213-a6a4-f2c865612fb5"}
{"parentUuid":"4d820d96-4766-4f1f-8175-acbc2a5787bd","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01RVM4PxtuaxTdwQH3qE5tSn","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I need to update the Court component to draw the correct badminton court lines. The 3D coordinate system has:\n- Origin at court center\n- X: left-right (negative = left, positive = right)\n- Z: near-far (negative = near/bottom, positive = far/top)\n- Y: height (up)\n\nSo I need to convert the meter-based positions to this centered coordinate system.","signature":"EoIECkYICxgCKkAylr63MVNplbIloEXKFCKzvAufzWWJnZBolRjy8zG/ZT+F6ENSjg2gIJ1nUoVTem0MVDvJqTJpmwInUIl9477iEgzB1xq7zjorEZJxGyIaDGMXXHKdVimBhO74qSIwWCzUd4qYB6RrxTUo08EpQNY160FJQvlRoij5lzOoLpo0JiIYeFLJluBA1LmtqrnWKukCZ8I3stph0Nzx4N+ePXfGMEZnAV3FU16Lr18BS+3gO61r/acapUt4HxRU59HXupVMVqOeBfbgonTDwFB1oNqeFMlQZja73rKXEhXsHO08CnsgnZT9EfpKN8lHkFPTecIL7kAMDhxWqYrTsLGuVsttuY2YclBgv/VGN176ZX6IWGToZLngysaOR8KuCAVAksV+6PrRD9muK7wTJsxn7BXoxy4wiaTJx2xnTr1dpYZZQ3op64WjX7isARaiE48F/MO3Tfl/Z8Up8h0xaOdzdidlw/kb8Miuj7PT9YCHAw4HsUgvBYBnIKPKMhPJVFDIFKX4D+ly04ROY8yQpyGMgbwSSRIIVN/prLvQKkNED7oPTKi2ETA8MSem/ee8pOMZSdVOgy95LfWm0VMYfs+lsGalBrISOtrxjhTYQnUqmq8C9/Ap1rUjdsVxFlx7w5THPJnuuVQ5UYE4QG+aSQlRDVi8D0G8SSfYkuYX4RgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":863,"cache_read_input_tokens":62172,"cache_creation":{"ephemeral_5m_input_tokens":863,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7GcwJWXoLPrgUDjU2z","type":"assistant","uuid":"80e1a1fc-f0ba-45b9-b0c0-fe68bebebe26","timestamp":"2026-01-24T23:57:27.913Z"}
{"parentUuid":"80e1a1fc-f0ba-45b9-b0c0-fe68bebebe26","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01RVM4PxtuaxTdwQH3qE5tSn","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me update the Court component with the correct badminton court lines."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":863,"cache_read_input_tokens":62172,"cache_creation":{"ephemeral_5m_input_tokens":863,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7GcwJWXoLPrgUDjU2z","type":"assistant","uuid":"c273bc7a-bd8a-4953-9492-57ead320ea14","timestamp":"2026-01-24T23:57:28.182Z"}
{"parentUuid":"c273bc7a-bd8a-4953-9492-57ead320ea14","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01RVM4PxtuaxTdwQH3qE5tSn","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01WiPBc2HQRUcAKQbaHpiqmr","name":"Edit","input":{"replace_all":false,"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","old_string":"// Court plane with lines\nfunction Court() {\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles boundary */}\n        <Line\n          points={[\n            [-SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [-SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, 0],\n            [COURT_WIDTH / 2, 0, 0],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Service lines */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, -SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center service line */}\n        <Line\n          points={[\n            [0, 0, -SERVICE_LINE],\n            [0, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}","new_string":"// Court plane with lines - BWF standard badminton court\nfunction Court() {\n  // Helper to convert court meters (0,0 at bottom-left) to 3D scene coords (centered)\n  const toScene = (meterX: number, meterY: number): [number, number, number] => {\n    return [\n      meterX - COURT_WIDTH / 2,  // X: centered\n      0,                          // Y: at ground level\n      meterY - COURT_LENGTH / 2, // Z: centered (Y meter = Z scene)\n    ];\n  };\n\n  // Key positions in meters\n  const halfW = COURT_WIDTH;\n  const halfL = COURT_LENGTH;\n  const singlesLeft = COURT_SPEC.singlesLeftX;\n  const singlesRight = COURT_SPEC.singlesRightX;\n  const netY = COURT_SPEC.netY;\n  const nearShortService = COURT_SPEC.nearShortServiceY;\n  const farShortService = COURT_SPEC.farShortServiceY;\n  const nearLongService = COURT_SPEC.nearLongServiceY;\n  const farLongService = COURT_SPEC.farLongServiceY;\n  const centerX = COURT_SPEC.centerX;\n\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary (doubles court) */}\n        <Line\n          points={[\n            toScene(0, 0),\n            toScene(halfW, 0),\n            toScene(halfW, halfL),\n            toScene(0, halfL),\n            toScene(0, 0),\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles sidelines */}\n        <Line\n          points={[toScene(singlesLeft, 0), toScene(singlesLeft, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(singlesRight, 0), toScene(singlesRight, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Net line (horizontal across center) */}\n        <Line\n          points={[toScene(0, netY), toScene(halfW, netY)]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Short service lines */}\n        <Line\n          points={[toScene(0, nearShortService), toScene(halfW, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farShortService), toScene(halfW, farShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Doubles long service lines */}\n        <Line\n          points={[toScene(0, nearLongService), toScene(halfW, nearLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farLongService), toScene(halfW, farLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line - only in service box areas */}\n        {/* Near side: from baseline (y=0) to near short service line */}\n        <Line\n          points={[toScene(centerX, 0), toScene(centerX, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        {/* Far side: from far short service line to far baseline */}\n        <Line\n          points={[toScene(centerX, farShortService), toScene(centerX, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":863,"cache_read_input_tokens":62172,"cache_creation":{"ephemeral_5m_input_tokens":863,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXT7GcwJWXoLPrgUDjU2z","type":"assistant","uuid":"7dbc4876-1736-433b-8412-7f470941e6d3","timestamp":"2026-01-24T23:57:45.226Z"}
{"parentUuid":"7dbc4876-1736-433b-8412-7f470941e6d3","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01WiPBc2HQRUcAKQbaHpiqmr","type":"tool_result","content":"The file c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx has been updated successfully."}]},"uuid":"ef570693-afe9-4b27-a82a-b0443890127d","timestamp":"2026-01-24T23:57:46.253Z","toolUseResult":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","oldString":"// Court plane with lines\nfunction Court() {\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles boundary */}\n        <Line\n          points={[\n            [-SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [-SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, 0],\n            [COURT_WIDTH / 2, 0, 0],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Service lines */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, -SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center service line */}\n        <Line\n          points={[\n            [0, 0, -SERVICE_LINE],\n            [0, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}","newString":"// Court plane with lines - BWF standard badminton court\nfunction Court() {\n  // Helper to convert court meters (0,0 at bottom-left) to 3D scene coords (centered)\n  const toScene = (meterX: number, meterY: number): [number, number, number] => {\n    return [\n      meterX - COURT_WIDTH / 2,  // X: centered\n      0,                          // Y: at ground level\n      meterY - COURT_LENGTH / 2, // Z: centered (Y meter = Z scene)\n    ];\n  };\n\n  // Key positions in meters\n  const halfW = COURT_WIDTH;\n  const halfL = COURT_LENGTH;\n  const singlesLeft = COURT_SPEC.singlesLeftX;\n  const singlesRight = COURT_SPEC.singlesRightX;\n  const netY = COURT_SPEC.netY;\n  const nearShortService = COURT_SPEC.nearShortServiceY;\n  const farShortService = COURT_SPEC.farShortServiceY;\n  const nearLongService = COURT_SPEC.nearLongServiceY;\n  const farLongService = COURT_SPEC.farLongServiceY;\n  const centerX = COURT_SPEC.centerX;\n\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary (doubles court) */}\n        <Line\n          points={[\n            toScene(0, 0),\n            toScene(halfW, 0),\n            toScene(halfW, halfL),\n            toScene(0, halfL),\n            toScene(0, 0),\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles sidelines */}\n        <Line\n          points={[toScene(singlesLeft, 0), toScene(singlesLeft, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(singlesRight, 0), toScene(singlesRight, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Net line (horizontal across center) */}\n        <Line\n          points={[toScene(0, netY), toScene(halfW, netY)]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Short service lines */}\n        <Line\n          points={[toScene(0, nearShortService), toScene(halfW, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farShortService), toScene(halfW, farShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Doubles long service lines */}\n        <Line\n          points={[toScene(0, nearLongService), toScene(halfW, nearLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farLongService), toScene(halfW, farLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line - only in service box areas */}\n        {/* Near side: from baseline (y=0) to near short service line */}\n        <Line\n          points={[toScene(centerX, 0), toScene(centerX, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        {/* Far side: from far short service line to far baseline */}\n        <Line\n          points={[toScene(centerX, farShortService), toScene(centerX, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}","originalFile":"'use client';\n\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\nimport {\n  COURT_SPEC,\n  normalizedTo3D,\n} from '@/lib/courtSpec';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Use shared court spec for all dimensions\nconst COURT_LENGTH = COURT_SPEC.length;\nconst COURT_WIDTH = COURT_SPEC.width;\nconst SINGLES_WIDTH = COURT_SPEC.singlesWidth;\nconst NET_HEIGHT = COURT_SPEC.netHeightPosts;\n\n// Pseudo-3D height curve based on shot type heuristic\nfunction calculateHeight(\n  startY: number,\n  endY: number,\n  t: number,\n  shotIndex: number\n): number {\n  // Determine shot type based on court position change\n  const deltaY = Math.abs(endY - startY);\n\n  // Higher arc for clears (long shots), lower for drives and drops\n  let maxHeight = 1.5; // Default medium height\n  if (deltaY > 0.5) {\n    // Long shot - clear\n    maxHeight = 3.5;\n  } else if (deltaY < 0.2) {\n    // Short shot - drop or net\n    maxHeight = 1.0;\n  }\n\n  // Parabolic arc with some variation\n  const arc = Math.sin(t * Math.PI);\n  return arc * maxHeight + 0.3; // Minimum height above net\n}\n\n// Ball component that follows trajectory - uses refs for smooth animation\nfunction Ball({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const progressRef = useRef(progress);\n\n  // Update progress ref\n  useEffect(() => {\n    progressRef.current = progress;\n  }, [progress]);\n\n  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert court coordinates to 3D\n    const x1 = (p1.x - 0.5) * COURT_WIDTH;\n    const z1 = (p1.y - 0.5) * COURT_LENGTH;\n    const x2 = (p2.x - 0.5) * COURT_WIDTH;\n    const z2 = (p2.y - 0.5) * COURT_LENGTH;\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(x1, x2, localT);\n    const z = THREE.MathUtils.lerp(z1, z2, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });\n\n  if (!show) return null;\n\n  return (\n    <mesh ref={meshRef}>\n      <sphereGeometry args={[0.1, 16, 16]} />\n      <meshStandardMaterial color={color} />\n    </mesh>\n  );\n}\n\n// Trajectory path visualization - uses memoization for performance\nfunction TrajectoryPath({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(\n          (p.x - 0.5) * COURT_WIDTH,\n          (nextP.x - 0.5) * COURT_WIDTH,\n          t\n        );\n        const z = THREE.MathUtils.lerp(\n          (p.y - 0.5) * COURT_LENGTH,\n          (nextP.y - 0.5) * COURT_LENGTH,\n          t\n        );\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);\n\n  if (!show || points.length < 2) return null;\n\n  return (\n    <Line\n      points={points}\n      color={color}\n      lineWidth={3}\n      dashed\n      dashSize={0.3}\n      gapSize={0.1}\n    />\n  );\n}\n\n// Court plane with lines\nfunction Court() {\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, COURT_LENGTH / 2],\n            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles boundary */}\n        <Line\n          points={[\n            [-SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [-SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],\n            [SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, 0],\n            [COURT_WIDTH / 2, 0, 0],\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Service lines */}\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, -SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, -SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[\n            [-COURT_WIDTH / 2, 0, SERVICE_LINE],\n            [COURT_WIDTH / 2, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center service line */}\n        <Line\n          points={[\n            [0, 0, -SERVICE_LINE],\n            [0, 0, SERVICE_LINE],\n          ]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}\n\n// Net\nfunction Net() {\n  return (\n    <group position={[0, NET_HEIGHT / 2, 0]}>\n      {/* Net posts */}\n      <mesh position={[-COURT_WIDTH / 2 - 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n      <mesh position={[COURT_WIDTH / 2 + 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n\n      {/* Net mesh (simplified) */}\n      <mesh>\n        <planeGeometry args={[COURT_WIDTH + 0.4, NET_HEIGHT]} />\n        <meshStandardMaterial\n          color=\"#ffffff\"\n          transparent\n          opacity={0.3}\n          side={THREE.DoubleSide}\n        />\n      </mesh>\n\n      {/* Top rope */}\n      <mesh position={[0, NET_HEIGHT / 2, 0]}>\n        <boxGeometry args={[COURT_WIDTH + 0.4, 0.02, 0.02]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n    </group>\n  );\n}\n\n// Animation controller component - handles time updates using refs to avoid stale closures\nfunction AnimationController({\n  isPlaying,\n  timeScale,\n  onProgressUpdate,\n  initialProgress,\n}: {\n  isPlaying: boolean;\n  timeScale: number;\n  onProgressUpdate: (progress: number) => void;\n  initialProgress: number;\n}) {\n  const progressRef = useRef(initialProgress);\n  const isPlayingRef = useRef(isPlaying);\n  const timeScaleRef = useRef(timeScale);\n\n  // Keep refs in sync with props\n  useEffect(() => {\n    isPlayingRef.current = isPlaying;\n  }, [isPlaying]);\n\n  useEffect(() => {\n    timeScaleRef.current = timeScale;\n  }, [timeScale]);\n\n  useEffect(() => {\n    progressRef.current = initialProgress;\n  }, [initialProgress]);\n\n  useFrame((state, delta) => {\n    if (!isPlayingRef.current) return;\n\n    // Update progress based on delta time and timeScale\n    // Full loop is 10 seconds at 1x speed\n    const increment = (delta * timeScaleRef.current) / 10;\n    progressRef.current += increment;\n\n    // Loop back to start\n    if (progressRef.current >= 1) {\n      progressRef.current = 0;\n    }\n\n    // Notify parent (throttled to avoid excessive updates)\n    onProgressUpdate(progressRef.current);\n  });\n\n  return null;\n}\n\n// Main 3D Scene\nfunction Scene({\n  originalTrajectory,\n  refinedTrajectory,\n  showOriginal,\n  showRefined,\n  animationProgress,\n  isPlaying,\n  timeScale = 1,\n}: CourtTrajectory3DProps) {\n  // Local progress state for smooth animation\n  const [localProgress, setLocalProgress] = useState(animationProgress);\n\n  // Sync with external progress when it changes significantly\n  useEffect(() => {\n    const diff = Math.abs(localProgress - animationProgress);\n    if (diff > 0.1 || !isPlaying) {\n      setLocalProgress(animationProgress);\n    }\n  }, [animationProgress, isPlaying, localProgress]);\n\n  return (\n    <>\n      {/* Animation Controller - manages time updates without causing re-renders */}\n      <AnimationController\n        isPlaying={isPlaying}\n        timeScale={timeScale}\n        onProgressUpdate={setLocalProgress}\n        initialProgress={animationProgress}\n      />\n\n      {/* Lighting */}\n      <ambientLight intensity={0.6} />\n      <directionalLight position={[10, 10, 5]} intensity={0.8} />\n      <directionalLight position={[-10, 10, -5]} intensity={0.4} />\n\n      {/* Court */}\n      <Court />\n\n      {/* Net */}\n      <Net />\n\n      {/* Trajectories */}\n      <TrajectoryPath\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <TrajectoryPath\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Balls */}\n      <Ball\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <Ball\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Camera controls */}\n      <OrbitControls\n        enablePan={true}\n        enableZoom={true}\n        enableRotate={true}\n        minDistance={5}\n        maxDistance={25}\n        target={[0, 1, 0]}\n      />\n    </>\n  );\n}\n\n// Error boundary wrapper to prevent blank screens\nfunction ErrorFallback() {\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n      <div className=\"text-center text-white\">\n        <p className=\"text-lg font-medium mb-2\">3D View Unavailable</p>\n        <p className=\"text-sm text-gray-400\">Please try switching to 2D view</p>\n      </div>\n    </div>\n  );\n}\n\n// Export the main component with error handling\nexport default function CourtTrajectory3D(props: CourtTrajectory3DProps) {\n  const [hasError, setHasError] = useState(false);\n\n  // Reset error state when props change\n  useEffect(() => {\n    setHasError(false);\n  }, [props.showOriginal, props.showRefined]);\n\n  if (hasError) {\n    return <ErrorFallback />;\n  }\n\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg overflow-hidden\">\n      <Canvas\n        camera={{\n          position: [0, 10, 12],\n          fov: 50,\n          near: 0.1,\n          far: 100,\n        }}\n        onCreated={(state) => {\n          // Ensure proper WebGL context handling\n          state.gl.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        }}\n        onError={() => setHasError(true)}\n      >\n        <Scene {...props} />\n      </Canvas>\n    </div>\n  );\n}\n","structuredPatch":[{"oldStart":172,"oldLines":8,"newStart":172,"newLines":29,"lines":["   );"," }"," ","-// Court plane with lines","+// Court plane with lines - BWF standard badminton court"," function Court() {","+  // Helper to convert court meters (0,0 at bottom-left) to 3D scene coords (centered)","+  const toScene = (meterX: number, meterY: number): [number, number, number] => {","+    return [","+      meterX - COURT_WIDTH / 2,  // X: centered","+      0,                          // Y: at ground level","+      meterY - COURT_LENGTH / 2, // Z: centered (Y meter = Z scene)","+    ];","+  };","+","+  // Key positions in meters","+  const halfW = COURT_WIDTH;","+  const halfL = COURT_LENGTH;","+  const singlesLeft = COURT_SPEC.singlesLeftX;","+  const singlesRight = COURT_SPEC.singlesRightX;","+  const netY = COURT_SPEC.netY;","+  const nearShortService = COURT_SPEC.nearShortServiceY;","+  const farShortService = COURT_SPEC.farShortServiceY;","+  const nearLongService = COURT_SPEC.nearLongServiceY;","+  const farLongService = COURT_SPEC.farLongServiceY;","+  const centerX = COURT_SPEC.centerX;","+","   return (","     <group>","       {/* Court surface */}"]},{"oldStart":184,"oldLines":74,"newStart":205,"newLines":75,"lines":[" ","       {/* Court lines */}","       <group position={[0, 0.01, 0]}>","-        {/* Outer boundary */}","+        {/* Outer boundary (doubles court) */}","         <Line","           points={[","-            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],","-            [COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],","-            [COURT_WIDTH / 2, 0, COURT_LENGTH / 2],","-            [-COURT_WIDTH / 2, 0, COURT_LENGTH / 2],","-            [-COURT_WIDTH / 2, 0, -COURT_LENGTH / 2],","+            toScene(0, 0),","+            toScene(halfW, 0),","+            toScene(halfW, halfL),","+            toScene(0, halfL),","+            toScene(0, 0),","           ]}","           color=\"white\"","           lineWidth={2}","         />"," ","-        {/* Singles boundary */}","+        {/* Singles sidelines */}","         <Line","-          points={[","-            [-SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],","-            [-SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],","-          ]}","+          points={[toScene(singlesLeft, 0), toScene(singlesLeft, halfL)]}","           color=\"white\"","           lineWidth={1}","         />","         <Line","-          points={[","-            [SINGLES_WIDTH / 2, 0, -COURT_LENGTH / 2],","-            [SINGLES_WIDTH / 2, 0, COURT_LENGTH / 2],","-          ]}","+          points={[toScene(singlesRight, 0), toScene(singlesRight, halfL)]}","           color=\"white\"","           lineWidth={1}","         />"," ","-        {/* Center line */}","+        {/* Net line (horizontal across center) */}","         <Line","-          points={[","-            [-COURT_WIDTH / 2, 0, 0],","-            [COURT_WIDTH / 2, 0, 0],","-          ]}","+          points={[toScene(0, netY), toScene(halfW, netY)]}","           color=\"white\"","           lineWidth={2}","         />"," ","-        {/* Service lines */}","+        {/* Short service lines */}","         <Line","-          points={[","-            [-COURT_WIDTH / 2, 0, -SERVICE_LINE],","-            [COURT_WIDTH / 2, 0, -SERVICE_LINE],","-          ]}","+          points={[toScene(0, nearShortService), toScene(halfW, nearShortService)]}","           color=\"white\"","           lineWidth={1}","         />","         <Line","-          points={[","-            [-COURT_WIDTH / 2, 0, SERVICE_LINE],","-            [COURT_WIDTH / 2, 0, SERVICE_LINE],","-          ]}","+          points={[toScene(0, farShortService), toScene(halfW, farShortService)]}","           color=\"white\"","           lineWidth={1}","         />"," ","-        {/* Center service line */}","+        {/* Doubles long service lines */}","         <Line","-          points={[","-            [0, 0, -SERVICE_LINE],","-            [0, 0, SERVICE_LINE],","-          ]}","+          points={[toScene(0, nearLongService), toScene(halfW, nearLongService)]}","           color=\"white\"","           lineWidth={1}","         />","+        <Line","+          points={[toScene(0, farLongService), toScene(halfW, farLongService)]}","+          color=\"white\"","+          lineWidth={1}","+        />","+","+        {/* Center line - only in service box areas */}","+        {/* Near side: from baseline (y=0) to near short service line */}","+        <Line","+          points={[toScene(centerX, 0), toScene(centerX, nearShortService)]}","+          color=\"white\"","+          lineWidth={1}","+        />","+        {/* Far side: from far short service line to far baseline */}","+        <Line","+          points={[toScene(centerX, farShortService), toScene(centerX, halfL)]}","+          color=\"white\"","+          lineWidth={1}","+        />","       </group>","     </group>","   );"]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"7dbc4876-1736-433b-8412-7f470941e6d3"}
{"parentUuid":"ef570693-afe9-4b27-a82a-b0443890127d","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Y7PFqZD51sTs5a3twifW5M","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I need to update the Ball and TrajectoryPath components to use the shared coordinate conversion function from the court spec. The current code uses hardcoded formulas. Let me update them to use `normalizedTo3D`.","signature":"EoADCkYICxgCKkDcVoJnGpmHDqiPI0cQFQ8NP9/8FL+C7t603hY3g82M5sGeDQkZ8Vlgv75NytZOWEMEQZl6I4Dr/1u3loJrQtdxEgxS6SEhHBa3IB207M8aDIKcwt7xBysEQDINFiIwfRWdSV26vOrTGbCNzdSDmr097w+wh9fWLlOBAnx6pWtjDzOppRKAiVfSgycw9W7IKucBrgyi1e4mkqBSc7KkmDcXuBKBsARCBaBjAWjnF5Gl1aq8E1OQ/pcOB31upZPAaOpBXmLfbvcy3n13NrtH6M1R8f+YBk5hR67/UG+6caRRTtbiUqgMeZKFlbFQYgZnNJAWCj5Zcm0mqyuyB7pS+1KHcEHOUN+mfvhfOEIygQKwjeSH2YeiAu7tpgxMcV1JyyjZiZi1W1q4L/w3Dm3wmckv2ZBVx6KXB2MNPPOOzyFfJXhSf8L44tVd4tX1s0VQne63cJUwUSVuKo9RRTetb45U1/5aqthMoD/sMY5WfKs3Wp6BXI+9C9KcGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":2105,"cache_read_input_tokens":63035,"cache_creation":{"ephemeral_5m_input_tokens":2105,"ephemeral_1h_input_tokens":0},"output_tokens":7,"service_tier":"standard"}},"requestId":"req_011CXT7JN9N27RWAwwAgeErg","type":"assistant","uuid":"c71e49ec-c6c6-4756-aa16-070e5cf7468d","timestamp":"2026-01-24T23:57:50.437Z"}
{"parentUuid":"c71e49ec-c6c6-4756-aa16-070e5cf7468d","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Y7PFqZD51sTs5a3twifW5M","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me update the Ball and TrajectoryPath components to use the shared coordinate conversion."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":2105,"cache_read_input_tokens":63035,"cache_creation":{"ephemeral_5m_input_tokens":2105,"ephemeral_1h_input_tokens":0},"output_tokens":7,"service_tier":"standard"}},"requestId":"req_011CXT7JN9N27RWAwwAgeErg","type":"assistant","uuid":"b1d44440-5439-472c-ad11-e9cb1c2235f3","timestamp":"2026-01-24T23:57:50.721Z"}
{"parentUuid":"b1d44440-5439-472c-ad11-e9cb1c2235f3","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Y7PFqZD51sTs5a3twifW5M","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011pZbmhcTK4TE6HJSDDmuA4","name":"Edit","input":{"replace_all":false,"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","old_string":"  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert court coordinates to 3D\n    const x1 = (p1.x - 0.5) * COURT_WIDTH;\n    const z1 = (p1.y - 0.5) * COURT_LENGTH;\n    const x2 = (p2.x - 0.5) * COURT_WIDTH;\n    const z2 = (p2.y - 0.5) * COURT_LENGTH;\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(x1, x2, localT);\n    const z = THREE.MathUtils.lerp(z1, z2, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });","new_string":"  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert normalized coordinates to 3D scene coordinates\n    const pos1 = normalizedTo3D(p1.x, p1.y);\n    const pos2 = normalizedTo3D(p2.x, p2.y);\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(pos1.x, pos2.x, localT);\n    const z = THREE.MathUtils.lerp(pos1.z, pos2.z, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":2105,"cache_read_input_tokens":63035,"cache_creation":{"ephemeral_5m_input_tokens":2105,"ephemeral_1h_input_tokens":0},"output_tokens":7,"service_tier":"standard"}},"requestId":"req_011CXT7JN9N27RWAwwAgeErg","type":"assistant","uuid":"42c2cad2-5e55-4113-8865-d1f8e9e953dc","timestamp":"2026-01-24T23:57:57.734Z"}
{"parentUuid":"42c2cad2-5e55-4113-8865-d1f8e9e953dc","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011pZbmhcTK4TE6HJSDDmuA4","type":"tool_result","content":"The file c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx has been updated successfully."}]},"uuid":"052ea291-37a5-4633-8215-f72697596bb4","timestamp":"2026-01-24T23:57:58.902Z","toolUseResult":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","oldString":"  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert court coordinates to 3D\n    const x1 = (p1.x - 0.5) * COURT_WIDTH;\n    const z1 = (p1.y - 0.5) * COURT_LENGTH;\n    const x2 = (p2.x - 0.5) * COURT_WIDTH;\n    const z2 = (p2.y - 0.5) * COURT_LENGTH;\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(x1, x2, localT);\n    const z = THREE.MathUtils.lerp(z1, z2, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });","newString":"  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert normalized coordinates to 3D scene coordinates\n    const pos1 = normalizedTo3D(p1.x, p1.y);\n    const pos2 = normalizedTo3D(p2.x, p2.y);\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(pos1.x, pos2.x, localT);\n    const z = THREE.MathUtils.lerp(pos1.z, pos2.z, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });","originalFile":"'use client';\n\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\nimport {\n  COURT_SPEC,\n  normalizedTo3D,\n} from '@/lib/courtSpec';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Use shared court spec for all dimensions\nconst COURT_LENGTH = COURT_SPEC.length;\nconst COURT_WIDTH = COURT_SPEC.width;\nconst SINGLES_WIDTH = COURT_SPEC.singlesWidth;\nconst NET_HEIGHT = COURT_SPEC.netHeightPosts;\n\n// Pseudo-3D height curve based on shot type heuristic\nfunction calculateHeight(\n  startY: number,\n  endY: number,\n  t: number,\n  shotIndex: number\n): number {\n  // Determine shot type based on court position change\n  const deltaY = Math.abs(endY - startY);\n\n  // Higher arc for clears (long shots), lower for drives and drops\n  let maxHeight = 1.5; // Default medium height\n  if (deltaY > 0.5) {\n    // Long shot - clear\n    maxHeight = 3.5;\n  } else if (deltaY < 0.2) {\n    // Short shot - drop or net\n    maxHeight = 1.0;\n  }\n\n  // Parabolic arc with some variation\n  const arc = Math.sin(t * Math.PI);\n  return arc * maxHeight + 0.3; // Minimum height above net\n}\n\n// Ball component that follows trajectory - uses refs for smooth animation\nfunction Ball({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const progressRef = useRef(progress);\n\n  // Update progress ref\n  useEffect(() => {\n    progressRef.current = progress;\n  }, [progress]);\n\n  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert court coordinates to 3D\n    const x1 = (p1.x - 0.5) * COURT_WIDTH;\n    const z1 = (p1.y - 0.5) * COURT_LENGTH;\n    const x2 = (p2.x - 0.5) * COURT_WIDTH;\n    const z2 = (p2.y - 0.5) * COURT_LENGTH;\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(x1, x2, localT);\n    const z = THREE.MathUtils.lerp(z1, z2, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });\n\n  if (!show) return null;\n\n  return (\n    <mesh ref={meshRef}>\n      <sphereGeometry args={[0.1, 16, 16]} />\n      <meshStandardMaterial color={color} />\n    </mesh>\n  );\n}\n\n// Trajectory path visualization - uses memoization for performance\nfunction TrajectoryPath({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(\n          (p.x - 0.5) * COURT_WIDTH,\n          (nextP.x - 0.5) * COURT_WIDTH,\n          t\n        );\n        const z = THREE.MathUtils.lerp(\n          (p.y - 0.5) * COURT_LENGTH,\n          (nextP.y - 0.5) * COURT_LENGTH,\n          t\n        );\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);\n\n  if (!show || points.length < 2) return null;\n\n  return (\n    <Line\n      points={points}\n      color={color}\n      lineWidth={3}\n      dashed\n      dashSize={0.3}\n      gapSize={0.1}\n    />\n  );\n}\n\n// Court plane with lines - BWF standard badminton court\nfunction Court() {\n  // Helper to convert court meters (0,0 at bottom-left) to 3D scene coords (centered)\n  const toScene = (meterX: number, meterY: number): [number, number, number] => {\n    return [\n      meterX - COURT_WIDTH / 2,  // X: centered\n      0,                          // Y: at ground level\n      meterY - COURT_LENGTH / 2, // Z: centered (Y meter = Z scene)\n    ];\n  };\n\n  // Key positions in meters\n  const halfW = COURT_WIDTH;\n  const halfL = COURT_LENGTH;\n  const singlesLeft = COURT_SPEC.singlesLeftX;\n  const singlesRight = COURT_SPEC.singlesRightX;\n  const netY = COURT_SPEC.netY;\n  const nearShortService = COURT_SPEC.nearShortServiceY;\n  const farShortService = COURT_SPEC.farShortServiceY;\n  const nearLongService = COURT_SPEC.nearLongServiceY;\n  const farLongService = COURT_SPEC.farLongServiceY;\n  const centerX = COURT_SPEC.centerX;\n\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary (doubles court) */}\n        <Line\n          points={[\n            toScene(0, 0),\n            toScene(halfW, 0),\n            toScene(halfW, halfL),\n            toScene(0, halfL),\n            toScene(0, 0),\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles sidelines */}\n        <Line\n          points={[toScene(singlesLeft, 0), toScene(singlesLeft, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(singlesRight, 0), toScene(singlesRight, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Net line (horizontal across center) */}\n        <Line\n          points={[toScene(0, netY), toScene(halfW, netY)]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Short service lines */}\n        <Line\n          points={[toScene(0, nearShortService), toScene(halfW, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farShortService), toScene(halfW, farShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Doubles long service lines */}\n        <Line\n          points={[toScene(0, nearLongService), toScene(halfW, nearLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farLongService), toScene(halfW, farLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line - only in service box areas */}\n        {/* Near side: from baseline (y=0) to near short service line */}\n        <Line\n          points={[toScene(centerX, 0), toScene(centerX, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        {/* Far side: from far short service line to far baseline */}\n        <Line\n          points={[toScene(centerX, farShortService), toScene(centerX, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}\n\n// Net\nfunction Net() {\n  return (\n    <group position={[0, NET_HEIGHT / 2, 0]}>\n      {/* Net posts */}\n      <mesh position={[-COURT_WIDTH / 2 - 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n      <mesh position={[COURT_WIDTH / 2 + 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n\n      {/* Net mesh (simplified) */}\n      <mesh>\n        <planeGeometry args={[COURT_WIDTH + 0.4, NET_HEIGHT]} />\n        <meshStandardMaterial\n          color=\"#ffffff\"\n          transparent\n          opacity={0.3}\n          side={THREE.DoubleSide}\n        />\n      </mesh>\n\n      {/* Top rope */}\n      <mesh position={[0, NET_HEIGHT / 2, 0]}>\n        <boxGeometry args={[COURT_WIDTH + 0.4, 0.02, 0.02]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n    </group>\n  );\n}\n\n// Animation controller component - handles time updates using refs to avoid stale closures\nfunction AnimationController({\n  isPlaying,\n  timeScale,\n  onProgressUpdate,\n  initialProgress,\n}: {\n  isPlaying: boolean;\n  timeScale: number;\n  onProgressUpdate: (progress: number) => void;\n  initialProgress: number;\n}) {\n  const progressRef = useRef(initialProgress);\n  const isPlayingRef = useRef(isPlaying);\n  const timeScaleRef = useRef(timeScale);\n\n  // Keep refs in sync with props\n  useEffect(() => {\n    isPlayingRef.current = isPlaying;\n  }, [isPlaying]);\n\n  useEffect(() => {\n    timeScaleRef.current = timeScale;\n  }, [timeScale]);\n\n  useEffect(() => {\n    progressRef.current = initialProgress;\n  }, [initialProgress]);\n\n  useFrame((state, delta) => {\n    if (!isPlayingRef.current) return;\n\n    // Update progress based on delta time and timeScale\n    // Full loop is 10 seconds at 1x speed\n    const increment = (delta * timeScaleRef.current) / 10;\n    progressRef.current += increment;\n\n    // Loop back to start\n    if (progressRef.current >= 1) {\n      progressRef.current = 0;\n    }\n\n    // Notify parent (throttled to avoid excessive updates)\n    onProgressUpdate(progressRef.current);\n  });\n\n  return null;\n}\n\n// Main 3D Scene\nfunction Scene({\n  originalTrajectory,\n  refinedTrajectory,\n  showOriginal,\n  showRefined,\n  animationProgress,\n  isPlaying,\n  timeScale = 1,\n}: CourtTrajectory3DProps) {\n  // Local progress state for smooth animation\n  const [localProgress, setLocalProgress] = useState(animationProgress);\n\n  // Sync with external progress when it changes significantly\n  useEffect(() => {\n    const diff = Math.abs(localProgress - animationProgress);\n    if (diff > 0.1 || !isPlaying) {\n      setLocalProgress(animationProgress);\n    }\n  }, [animationProgress, isPlaying, localProgress]);\n\n  return (\n    <>\n      {/* Animation Controller - manages time updates without causing re-renders */}\n      <AnimationController\n        isPlaying={isPlaying}\n        timeScale={timeScale}\n        onProgressUpdate={setLocalProgress}\n        initialProgress={animationProgress}\n      />\n\n      {/* Lighting */}\n      <ambientLight intensity={0.6} />\n      <directionalLight position={[10, 10, 5]} intensity={0.8} />\n      <directionalLight position={[-10, 10, -5]} intensity={0.4} />\n\n      {/* Court */}\n      <Court />\n\n      {/* Net */}\n      <Net />\n\n      {/* Trajectories */}\n      <TrajectoryPath\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <TrajectoryPath\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Balls */}\n      <Ball\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <Ball\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Camera controls */}\n      <OrbitControls\n        enablePan={true}\n        enableZoom={true}\n        enableRotate={true}\n        minDistance={5}\n        maxDistance={25}\n        target={[0, 1, 0]}\n      />\n    </>\n  );\n}\n\n// Error boundary wrapper to prevent blank screens\nfunction ErrorFallback() {\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n      <div className=\"text-center text-white\">\n        <p className=\"text-lg font-medium mb-2\">3D View Unavailable</p>\n        <p className=\"text-sm text-gray-400\">Please try switching to 2D view</p>\n      </div>\n    </div>\n  );\n}\n\n// Export the main component with error handling\nexport default function CourtTrajectory3D(props: CourtTrajectory3DProps) {\n  const [hasError, setHasError] = useState(false);\n\n  // Reset error state when props change\n  useEffect(() => {\n    setHasError(false);\n  }, [props.showOriginal, props.showRefined]);\n\n  if (hasError) {\n    return <ErrorFallback />;\n  }\n\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg overflow-hidden\">\n      <Canvas\n        camera={{\n          position: [0, 10, 12],\n          fov: 50,\n          near: 0.1,\n          far: 100,\n        }}\n        onCreated={(state) => {\n          // Ensure proper WebGL context handling\n          state.gl.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        }}\n        onError={() => setHasError(true)}\n      >\n        <Scene {...props} />\n      </Canvas>\n    </div>\n  );\n}\n","structuredPatch":[{"oldStart":92,"oldLines":15,"newStart":92,"newLines":13,"lines":["     const p1 = trajectory[currentIndex];","     const p2 = trajectory[nextIndex];"," ","-    // Convert court coordinates to 3D","-    const x1 = (p1.x - 0.5) * COURT_WIDTH;","-    const z1 = (p1.y - 0.5) * COURT_LENGTH;","-    const x2 = (p2.x - 0.5) * COURT_WIDTH;","-    const z2 = (p2.y - 0.5) * COURT_LENGTH;","+    // Convert normalized coordinates to 3D scene coordinates","+    const pos1 = normalizedTo3D(p1.x, p1.y);","+    const pos2 = normalizedTo3D(p2.x, p2.y);"," ","     // Interpolate position","-    const x = THREE.MathUtils.lerp(x1, x2, localT);","-    const z = THREE.MathUtils.lerp(z1, z2, localT);","+    const x = THREE.MathUtils.lerp(pos1.x, pos2.x, localT);","+    const z = THREE.MathUtils.lerp(pos1.z, pos2.z, localT);","     const y = calculateHeight(p1.y, p2.y, localT, currentIndex);"," ","     meshRef.current.position.set(x, y, z);"]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"42c2cad2-5e55-4113-8865-d1f8e9e953dc"}
{"parentUuid":"052ea291-37a5-4633-8215-f72697596bb4","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Sx6WZ64vJ9F8zo2S4tfJoA","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I need to update the TrajectoryPath component as well.","signature":"EuIBCkYICxgCKkCiVKqlelCQzxfpI8T9FQ+2E5hjeMM+MP5L50vc/ULAO0nX4XxWy/FHFTDQRj3nKN7vAxqddJPXcUEM2O1ZzxTwEgwr35Uyy6Wnj023ppIaDHXHBIB8TtJW6HiJSSIwM9ag3dOGPsS00THJqiPi1bA9oDekIuZuRM3I5tt+soRZau/Bjzq5Oal1f42t+we6KkqzceW8YYpl9OFYk0X4/sESVZuK1GlgTbSHwmmBbUmjM5PZ8aRdcXKUCGspV1tgFQdn8D0MCd9hIqubgp9VKkI7P7s73D9HYgWahBgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":948,"cache_read_input_tokens":65140,"cache_creation":{"ephemeral_5m_input_tokens":948,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT7KJimNTpF6ysVP69Tn","type":"assistant","uuid":"15b31308-f06c-4521-8836-847323187a2c","timestamp":"2026-01-24T23:58:02.608Z"}
{"parentUuid":"15b31308-f06c-4521-8836-847323187a2c","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Sx6WZ64vJ9F8zo2S4tfJoA","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01HLisfiq5JDeBrg4N9KUt93","name":"Edit","input":{"replace_all":false,"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","old_string":"  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(\n          (p.x - 0.5) * COURT_WIDTH,\n          (nextP.x - 0.5) * COURT_WIDTH,\n          t\n        );\n        const z = THREE.MathUtils.lerp(\n          (p.y - 0.5) * COURT_LENGTH,\n          (nextP.y - 0.5) * COURT_LENGTH,\n          t\n        );\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);","new_string":"  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Convert normalized coordinates to 3D scene coordinates\n      const pos = normalizedTo3D(p.x, p.y);\n      const nextPos = normalizedTo3D(nextP.x, nextP.y);\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(pos.x, nextPos.x, t);\n        const z = THREE.MathUtils.lerp(pos.z, nextPos.z, t);\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":948,"cache_read_input_tokens":65140,"cache_creation":{"ephemeral_5m_input_tokens":948,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXT7KJimNTpF6ysVP69Tn","type":"assistant","uuid":"f2cc7014-a2e0-4b85-95d8-2389d1f9fdf6","timestamp":"2026-01-24T23:58:08.747Z"}
{"parentUuid":"f2cc7014-a2e0-4b85-95d8-2389d1f9fdf6","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01HLisfiq5JDeBrg4N9KUt93","type":"tool_result","content":"The file c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx has been updated successfully."}]},"uuid":"2b874b25-dfa8-4534-8a7e-54585cc8461a","timestamp":"2026-01-24T23:58:09.795Z","toolUseResult":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","oldString":"  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(\n          (p.x - 0.5) * COURT_WIDTH,\n          (nextP.x - 0.5) * COURT_WIDTH,\n          t\n        );\n        const z = THREE.MathUtils.lerp(\n          (p.y - 0.5) * COURT_LENGTH,\n          (nextP.y - 0.5) * COURT_LENGTH,\n          t\n        );\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);","newString":"  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Convert normalized coordinates to 3D scene coordinates\n      const pos = normalizedTo3D(p.x, p.y);\n      const nextPos = normalizedTo3D(nextP.x, nextP.y);\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(pos.x, nextPos.x, t);\n        const z = THREE.MathUtils.lerp(pos.z, nextPos.z, t);\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);","originalFile":"'use client';\n\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\nimport {\n  COURT_SPEC,\n  normalizedTo3D,\n} from '@/lib/courtSpec';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Use shared court spec for all dimensions\nconst COURT_LENGTH = COURT_SPEC.length;\nconst COURT_WIDTH = COURT_SPEC.width;\nconst SINGLES_WIDTH = COURT_SPEC.singlesWidth;\nconst NET_HEIGHT = COURT_SPEC.netHeightPosts;\n\n// Pseudo-3D height curve based on shot type heuristic\nfunction calculateHeight(\n  startY: number,\n  endY: number,\n  t: number,\n  shotIndex: number\n): number {\n  // Determine shot type based on court position change\n  const deltaY = Math.abs(endY - startY);\n\n  // Higher arc for clears (long shots), lower for drives and drops\n  let maxHeight = 1.5; // Default medium height\n  if (deltaY > 0.5) {\n    // Long shot - clear\n    maxHeight = 3.5;\n  } else if (deltaY < 0.2) {\n    // Short shot - drop or net\n    maxHeight = 1.0;\n  }\n\n  // Parabolic arc with some variation\n  const arc = Math.sin(t * Math.PI);\n  return arc * maxHeight + 0.3; // Minimum height above net\n}\n\n// Ball component that follows trajectory - uses refs for smooth animation\nfunction Ball({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const progressRef = useRef(progress);\n\n  // Update progress ref\n  useEffect(() => {\n    progressRef.current = progress;\n  }, [progress]);\n\n  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert normalized coordinates to 3D scene coordinates\n    const pos1 = normalizedTo3D(p1.x, p1.y);\n    const pos2 = normalizedTo3D(p2.x, p2.y);\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(pos1.x, pos2.x, localT);\n    const z = THREE.MathUtils.lerp(pos1.z, pos2.z, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });\n\n  if (!show) return null;\n\n  return (\n    <mesh ref={meshRef}>\n      <sphereGeometry args={[0.1, 16, 16]} />\n      <meshStandardMaterial color={color} />\n    </mesh>\n  );\n}\n\n// Trajectory path visualization - uses memoization for performance\nfunction TrajectoryPath({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(\n          (p.x - 0.5) * COURT_WIDTH,\n          (nextP.x - 0.5) * COURT_WIDTH,\n          t\n        );\n        const z = THREE.MathUtils.lerp(\n          (p.y - 0.5) * COURT_LENGTH,\n          (nextP.y - 0.5) * COURT_LENGTH,\n          t\n        );\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);\n\n  if (!show || points.length < 2) return null;\n\n  return (\n    <Line\n      points={points}\n      color={color}\n      lineWidth={3}\n      dashed\n      dashSize={0.3}\n      gapSize={0.1}\n    />\n  );\n}\n\n// Court plane with lines - BWF standard badminton court\nfunction Court() {\n  // Helper to convert court meters (0,0 at bottom-left) to 3D scene coords (centered)\n  const toScene = (meterX: number, meterY: number): [number, number, number] => {\n    return [\n      meterX - COURT_WIDTH / 2,  // X: centered\n      0,                          // Y: at ground level\n      meterY - COURT_LENGTH / 2, // Z: centered (Y meter = Z scene)\n    ];\n  };\n\n  // Key positions in meters\n  const halfW = COURT_WIDTH;\n  const halfL = COURT_LENGTH;\n  const singlesLeft = COURT_SPEC.singlesLeftX;\n  const singlesRight = COURT_SPEC.singlesRightX;\n  const netY = COURT_SPEC.netY;\n  const nearShortService = COURT_SPEC.nearShortServiceY;\n  const farShortService = COURT_SPEC.farShortServiceY;\n  const nearLongService = COURT_SPEC.nearLongServiceY;\n  const farLongService = COURT_SPEC.farLongServiceY;\n  const centerX = COURT_SPEC.centerX;\n\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary (doubles court) */}\n        <Line\n          points={[\n            toScene(0, 0),\n            toScene(halfW, 0),\n            toScene(halfW, halfL),\n            toScene(0, halfL),\n            toScene(0, 0),\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles sidelines */}\n        <Line\n          points={[toScene(singlesLeft, 0), toScene(singlesLeft, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(singlesRight, 0), toScene(singlesRight, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Net line (horizontal across center) */}\n        <Line\n          points={[toScene(0, netY), toScene(halfW, netY)]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Short service lines */}\n        <Line\n          points={[toScene(0, nearShortService), toScene(halfW, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farShortService), toScene(halfW, farShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Doubles long service lines */}\n        <Line\n          points={[toScene(0, nearLongService), toScene(halfW, nearLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farLongService), toScene(halfW, farLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line - only in service box areas */}\n        {/* Near side: from baseline (y=0) to near short service line */}\n        <Line\n          points={[toScene(centerX, 0), toScene(centerX, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        {/* Far side: from far short service line to far baseline */}\n        <Line\n          points={[toScene(centerX, farShortService), toScene(centerX, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}\n\n// Net\nfunction Net() {\n  return (\n    <group position={[0, NET_HEIGHT / 2, 0]}>\n      {/* Net posts */}\n      <mesh position={[-COURT_WIDTH / 2 - 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n      <mesh position={[COURT_WIDTH / 2 + 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n\n      {/* Net mesh (simplified) */}\n      <mesh>\n        <planeGeometry args={[COURT_WIDTH + 0.4, NET_HEIGHT]} />\n        <meshStandardMaterial\n          color=\"#ffffff\"\n          transparent\n          opacity={0.3}\n          side={THREE.DoubleSide}\n        />\n      </mesh>\n\n      {/* Top rope */}\n      <mesh position={[0, NET_HEIGHT / 2, 0]}>\n        <boxGeometry args={[COURT_WIDTH + 0.4, 0.02, 0.02]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n    </group>\n  );\n}\n\n// Animation controller component - handles time updates using refs to avoid stale closures\nfunction AnimationController({\n  isPlaying,\n  timeScale,\n  onProgressUpdate,\n  initialProgress,\n}: {\n  isPlaying: boolean;\n  timeScale: number;\n  onProgressUpdate: (progress: number) => void;\n  initialProgress: number;\n}) {\n  const progressRef = useRef(initialProgress);\n  const isPlayingRef = useRef(isPlaying);\n  const timeScaleRef = useRef(timeScale);\n\n  // Keep refs in sync with props\n  useEffect(() => {\n    isPlayingRef.current = isPlaying;\n  }, [isPlaying]);\n\n  useEffect(() => {\n    timeScaleRef.current = timeScale;\n  }, [timeScale]);\n\n  useEffect(() => {\n    progressRef.current = initialProgress;\n  }, [initialProgress]);\n\n  useFrame((state, delta) => {\n    if (!isPlayingRef.current) return;\n\n    // Update progress based on delta time and timeScale\n    // Full loop is 10 seconds at 1x speed\n    const increment = (delta * timeScaleRef.current) / 10;\n    progressRef.current += increment;\n\n    // Loop back to start\n    if (progressRef.current >= 1) {\n      progressRef.current = 0;\n    }\n\n    // Notify parent (throttled to avoid excessive updates)\n    onProgressUpdate(progressRef.current);\n  });\n\n  return null;\n}\n\n// Main 3D Scene\nfunction Scene({\n  originalTrajectory,\n  refinedTrajectory,\n  showOriginal,\n  showRefined,\n  animationProgress,\n  isPlaying,\n  timeScale = 1,\n}: CourtTrajectory3DProps) {\n  // Local progress state for smooth animation\n  const [localProgress, setLocalProgress] = useState(animationProgress);\n\n  // Sync with external progress when it changes significantly\n  useEffect(() => {\n    const diff = Math.abs(localProgress - animationProgress);\n    if (diff > 0.1 || !isPlaying) {\n      setLocalProgress(animationProgress);\n    }\n  }, [animationProgress, isPlaying, localProgress]);\n\n  return (\n    <>\n      {/* Animation Controller - manages time updates without causing re-renders */}\n      <AnimationController\n        isPlaying={isPlaying}\n        timeScale={timeScale}\n        onProgressUpdate={setLocalProgress}\n        initialProgress={animationProgress}\n      />\n\n      {/* Lighting */}\n      <ambientLight intensity={0.6} />\n      <directionalLight position={[10, 10, 5]} intensity={0.8} />\n      <directionalLight position={[-10, 10, -5]} intensity={0.4} />\n\n      {/* Court */}\n      <Court />\n\n      {/* Net */}\n      <Net />\n\n      {/* Trajectories */}\n      <TrajectoryPath\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <TrajectoryPath\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Balls */}\n      <Ball\n        trajectory={originalTrajectory}\n        progress={localProgress}\n        color=\"#ef4444\"\n        show={showOriginal}\n      />\n      <Ball\n        trajectory={refinedTrajectory}\n        progress={localProgress}\n        color=\"#22c55e\"\n        show={showRefined}\n      />\n\n      {/* Camera controls */}\n      <OrbitControls\n        enablePan={true}\n        enableZoom={true}\n        enableRotate={true}\n        minDistance={5}\n        maxDistance={25}\n        target={[0, 1, 0]}\n      />\n    </>\n  );\n}\n\n// Error boundary wrapper to prevent blank screens\nfunction ErrorFallback() {\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg flex items-center justify-center\">\n      <div className=\"text-center text-white\">\n        <p className=\"text-lg font-medium mb-2\">3D View Unavailable</p>\n        <p className=\"text-sm text-gray-400\">Please try switching to 2D view</p>\n      </div>\n    </div>\n  );\n}\n\n// Export the main component with error handling\nexport default function CourtTrajectory3D(props: CourtTrajectory3DProps) {\n  const [hasError, setHasError] = useState(false);\n\n  // Reset error state when props change\n  useEffect(() => {\n    setHasError(false);\n  }, [props.showOriginal, props.showRefined]);\n\n  if (hasError) {\n    return <ErrorFallback />;\n  }\n\n  return (\n    <div className=\"w-full h-[500px] bg-gray-900 rounded-lg overflow-hidden\">\n      <Canvas\n        camera={{\n          position: [0, 10, 12],\n          fov: 50,\n          near: 0.1,\n          far: 100,\n        }}\n        onCreated={(state) => {\n          // Ensure proper WebGL context handling\n          state.gl.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        }}\n        onError={() => setHasError(true)}\n      >\n        <Scene {...props} />\n      </Canvas>\n    </div>\n  );\n}\n","structuredPatch":[{"oldStart":136,"oldLines":18,"newStart":136,"newLines":14,"lines":["       const p = trajectory[i];","       const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];"," ","+      // Convert normalized coordinates to 3D scene coordinates","+      const pos = normalizedTo3D(p.x, p.y);","+      const nextPos = normalizedTo3D(nextP.x, nextP.y);","+","       // Add multiple points along each segment for smooth curve","       for (let t = 0; t < 1; t += 0.1) {","-        const x = THREE.MathUtils.lerp(","-          (p.x - 0.5) * COURT_WIDTH,","-          (nextP.x - 0.5) * COURT_WIDTH,","-          t","-        );","-        const z = THREE.MathUtils.lerp(","-          (p.y - 0.5) * COURT_LENGTH,","-          (nextP.y - 0.5) * COURT_LENGTH,","-          t","-        );","+        const x = THREE.MathUtils.lerp(pos.x, nextPos.x, t);","+        const z = THREE.MathUtils.lerp(pos.z, nextPos.z, t);","         const y = calculateHeight(p.y, nextP.y, t, i);","         result.push(new THREE.Vector3(x, y, z));","       }"]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"f2cc7014-a2e0-4b85-95d8-2389d1f9fdf6"}
{"parentUuid":"2b874b25-dfa8-4534-8a7e-54585cc8461a","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01BjwDqPkNJMDVpz8sKsz8Vr","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now let me update the todo list and verify the changes. I should read both files to make sure everything is correct.","signature":"Ep0CCkYICxgCKkAQgtcYhZ+9lG+co/oMwf+uqMSQCCVLS88b2wUTy9Guyw/l/gFPorky6v7hRaQAlRzyah1+I9qEevPAcnvs94TxEgyAHYBp5pU9dIdUIvIaDMbFmknFr81CCyQy+iIwcReYvcmPQCCmeHyLFkWFD2bpLLiaZqy+9XJ9yZjBr95ioFD1VnybVcOPYgHX20NwKoQBAf9goSm2KLjD+46zd2BG2qna04FAjQApsvI2SUkZHahXDmV5cFVZYRoc2s9P775P7gV3yVuXomdL8zc8TY60ttLbGIRUm7kBQlAh3OgP+80cVUaHtViYuzMnNzo0NVo4EvhHkh4OiMqrsw+i8eXZYLa9s+85+fldppWT5a16BfRI4siQGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":863,"cache_read_input_tokens":66088,"cache_creation":{"ephemeral_5m_input_tokens":863,"ephemeral_1h_input_tokens":0},"output_tokens":6,"service_tier":"standard"}},"requestId":"req_011CXT7L6utbV1ogFKEbzwGw","type":"assistant","uuid":"d9c19c4e-6647-472b-a34b-09123322486b","timestamp":"2026-01-24T23:58:13.708Z"}
{"parentUuid":"d9c19c4e-6647-472b-a34b-09123322486b","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01BjwDqPkNJMDVpz8sKsz8Vr","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011sqQ16V6bFGu3KqPDZCe67","name":"TodoWrite","input":{"todos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"in_progress","activeForm":"Verifying coordinate system consistency"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":863,"cache_read_input_tokens":66088,"cache_creation":{"ephemeral_5m_input_tokens":863,"ephemeral_1h_input_tokens":0},"output_tokens":6,"service_tier":"standard"}},"requestId":"req_011CXT7L6utbV1ogFKEbzwGw","type":"assistant","uuid":"41c12227-35c6-4b80-a07c-bcd349c6cfd3","timestamp":"2026-01-24T23:58:16.686Z"}
{"parentUuid":"41c12227-35c6-4b80-a07c-bcd349c6cfd3","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011sqQ16V6bFGu3KqPDZCe67","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"ab197fa1-7499-4c48-ac43-0ce06d5325d3","timestamp":"2026-01-24T23:58:16.826Z","toolUseResult":{"oldTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"in_progress","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"pending","activeForm":"Verifying coordinate system consistency"}],"newTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"in_progress","activeForm":"Verifying coordinate system consistency"}]},"sourceToolAssistantUUID":"41c12227-35c6-4b80-a07c-bcd349c6cfd3"}
{"parentUuid":"ab197fa1-7499-4c48-ac43-0ce06d5325d3","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01B2bqjGS3Vv1JL2FF7L96ud","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Let me verify the changes by reading the updated files to ensure everything is correct and consistent.","signature":"Eo4CCkYICxgCKkCpTMSCrXbodUSGfLWFgCGJGz5xLFH8YhfQ/ww8JnZDgdegGruwwvu0D/EV8xZjJxhINxrb2wCLucRu2+DchC2CEgyM31GFmge7Gh+QtIkaDDDYSh34jG+I5CCX5SIwfwNCWCR0JWHr7WSlldTrTrh4CA3vKLIHScS/RmRz3ZeUFNRWp4qj0y2Tztqs0iNJKnbEjLkcoj1smKiR21pR7gT1NoCENg2XWYyJrfdxg0hYlqQBvN33Cyapiurw/qFnscaoO/K3fWmYrLeZCghDKQMt8+l6+TkHhfsqkBd0tsG/ivMpikK8JTmuuIv99d8szERUAYQpMMOTPDIF0e99iBw2ZIMbKTPvGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":284,"cache_read_input_tokens":66951,"cache_creation":{"ephemeral_5m_input_tokens":284,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7LYyHwTaAjWCQhTmD6","type":"assistant","uuid":"e2f866e1-0885-447e-8bab-4361e0612760","timestamp":"2026-01-24T23:58:19.751Z"}
{"parentUuid":"e2f866e1-0885-447e-8bab-4361e0612760","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01B2bqjGS3Vv1JL2FF7L96ud","type":"message","role":"assistant","content":[{"type":"text","text":"Let me verify the changes by checking the updated files."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":284,"cache_read_input_tokens":66951,"cache_creation":{"ephemeral_5m_input_tokens":284,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7LYyHwTaAjWCQhTmD6","type":"assistant","uuid":"d51d73b1-c7a1-4408-a708-cd2d4b5a9298","timestamp":"2026-01-24T23:58:20.072Z"}
{"parentUuid":"d51d73b1-c7a1-4408-a708-cd2d4b5a9298","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01B2bqjGS3Vv1JL2FF7L96ud","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01541xZpA8NKKUi1CWu1jQPJ","name":"Read","input":{"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","offset":800,"limit":200}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":284,"cache_read_input_tokens":66951,"cache_creation":{"ephemeral_5m_input_tokens":284,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7LYyHwTaAjWCQhTmD6","type":"assistant","uuid":"5ce5adca-f0ae-4cde-b333-d1edcd65204f","timestamp":"2026-01-24T23:58:20.975Z"}
{"parentUuid":"5ce5adca-f0ae-4cde-b333-d1edcd65204f","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01B2bqjGS3Vv1JL2FF7L96ud","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01VBE8Bi5b7nyC5daxjm1irt","name":"Read","input":{"file_path":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","offset":1,"limit":300}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":284,"cache_read_input_tokens":66951,"cache_creation":{"ephemeral_5m_input_tokens":284,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7LYyHwTaAjWCQhTmD6","type":"assistant","uuid":"5327603f-842b-4e96-aa06-6a9da6e508c7","timestamp":"2026-01-24T23:58:21.770Z"}
{"parentUuid":"5ce5adca-f0ae-4cde-b333-d1edcd65204f","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01541xZpA8NKKUi1CWu1jQPJ","type":"tool_result","content":"   800    engine.tRef.current = 0;\n   801    engine.activeViewRef.current = '2d';\n   802\n   803    return () => {\n   804      mountedRef.current = false;\n   805      if (animationRef.current) {\n   806        cancelAnimationFrame(animationRef.current);\n   807        animationRef.current = null;\n   808      }\n   809    };\n   810  }, []);\n   811\n   812  // 2D Canvas rendering loop\n   813  const render2D = useCallback((timestamp: number) => {\n   814    if (!mountedRef.current) return;\n   815\n   816    const engine = engineRef.current;\n   817    const canvas = canvasRef.current;\n   818\n   819    // Only render if 2D view is active\n   820    if (engine.activeViewRef.current !== '2d' || !canvas) {\n   821      // Continue loop but skip render\n   822      animationRef.current = requestAnimationFrame(render2D);\n   823      return;\n   824    }\n   825\n   826    const ctx = canvas.getContext('2d');\n   827    if (!ctx) {\n   828      animationRef.current = requestAnimationFrame(render2D);\n   829      return;\n   830    }\n   831\n   832    // Update time using playback engine\n   833    const t = updatePlaybackTime(engine, timestamp);\n   834\n   835    // Update progress state for UI (throttled)\n   836    setProgress(t);\n   837\n   838    const width = canvas.width;\n   839    const height = canvas.height;\n   840\n   841    // Calculate court scale to maintain BWF aspect ratio (6.1m x 13.4m)\n   842    const padding = 40;\n   843    const { scale, offsetX, offsetY, courtPixelWidth, courtPixelHeight } =\n   844      calculateCourtScale(width, height, padding);\n   845\n   846    // Helper to convert court meters to canvas pixels\n   847    const toCanvas = (meterX: number, meterY: number) =>\n   848      metersToCanvas(meterX, meterY, scale, offsetX, offsetY);\n   849\n   850    // Clear canvas\n   851    ctx.clearRect(0, 0, width, height);\n   852\n   853    // Draw court background (doubles court)\n   854    ctx.fillStyle = '#15803d';\n   855    ctx.fillRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n   856\n   857    // Draw court lines\n   858    ctx.strokeStyle = '#ffffff';\n   859    ctx.lineWidth = 2;\n   860\n   861    // === Outer boundary (doubles) ===\n   862    ctx.strokeRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n   863\n   864    // === Singles sidelines ===\n   865    ctx.lineWidth = 1.5;\n   866    // Left singles sideline\n   867    const singlesLeftTop = toCanvas(COURT_SPEC.singlesLeftX, COURT_SPEC.length);\n   868    const singlesLeftBot = toCanvas(COURT_SPEC.singlesLeftX, 0);\n   869    ctx.beginPath();\n   870    ctx.moveTo(singlesLeftTop.x, singlesLeftTop.y);\n   871    ctx.lineTo(singlesLeftBot.x, singlesLeftBot.y);\n   872    ctx.stroke();\n   873\n   874    // Right singles sideline\n   875    const singlesRightTop = toCanvas(COURT_SPEC.singlesRightX, COURT_SPEC.length);\n   876    const singlesRightBot = toCanvas(COURT_SPEC.singlesRightX, 0);\n   877    ctx.beginPath();\n   878    ctx.moveTo(singlesRightTop.x, singlesRightTop.y);\n   879    ctx.lineTo(singlesRightBot.x, singlesRightBot.y);\n   880    ctx.stroke();\n   881\n   882    // === Net line (center) ===\n   883    ctx.lineWidth = 2;\n   884    const netLeft = toCanvas(0, COURT_SPEC.netY);\n   885    const netRight = toCanvas(COURT_SPEC.width, COURT_SPEC.netY);\n   886    ctx.beginPath();\n   887    ctx.moveTo(netLeft.x, netLeft.y);\n   888    ctx.lineTo(netRight.x, netRight.y);\n   889    ctx.stroke();\n   890\n   891    // === Short service lines ===\n   892    ctx.lineWidth = 1.5;\n   893    // Near short service line (closer to y=0)\n   894    const nearServiceLeft = toCanvas(0, COURT_SPEC.nearShortServiceY);\n   895    const nearServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearShortServiceY);\n   896    ctx.beginPath();\n   897    ctx.moveTo(nearServiceLeft.x, nearServiceLeft.y);\n   898    ctx.lineTo(nearServiceRight.x, nearServiceRight.y);\n   899    ctx.stroke();\n   900\n   901    // Far short service line (closer to y=13.4)\n   902    const farServiceLeft = toCanvas(0, COURT_SPEC.farShortServiceY);\n   903    const farServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farShortServiceY);\n   904    ctx.beginPath();\n   905    ctx.moveTo(farServiceLeft.x, farServiceLeft.y);\n   906    ctx.lineTo(farServiceRight.x, farServiceRight.y);\n   907    ctx.stroke();\n   908\n   909    // === Doubles long service lines ===\n   910    // Near long service line (0.76m from near baseline)\n   911    const nearLongLeft = toCanvas(0, COURT_SPEC.nearLongServiceY);\n   912    const nearLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearLongServiceY);\n   913    ctx.beginPath();\n   914    ctx.moveTo(nearLongLeft.x, nearLongLeft.y);\n   915    ctx.lineTo(nearLongRight.x, nearLongRight.y);\n   916    ctx.stroke();\n   917\n   918    // Far long service line (0.76m from far baseline)\n   919    const farLongLeft = toCanvas(0, COURT_SPEC.farLongServiceY);\n   920    const farLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farLongServiceY);\n   921    ctx.beginPath();\n   922    ctx.moveTo(farLongLeft.x, farLongLeft.y);\n   923    ctx.lineTo(farLongRight.x, farLongRight.y);\n   924    ctx.stroke();\n   925\n   926    // === Center line (only in service box areas) ===\n   927    // Near side: from baseline (y=0) to near short service line (y=4.72)\n   928    const centerNearBot = toCanvas(COURT_SPEC.centerX, 0);\n   929    const centerNearTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.nearShortServiceY);\n   930    ctx.beginPath();\n   931    ctx.moveTo(centerNearBot.x, centerNearBot.y);\n   932    ctx.lineTo(centerNearTop.x, centerNearTop.y);\n   933    ctx.stroke();\n   934\n   935    // Far side: from far short service line (y=8.68) to far baseline (y=13.4)\n   936    const centerFarBot = toCanvas(COURT_SPEC.centerX, COURT_SPEC.farShortServiceY);\n   937    const centerFarTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.length);\n   938    ctx.beginPath();\n   939    ctx.moveTo(centerFarBot.x, centerFarBot.y);\n   940    ctx.lineTo(centerFarTop.x, centerFarTop.y);\n   941    ctx.stroke();\n   942\n   943    // Draw trajectory helper - uses normalized coordinates (0-1)\n   944    const drawTrajectory = (\n   945      points: TrajectoryPoint[],\n   946      color: string,\n   947      progress: number\n   948    ) => {\n   949      const visiblePoints = Math.floor(points.length * progress);\n   950\n   951      // Draw lines\n   952      ctx.strokeStyle = color;\n   953      ctx.lineWidth = 3;\n   954      ctx.setLineDash([5, 5]);\n   955      ctx.beginPath();\n   956\n   957      for (let i = 0; i < visiblePoints; i++) {\n   958        const p = points[i];\n   959        // Convert normalized (0-1) coordinates to canvas pixels\n   960        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);\n   961\n   962        if (i === 0) {\n   963          ctx.moveTo(canvasPos.x, canvasPos.y);\n   964        } else {\n   965          ctx.lineTo(canvasPos.x, canvasPos.y);\n   966        }\n   967      }\n   968      ctx.stroke();\n   969      ctx.setLineDash([]);\n   970\n   971      // Draw points\n   972      for (let i = 0; i < visiblePoints; i++) {\n   973        const p = points[i];\n   974        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);\n   975\n   976        ctx.fillStyle = color;\n   977        ctx.beginPath();\n   978        ctx.arc(canvasPos.x, canvasPos.y, 6, 0, Math.PI * 2);\n   979        ctx.fill();\n   980\n   981        ctx.fillStyle = '#ffffff';\n   982        ctx.beginPath();\n   983        ctx.arc(canvasPos.x, canvasPos.y, 3, 0, Math.PI * 2);\n   984        ctx.fill();\n   985      }\n   986    };\n   987\n   988    // Draw trajectories using refs\n   989    if (showOriginalRef.current && originalTrajectoryRef.current.length > 0) {\n   990      drawTrajectory(originalTrajectoryRef.current, '#ef4444', t);\n   991    }\n   992\n   993    if (showRefinedRef.current && refinedTrajectoryRef.current.length > 0) {\n   994      drawTrajectory(refinedTrajectoryRef.current, '#22c55e', t);\n   995    }\n   996\n   997    // Continue animation loop\n   998    animationRef.current = requestAnimationFrame(render2D);\n   999  }, []);\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"8d437f43-b580-48a6-b25b-a282bbcfdac4","timestamp":"2026-01-24T23:58:24.547Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\app\\strategy\\page.tsx","content":"    engine.tRef.current = 0;\n    engine.activeViewRef.current = '2d';\n\n    return () => {\n      mountedRef.current = false;\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n    };\n  }, []);\n\n  // 2D Canvas rendering loop\n  const render2D = useCallback((timestamp: number) => {\n    if (!mountedRef.current) return;\n\n    const engine = engineRef.current;\n    const canvas = canvasRef.current;\n\n    // Only render if 2D view is active\n    if (engine.activeViewRef.current !== '2d' || !canvas) {\n      // Continue loop but skip render\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      animationRef.current = requestAnimationFrame(render2D);\n      return;\n    }\n\n    // Update time using playback engine\n    const t = updatePlaybackTime(engine, timestamp);\n\n    // Update progress state for UI (throttled)\n    setProgress(t);\n\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Calculate court scale to maintain BWF aspect ratio (6.1m x 13.4m)\n    const padding = 40;\n    const { scale, offsetX, offsetY, courtPixelWidth, courtPixelHeight } =\n      calculateCourtScale(width, height, padding);\n\n    // Helper to convert court meters to canvas pixels\n    const toCanvas = (meterX: number, meterY: number) =>\n      metersToCanvas(meterX, meterY, scale, offsetX, offsetY);\n\n    // Clear canvas\n    ctx.clearRect(0, 0, width, height);\n\n    // Draw court background (doubles court)\n    ctx.fillStyle = '#15803d';\n    ctx.fillRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n\n    // Draw court lines\n    ctx.strokeStyle = '#ffffff';\n    ctx.lineWidth = 2;\n\n    // === Outer boundary (doubles) ===\n    ctx.strokeRect(offsetX, offsetY, courtPixelWidth, courtPixelHeight);\n\n    // === Singles sidelines ===\n    ctx.lineWidth = 1.5;\n    // Left singles sideline\n    const singlesLeftTop = toCanvas(COURT_SPEC.singlesLeftX, COURT_SPEC.length);\n    const singlesLeftBot = toCanvas(COURT_SPEC.singlesLeftX, 0);\n    ctx.beginPath();\n    ctx.moveTo(singlesLeftTop.x, singlesLeftTop.y);\n    ctx.lineTo(singlesLeftBot.x, singlesLeftBot.y);\n    ctx.stroke();\n\n    // Right singles sideline\n    const singlesRightTop = toCanvas(COURT_SPEC.singlesRightX, COURT_SPEC.length);\n    const singlesRightBot = toCanvas(COURT_SPEC.singlesRightX, 0);\n    ctx.beginPath();\n    ctx.moveTo(singlesRightTop.x, singlesRightTop.y);\n    ctx.lineTo(singlesRightBot.x, singlesRightBot.y);\n    ctx.stroke();\n\n    // === Net line (center) ===\n    ctx.lineWidth = 2;\n    const netLeft = toCanvas(0, COURT_SPEC.netY);\n    const netRight = toCanvas(COURT_SPEC.width, COURT_SPEC.netY);\n    ctx.beginPath();\n    ctx.moveTo(netLeft.x, netLeft.y);\n    ctx.lineTo(netRight.x, netRight.y);\n    ctx.stroke();\n\n    // === Short service lines ===\n    ctx.lineWidth = 1.5;\n    // Near short service line (closer to y=0)\n    const nearServiceLeft = toCanvas(0, COURT_SPEC.nearShortServiceY);\n    const nearServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(nearServiceLeft.x, nearServiceLeft.y);\n    ctx.lineTo(nearServiceRight.x, nearServiceRight.y);\n    ctx.stroke();\n\n    // Far short service line (closer to y=13.4)\n    const farServiceLeft = toCanvas(0, COURT_SPEC.farShortServiceY);\n    const farServiceRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(farServiceLeft.x, farServiceLeft.y);\n    ctx.lineTo(farServiceRight.x, farServiceRight.y);\n    ctx.stroke();\n\n    // === Doubles long service lines ===\n    // Near long service line (0.76m from near baseline)\n    const nearLongLeft = toCanvas(0, COURT_SPEC.nearLongServiceY);\n    const nearLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.nearLongServiceY);\n    ctx.beginPath();\n    ctx.moveTo(nearLongLeft.x, nearLongLeft.y);\n    ctx.lineTo(nearLongRight.x, nearLongRight.y);\n    ctx.stroke();\n\n    // Far long service line (0.76m from far baseline)\n    const farLongLeft = toCanvas(0, COURT_SPEC.farLongServiceY);\n    const farLongRight = toCanvas(COURT_SPEC.width, COURT_SPEC.farLongServiceY);\n    ctx.beginPath();\n    ctx.moveTo(farLongLeft.x, farLongLeft.y);\n    ctx.lineTo(farLongRight.x, farLongRight.y);\n    ctx.stroke();\n\n    // === Center line (only in service box areas) ===\n    // Near side: from baseline (y=0) to near short service line (y=4.72)\n    const centerNearBot = toCanvas(COURT_SPEC.centerX, 0);\n    const centerNearTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.nearShortServiceY);\n    ctx.beginPath();\n    ctx.moveTo(centerNearBot.x, centerNearBot.y);\n    ctx.lineTo(centerNearTop.x, centerNearTop.y);\n    ctx.stroke();\n\n    // Far side: from far short service line (y=8.68) to far baseline (y=13.4)\n    const centerFarBot = toCanvas(COURT_SPEC.centerX, COURT_SPEC.farShortServiceY);\n    const centerFarTop = toCanvas(COURT_SPEC.centerX, COURT_SPEC.length);\n    ctx.beginPath();\n    ctx.moveTo(centerFarBot.x, centerFarBot.y);\n    ctx.lineTo(centerFarTop.x, centerFarTop.y);\n    ctx.stroke();\n\n    // Draw trajectory helper - uses normalized coordinates (0-1)\n    const drawTrajectory = (\n      points: TrajectoryPoint[],\n      color: string,\n      progress: number\n    ) => {\n      const visiblePoints = Math.floor(points.length * progress);\n\n      // Draw lines\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        // Convert normalized (0-1) coordinates to canvas pixels\n        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);\n\n        if (i === 0) {\n          ctx.moveTo(canvasPos.x, canvasPos.y);\n        } else {\n          ctx.lineTo(canvasPos.x, canvasPos.y);\n        }\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      // Draw points\n      for (let i = 0; i < visiblePoints; i++) {\n        const p = points[i];\n        const canvasPos = normalizedToCanvas(p.x, p.y, scale, offsetX, offsetY);\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(canvasPos.x, canvasPos.y, 6, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(canvasPos.x, canvasPos.y, 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    };\n\n    // Draw trajectories using refs\n    if (showOriginalRef.current && originalTrajectoryRef.current.length > 0) {\n      drawTrajectory(originalTrajectoryRef.current, '#ef4444', t);\n    }\n\n    if (showRefinedRef.current && refinedTrajectoryRef.current.length > 0) {\n      drawTrajectory(refinedTrajectoryRef.current, '#22c55e', t);\n    }\n\n    // Continue animation loop\n    animationRef.current = requestAnimationFrame(render2D);\n  }, []);","numLines":200,"startLine":800,"totalLines":1290}},"sourceToolAssistantUUID":"5ce5adca-f0ae-4cde-b333-d1edcd65204f"}
{"parentUuid":"5327603f-842b-4e96-aa06-6a9da6e508c7","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01VBE8Bi5b7nyC5daxjm1irt","type":"tool_result","content":"     1'use client';\n     2\n     3import { useRef, useState, useMemo, useEffect } from 'react';\n     4import { Canvas, useFrame } from '@react-three/fiber';\n     5import { OrbitControls, Text, Line } from '@react-three/drei';\n     6import * as THREE from 'three';\n     7import type { TrajectoryPoint } from '@/lib/types';\n     8import {\n     9  COURT_SPEC,\n    10  normalizedTo3D,\n    11} from '@/lib/courtSpec';\n    12\n    13// ============================================\n    14// PHASE 4: 3D Court Visualization with Playback Engine Integration\n    15// ============================================\n    16\n    17interface CourtTrajectory3DProps {\n    18  originalTrajectory: TrajectoryPoint[];\n    19  refinedTrajectory: TrajectoryPoint[];\n    20  showOriginal: boolean;\n    21  showRefined: boolean;\n    22  animationProgress: number;\n    23  isPlaying: boolean;\n    24  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n    25}\n    26\n    27// Use shared court spec for all dimensions\n    28const COURT_LENGTH = COURT_SPEC.length;\n    29const COURT_WIDTH = COURT_SPEC.width;\n    30const SINGLES_WIDTH = COURT_SPEC.singlesWidth;\n    31const NET_HEIGHT = COURT_SPEC.netHeightPosts;\n    32\n    33// Pseudo-3D height curve based on shot type heuristic\n    34function calculateHeight(\n    35  startY: number,\n    36  endY: number,\n    37  t: number,\n    38  shotIndex: number\n    39): number {\n    40  // Determine shot type based on court position change\n    41  const deltaY = Math.abs(endY - startY);\n    42\n    43  // Higher arc for clears (long shots), lower for drives and drops\n    44  let maxHeight = 1.5; // Default medium height\n    45  if (deltaY > 0.5) {\n    46    // Long shot - clear\n    47    maxHeight = 3.5;\n    48  } else if (deltaY < 0.2) {\n    49    // Short shot - drop or net\n    50    maxHeight = 1.0;\n    51  }\n    52\n    53  // Parabolic arc with some variation\n    54  const arc = Math.sin(t * Math.PI);\n    55  return arc * maxHeight + 0.3; // Minimum height above net\n    56}\n    57\n    58// Ball component that follows trajectory - uses refs for smooth animation\n    59function Ball({\n    60  trajectory,\n    61  progress,\n    62  color,\n    63  show,\n    64}: {\n    65  trajectory: TrajectoryPoint[];\n    66  progress: number;\n    67  color: string;\n    68  show: boolean;\n    69}) {\n    70  const meshRef = useRef<THREE.Mesh>(null);\n    71  const progressRef = useRef(progress);\n    72\n    73  // Update progress ref\n    74  useEffect(() => {\n    75    progressRef.current = progress;\n    76  }, [progress]);\n    77\n    78  useFrame(() => {\n    79    if (!meshRef.current || !show || trajectory.length < 2) return;\n    80\n    81    const currentProgress = progressRef.current;\n    82\n    83    // Calculate current position along trajectory\n    84    const totalPoints = trajectory.length;\n    85    const currentIndex = Math.min(\n    86      Math.floor(currentProgress * totalPoints),\n    87      totalPoints - 1\n    88    );\n    89    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    90    const localT = (currentProgress * totalPoints) % 1;\n    91\n    92    const p1 = trajectory[currentIndex];\n    93    const p2 = trajectory[nextIndex];\n    94\n    95    // Convert normalized coordinates to 3D scene coordinates\n    96    const pos1 = normalizedTo3D(p1.x, p1.y);\n    97    const pos2 = normalizedTo3D(p2.x, p2.y);\n    98\n    99    // Interpolate position\n   100    const x = THREE.MathUtils.lerp(pos1.x, pos2.x, localT);\n   101    const z = THREE.MathUtils.lerp(pos1.z, pos2.z, localT);\n   102    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n   103\n   104    meshRef.current.position.set(x, y, z);\n   105  });\n   106\n   107  if (!show) return null;\n   108\n   109  return (\n   110    <mesh ref={meshRef}>\n   111      <sphereGeometry args={[0.1, 16, 16]} />\n   112      <meshStandardMaterial color={color} />\n   113    </mesh>\n   114  );\n   115}\n   116\n   117// Trajectory path visualization - uses memoization for performance\n   118function TrajectoryPath({\n   119  trajectory,\n   120  progress,\n   121  color,\n   122  show,\n   123}: {\n   124  trajectory: TrajectoryPoint[];\n   125  progress: number;\n   126  color: string;\n   127  show: boolean;\n   128}) {\n   129  const points = useMemo(() => {\n   130    if (!show || trajectory.length < 2) return [];\n   131\n   132    const result: THREE.Vector3[] = [];\n   133    const visiblePoints = Math.ceil(progress * trajectory.length);\n   134\n   135    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n   136      const p = trajectory[i];\n   137      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n   138\n   139      // Convert normalized coordinates to 3D scene coordinates\n   140      const pos = normalizedTo3D(p.x, p.y);\n   141      const nextPos = normalizedTo3D(nextP.x, nextP.y);\n   142\n   143      // Add multiple points along each segment for smooth curve\n   144      for (let t = 0; t < 1; t += 0.1) {\n   145        const x = THREE.MathUtils.lerp(pos.x, nextPos.x, t);\n   146        const z = THREE.MathUtils.lerp(pos.z, nextPos.z, t);\n   147        const y = calculateHeight(p.y, nextP.y, t, i);\n   148        result.push(new THREE.Vector3(x, y, z));\n   149      }\n   150    }\n   151\n   152    return result;\n   153  }, [trajectory, progress, show]);\n   154\n   155  if (!show || points.length < 2) return null;\n   156\n   157  return (\n   158    <Line\n   159      points={points}\n   160      color={color}\n   161      lineWidth={3}\n   162      dashed\n   163      dashSize={0.3}\n   164      gapSize={0.1}\n   165    />\n   166  );\n   167}\n   168\n   169// Court plane with lines - BWF standard badminton court\n   170function Court() {\n   171  // Helper to convert court meters (0,0 at bottom-left) to 3D scene coords (centered)\n   172  const toScene = (meterX: number, meterY: number): [number, number, number] => {\n   173    return [\n   174      meterX - COURT_WIDTH / 2,  // X: centered\n   175      0,                          // Y: at ground level\n   176      meterY - COURT_LENGTH / 2, // Z: centered (Y meter = Z scene)\n   177    ];\n   178  };\n   179\n   180  // Key positions in meters\n   181  const halfW = COURT_WIDTH;\n   182  const halfL = COURT_LENGTH;\n   183  const singlesLeft = COURT_SPEC.singlesLeftX;\n   184  const singlesRight = COURT_SPEC.singlesRightX;\n   185  const netY = COURT_SPEC.netY;\n   186  const nearShortService = COURT_SPEC.nearShortServiceY;\n   187  const farShortService = COURT_SPEC.farShortServiceY;\n   188  const nearLongService = COURT_SPEC.nearLongServiceY;\n   189  const farLongService = COURT_SPEC.farLongServiceY;\n   190  const centerX = COURT_SPEC.centerX;\n   191\n   192  return (\n   193    <group>\n   194      {/* Court surface */}\n   195      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n   196        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n   197        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n   198      </mesh>\n   199\n   200      {/* Court lines */}\n   201      <group position={[0, 0.01, 0]}>\n   202        {/* Outer boundary (doubles court) */}\n   203        <Line\n   204          points={[\n   205            toScene(0, 0),\n   206            toScene(halfW, 0),\n   207            toScene(halfW, halfL),\n   208            toScene(0, halfL),\n   209            toScene(0, 0),\n   210          ]}\n   211          color=\"white\"\n   212          lineWidth={2}\n   213        />\n   214\n   215        {/* Singles sidelines */}\n   216        <Line\n   217          points={[toScene(singlesLeft, 0), toScene(singlesLeft, halfL)]}\n   218          color=\"white\"\n   219          lineWidth={1}\n   220        />\n   221        <Line\n   222          points={[toScene(singlesRight, 0), toScene(singlesRight, halfL)]}\n   223          color=\"white\"\n   224          lineWidth={1}\n   225        />\n   226\n   227        {/* Net line (horizontal across center) */}\n   228        <Line\n   229          points={[toScene(0, netY), toScene(halfW, netY)]}\n   230          color=\"white\"\n   231          lineWidth={2}\n   232        />\n   233\n   234        {/* Short service lines */}\n   235        <Line\n   236          points={[toScene(0, nearShortService), toScene(halfW, nearShortService)]}\n   237          color=\"white\"\n   238          lineWidth={1}\n   239        />\n   240        <Line\n   241          points={[toScene(0, farShortService), toScene(halfW, farShortService)]}\n   242          color=\"white\"\n   243          lineWidth={1}\n   244        />\n   245\n   246        {/* Doubles long service lines */}\n   247        <Line\n   248          points={[toScene(0, nearLongService), toScene(halfW, nearLongService)]}\n   249          color=\"white\"\n   250          lineWidth={1}\n   251        />\n   252        <Line\n   253          points={[toScene(0, farLongService), toScene(halfW, farLongService)]}\n   254          color=\"white\"\n   255          lineWidth={1}\n   256        />\n   257\n   258        {/* Center line - only in service box areas */}\n   259        {/* Near side: from baseline (y=0) to near short service line */}\n   260        <Line\n   261          points={[toScene(centerX, 0), toScene(centerX, nearShortService)]}\n   262          color=\"white\"\n   263          lineWidth={1}\n   264        />\n   265        {/* Far side: from far short service line to far baseline */}\n   266        <Line\n   267          points={[toScene(centerX, farShortService), toScene(centerX, halfL)]}\n   268          color=\"white\"\n   269          lineWidth={1}\n   270        />\n   271      </group>\n   272    </group>\n   273  );\n   274}\n   275\n   276// Net\n   277function Net() {\n   278  return (\n   279    <group position={[0, NET_HEIGHT / 2, 0]}>\n   280      {/* Net posts */}\n   281      <mesh position={[-COURT_WIDTH / 2 - 0.2, 0, 0]}>\n   282        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n   283        <meshStandardMaterial color=\"#333\" />\n   284      </mesh>\n   285      <mesh position={[COURT_WIDTH / 2 + 0.2, 0, 0]}>\n   286        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n   287        <meshStandardMaterial color=\"#333\" />\n   288      </mesh>\n   289\n   290      {/* Net mesh (simplified) */}\n   291      <mesh>\n   292        <planeGeometry args={[COURT_WIDTH + 0.4, NET_HEIGHT]} />\n   293        <meshStandardMaterial\n   294          color=\"#ffffff\"\n   295          transparent\n   296          opacity={0.3}\n   297          side={THREE.DoubleSide}\n   298        />\n   299      </mesh>\n   300\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"41dd20e4-bd0d-4198-87d0-f6fc03618941","timestamp":"2026-01-24T23:58:24.549Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\\src\\components\\CourtTrajectory3D.tsx","content":"'use client';\n\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text, Line } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { TrajectoryPoint } from '@/lib/types';\nimport {\n  COURT_SPEC,\n  normalizedTo3D,\n} from '@/lib/courtSpec';\n\n// ============================================\n// PHASE 4: 3D Court Visualization with Playback Engine Integration\n// ============================================\n\ninterface CourtTrajectory3DProps {\n  originalTrajectory: TrajectoryPoint[];\n  refinedTrajectory: TrajectoryPoint[];\n  showOriginal: boolean;\n  showRefined: boolean;\n  animationProgress: number;\n  isPlaying: boolean;\n  timeScale?: number; // Speed multiplier: 0.25, 0.5, 1, 2\n}\n\n// Use shared court spec for all dimensions\nconst COURT_LENGTH = COURT_SPEC.length;\nconst COURT_WIDTH = COURT_SPEC.width;\nconst SINGLES_WIDTH = COURT_SPEC.singlesWidth;\nconst NET_HEIGHT = COURT_SPEC.netHeightPosts;\n\n// Pseudo-3D height curve based on shot type heuristic\nfunction calculateHeight(\n  startY: number,\n  endY: number,\n  t: number,\n  shotIndex: number\n): number {\n  // Determine shot type based on court position change\n  const deltaY = Math.abs(endY - startY);\n\n  // Higher arc for clears (long shots), lower for drives and drops\n  let maxHeight = 1.5; // Default medium height\n  if (deltaY > 0.5) {\n    // Long shot - clear\n    maxHeight = 3.5;\n  } else if (deltaY < 0.2) {\n    // Short shot - drop or net\n    maxHeight = 1.0;\n  }\n\n  // Parabolic arc with some variation\n  const arc = Math.sin(t * Math.PI);\n  return arc * maxHeight + 0.3; // Minimum height above net\n}\n\n// Ball component that follows trajectory - uses refs for smooth animation\nfunction Ball({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const progressRef = useRef(progress);\n\n  // Update progress ref\n  useEffect(() => {\n    progressRef.current = progress;\n  }, [progress]);\n\n  useFrame(() => {\n    if (!meshRef.current || !show || trajectory.length < 2) return;\n\n    const currentProgress = progressRef.current;\n\n    // Calculate current position along trajectory\n    const totalPoints = trajectory.length;\n    const currentIndex = Math.min(\n      Math.floor(currentProgress * totalPoints),\n      totalPoints - 1\n    );\n    const nextIndex = Math.min(currentIndex + 1, totalPoints - 1);\n    const localT = (currentProgress * totalPoints) % 1;\n\n    const p1 = trajectory[currentIndex];\n    const p2 = trajectory[nextIndex];\n\n    // Convert normalized coordinates to 3D scene coordinates\n    const pos1 = normalizedTo3D(p1.x, p1.y);\n    const pos2 = normalizedTo3D(p2.x, p2.y);\n\n    // Interpolate position\n    const x = THREE.MathUtils.lerp(pos1.x, pos2.x, localT);\n    const z = THREE.MathUtils.lerp(pos1.z, pos2.z, localT);\n    const y = calculateHeight(p1.y, p2.y, localT, currentIndex);\n\n    meshRef.current.position.set(x, y, z);\n  });\n\n  if (!show) return null;\n\n  return (\n    <mesh ref={meshRef}>\n      <sphereGeometry args={[0.1, 16, 16]} />\n      <meshStandardMaterial color={color} />\n    </mesh>\n  );\n}\n\n// Trajectory path visualization - uses memoization for performance\nfunction TrajectoryPath({\n  trajectory,\n  progress,\n  color,\n  show,\n}: {\n  trajectory: TrajectoryPoint[];\n  progress: number;\n  color: string;\n  show: boolean;\n}) {\n  const points = useMemo(() => {\n    if (!show || trajectory.length < 2) return [];\n\n    const result: THREE.Vector3[] = [];\n    const visiblePoints = Math.ceil(progress * trajectory.length);\n\n    for (let i = 0; i < Math.min(visiblePoints, trajectory.length); i++) {\n      const p = trajectory[i];\n      const nextP = trajectory[Math.min(i + 1, trajectory.length - 1)];\n\n      // Convert normalized coordinates to 3D scene coordinates\n      const pos = normalizedTo3D(p.x, p.y);\n      const nextPos = normalizedTo3D(nextP.x, nextP.y);\n\n      // Add multiple points along each segment for smooth curve\n      for (let t = 0; t < 1; t += 0.1) {\n        const x = THREE.MathUtils.lerp(pos.x, nextPos.x, t);\n        const z = THREE.MathUtils.lerp(pos.z, nextPos.z, t);\n        const y = calculateHeight(p.y, nextP.y, t, i);\n        result.push(new THREE.Vector3(x, y, z));\n      }\n    }\n\n    return result;\n  }, [trajectory, progress, show]);\n\n  if (!show || points.length < 2) return null;\n\n  return (\n    <Line\n      points={points}\n      color={color}\n      lineWidth={3}\n      dashed\n      dashSize={0.3}\n      gapSize={0.1}\n    />\n  );\n}\n\n// Court plane with lines - BWF standard badminton court\nfunction Court() {\n  // Helper to convert court meters (0,0 at bottom-left) to 3D scene coords (centered)\n  const toScene = (meterX: number, meterY: number): [number, number, number] => {\n    return [\n      meterX - COURT_WIDTH / 2,  // X: centered\n      0,                          // Y: at ground level\n      meterY - COURT_LENGTH / 2, // Z: centered (Y meter = Z scene)\n    ];\n  };\n\n  // Key positions in meters\n  const halfW = COURT_WIDTH;\n  const halfL = COURT_LENGTH;\n  const singlesLeft = COURT_SPEC.singlesLeftX;\n  const singlesRight = COURT_SPEC.singlesRightX;\n  const netY = COURT_SPEC.netY;\n  const nearShortService = COURT_SPEC.nearShortServiceY;\n  const farShortService = COURT_SPEC.farShortServiceY;\n  const nearLongService = COURT_SPEC.nearLongServiceY;\n  const farLongService = COURT_SPEC.farLongServiceY;\n  const centerX = COURT_SPEC.centerX;\n\n  return (\n    <group>\n      {/* Court surface */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <planeGeometry args={[COURT_WIDTH, COURT_LENGTH]} />\n        <meshStandardMaterial color=\"#15803d\" side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Court lines */}\n      <group position={[0, 0.01, 0]}>\n        {/* Outer boundary (doubles court) */}\n        <Line\n          points={[\n            toScene(0, 0),\n            toScene(halfW, 0),\n            toScene(halfW, halfL),\n            toScene(0, halfL),\n            toScene(0, 0),\n          ]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Singles sidelines */}\n        <Line\n          points={[toScene(singlesLeft, 0), toScene(singlesLeft, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(singlesRight, 0), toScene(singlesRight, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Net line (horizontal across center) */}\n        <Line\n          points={[toScene(0, netY), toScene(halfW, netY)]}\n          color=\"white\"\n          lineWidth={2}\n        />\n\n        {/* Short service lines */}\n        <Line\n          points={[toScene(0, nearShortService), toScene(halfW, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farShortService), toScene(halfW, farShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Doubles long service lines */}\n        <Line\n          points={[toScene(0, nearLongService), toScene(halfW, nearLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        <Line\n          points={[toScene(0, farLongService), toScene(halfW, farLongService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n\n        {/* Center line - only in service box areas */}\n        {/* Near side: from baseline (y=0) to near short service line */}\n        <Line\n          points={[toScene(centerX, 0), toScene(centerX, nearShortService)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n        {/* Far side: from far short service line to far baseline */}\n        <Line\n          points={[toScene(centerX, farShortService), toScene(centerX, halfL)]}\n          color=\"white\"\n          lineWidth={1}\n        />\n      </group>\n    </group>\n  );\n}\n\n// Net\nfunction Net() {\n  return (\n    <group position={[0, NET_HEIGHT / 2, 0]}>\n      {/* Net posts */}\n      <mesh position={[-COURT_WIDTH / 2 - 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n      <mesh position={[COURT_WIDTH / 2 + 0.2, 0, 0]}>\n        <cylinderGeometry args={[0.05, 0.05, NET_HEIGHT, 8]} />\n        <meshStandardMaterial color=\"#333\" />\n      </mesh>\n\n      {/* Net mesh (simplified) */}\n      <mesh>\n        <planeGeometry args={[COURT_WIDTH + 0.4, NET_HEIGHT]} />\n        <meshStandardMaterial\n          color=\"#ffffff\"\n          transparent\n          opacity={0.3}\n          side={THREE.DoubleSide}\n        />\n      </mesh>\n","numLines":300,"startLine":1,"totalLines":487}},"sourceToolAssistantUUID":"5327603f-842b-4e96-aa06-6a9da6e508c7"}
{"parentUuid":"41dd20e4-bd0d-4198-87d0-f6fc03618941","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Tc1yhCgF5q9ZqLinSb3vvD","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"The code changes look correct. Let me verify the courtSpec.ts file to make sure everything is consistent and run a build/type check.","signature":"Eq0CCkYICxgCKkCfDbEAXyhFQPM/ET/HNwM1VyZN4EVtxtpR38wKYi3e8V5+8NJtexCG6GazfDTe5sFdsYLHuTAkWxyOfC+YmFpsEgwFMCW5YdLumR5TbvUaDG0okCQGUxOZzWNuVyIw3crXx2epHG4n+BC9Jycd0eEF+IHk/e4rMS4ax1oV69WPw/MroroGFo9mO85tke+dKpQBbMasEwW4+1V2eWxQi5z6krDwTzh578p5yJx8fWNiWfxFTKsNFoAhziepZX6dKLf7hPtuKHgCl8JQqkY9MeoYYqLCTkyiM2/fHvOp2sWFy4k1QWs5W4sPmMeLVnsonS3gMWA0jn5m4/p2XeG5vLIV6/qEmK3kQ5SRz4oDnGxyGgtfw//d+ngTbVskiPyzGWZ5Ygo9ohgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":7216,"cache_read_input_tokens":67235,"cache_creation":{"ephemeral_5m_input_tokens":7216,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7M7iHdqvBSQWBx4ynP","type":"assistant","uuid":"304e9ac0-db4f-45ae-8696-c65233af029f","timestamp":"2026-01-24T23:58:30.416Z"}
{"parentUuid":"304e9ac0-db4f-45ae-8696-c65233af029f","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Tc1yhCgF5q9ZqLinSb3vvD","type":"message","role":"assistant","content":[{"type":"text","text":"The changes look correct. Let me verify the build compiles successfully."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":7216,"cache_read_input_tokens":67235,"cache_creation":{"ephemeral_5m_input_tokens":7216,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7M7iHdqvBSQWBx4ynP","type":"assistant","uuid":"f1167cfc-5c75-4053-829c-252775f28cf8","timestamp":"2026-01-24T23:58:31.014Z"}
{"parentUuid":"f1167cfc-5c75-4053-829c-252775f28cf8","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Tc1yhCgF5q9ZqLinSb3vvD","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Jn4LW169JJRyWS61hQAXZY","name":"Bash","input":{"command":"cd \"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack\\rallycoach\" && npx tsc --noEmit 2>&1 | head -50","description":"TypeScript type check for the court changes","timeout":60000}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":7216,"cache_read_input_tokens":67235,"cache_creation":{"ephemeral_5m_input_tokens":7216,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7M7iHdqvBSQWBx4ynP","type":"assistant","uuid":"ddab1241-481f-4bbe-be74-299fa5135663","timestamp":"2026-01-24T23:58:32.776Z"}
{"parentUuid":"ddab1241-481f-4bbe-be74-299fa5135663","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Jn4LW169JJRyWS61hQAXZY","type":"tool_result","content":"","is_error":false}]},"uuid":"54c96f5c-aad5-4fcc-a7cd-dca9599df596","timestamp":"2026-01-24T23:58:40.433Z","toolUseResult":{"stdout":"","stderr":"","interrupted":false,"isImage":false},"sourceToolAssistantUUID":"ddab1241-481f-4bbe-be74-299fa5135663"}
{"parentUuid":"54c96f5c-aad5-4fcc-a7cd-dca9599df596","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_017VuXmB11zobzXyHwwjtovo","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"TypeScript type check passed. Let me update the todo list and provide a summary of the changes.","signature":"EocCCkYICxgCKkAH29w59DDkS0KhM3acbs5lZ9M8OP/poLBipNf5ZRisP41sIAcfg9US/FVDlbFmcAc26hbhFPGcMd6fnedrBecmEgwA3bsIPFd1FYa9s4oaDBOGbqmkfpiDMYeBbSIwcazuNyKWmFKRIbMAfKKHbJzl33P7P5+0kiAaxHZlACN/5imeA1sbXyocViCPF2qtKm9wpNLSLSBdptQQjzfPdbnQa5uR0dyqgrDYIN8CqtYSl7UG9qqELBiKRKdjKaFWeRNGQa7hcwElGtEjVPYjwHf19N/JHASzW/FusYqWIu+cLtiPQCpH64+ZFcJAzlmTBdXy6I17dwVldEofElcOkrEYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":221,"cache_read_input_tokens":74451,"cache_creation":{"ephemeral_5m_input_tokens":221,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7NHjpQEf91mNaY1mJu","type":"assistant","uuid":"b7a0217f-fc8a-4d6f-977a-f5370ebbb3bf","timestamp":"2026-01-24T23:58:43.811Z"}
{"parentUuid":"b7a0217f-fc8a-4d6f-977a-f5370ebbb3bf","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_017VuXmB11zobzXyHwwjtovo","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01HUfmXdhoNGEkV2LUNFiDr5","name":"TodoWrite","input":{"todos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"completed","activeForm":"Verifying coordinate system consistency"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":221,"cache_read_input_tokens":74451,"cache_creation":{"ephemeral_5m_input_tokens":221,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7NHjpQEf91mNaY1mJu","type":"assistant","uuid":"64217799-55bf-433d-8d46-3a477d8cdc75","timestamp":"2026-01-24T23:58:46.471Z"}
{"parentUuid":"64217799-55bf-433d-8d46-3a477d8cdc75","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01HUfmXdhoNGEkV2LUNFiDr5","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"b53870c1-f5e4-4eae-abd2-85c2f99836be","timestamp":"2026-01-24T23:58:46.561Z","toolUseResult":{"oldTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"in_progress","activeForm":"Verifying coordinate system consistency"}],"newTodos":[{"content":"Create shared court specification module (src/lib/courtSpec.ts)","status":"completed","activeForm":"Creating shared court specification module"},{"content":"Update 2D canvas court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 2D canvas court rendering"},{"content":"Update 3D court rendering with correct BWF dimensions","status":"completed","activeForm":"Updating 3D court rendering"},{"content":"Verify both 2D and 3D use same coordinate system","status":"completed","activeForm":"Verifying coordinate system consistency"}]},"sourceToolAssistantUUID":"64217799-55bf-433d-8d46-3a477d8cdc75"}
{"parentUuid":"b53870c1-f5e4-4eae-abd2-85c2f99836be","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01PLGtgyfRHTNAiV2DzobHBw","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"All tasks are completed. Let me provide a summary of the changes made.","signature":"Eu4BCkYICxgCKkDCbuEfZTtGyxClh1nZP0mHFGWRsnIQKLKRp5OAlSKSognMIbpILTM+IWPUGkQEnm8zAoSCaJyTFNYvyUHUbftGEgyzIbIYsNMpATydwsoaDJjppvRppWtEfTWCSyIwck3kYBs14qjiTq+R40j5J8jqFFyKAAonaV5Y9hgE5PrAwlUzVLv6aI9Y3VuN0rYsKlb+Kt39MZuE+Ws5qyW2A1YchqizYR+qE9FBlcDUF0a2Sy6X4EDEjPG5hLE/pNcGumtAfpWqyEjmDGmcpBb5VD1vYB+TIoMQKfi86JAGxUFuPARSVCFM3xgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":278,"cache_read_input_tokens":74672,"cache_creation":{"ephemeral_5m_input_tokens":278,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7NjX7A74pdpgoMf41v","type":"assistant","uuid":"67490e10-c229-459a-8a08-06b22b4df976","timestamp":"2026-01-24T23:58:49.491Z"}
{"parentUuid":"67490e10-c229-459a-8a08-06b22b4df976","isSidechain":false,"userType":"external","cwd":"c:\\Users\\ASUS\\Desktop\\Gemini 3 hack","sessionId":"ed7ed78f-a714-4448-966f-a51e9c391c1e","version":"2.1.17","gitBranch":"","slug":"glimmering-tinkering-flame","message":{"model":"claude-opus-4-5-20251101","id":"msg_01PLGtgyfRHTNAiV2DzobHBw","type":"message","role":"assistant","content":[{"type":"text","text":"All changes have been implemented. Here's a summary:\n\n## Summary of Changes\n\n### Files Changed\n\n1. **[src/lib/courtSpec.ts](rallycoach/src/lib/courtSpec.ts)** (NEW)\n   - Shared BWF-standard badminton court specification module\n   - All dimensions in meters:\n     - Court: 13.4m x 6.1m (doubles)\n     - Singles width: 5.18m (0.46m inset each side)\n     - Net at y=6.7m (center)\n     - Short service lines at y=4.72m and y=8.68m\n     - Doubles long service lines at y=0.76m and y=12.64m\n     - Center line at x=3.05m (only in service boxes)\n   - Helper functions for coordinate conversion: `normalizedToMeters`, `metersToCanvas`, `normalizedTo3D`, `calculateCourtScale`\n\n2. **[src/app/strategy/page.tsx](rallycoach/src/app/strategy/page.tsx:841-941)**\n   - Updated 2D canvas rendering to use `COURT_SPEC` and `calculateCourtScale()`\n   - Maintains correct BWF aspect ratio (6.1:13.4)\n   - Draws all correct court markings:\n     - Outer doubles boundary\n     - Inner singles sidelines\n     - Net line\n     - Short service lines\n     - Doubles long service lines\n     - Center line (only in service box areas)\n   - Trajectory rendering updated to use `normalizedToCanvas()`\n\n3. **[src/components/CourtTrajectory3D.tsx](rallycoach/src/components/CourtTrajectory3D.tsx:1-274)**\n   - Updated to import and use shared `COURT_SPEC`\n   - `Court()` component rewritten with correct BWF court lines\n   - `Ball` and `TrajectoryPath` components use `normalizedTo3D()` for coordinate conversion\n\n### Acceptance Criteria Met\n\n- Court shows correct badminton markings (outer doubles, singles sidelines, net, short service, long service, center line)\n- 2D and 3D views use the **same** `COURT_SPEC` module - no geometry mismatch\n- Trajectory points mapped correctly via shared conversion functions\n- TypeScript build passes with no errors\n\n### Visual Validation Steps\n\n1. Navigate to `/strategy` page\n2. Upload or select a video and process it\n3. In the results view, verify:\n   - The court has a vertical orientation (longer than wide)\n   - Net line is in the middle horizontally\n   - Singles sidelines are visible inside the doubles boundary\n   - Center line only appears in the service box areas (not across the whole court)\n   - Short service lines are ~35% from each end\n   - Long service lines are near the baselines (~6% from each end)\n4. Toggle between 2D and 3D views - court geometry should be identical\n5. Trajectory points should map correctly to the court"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":278,"cache_read_input_tokens":74672,"cache_creation":{"ephemeral_5m_input_tokens":278,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXT7NjX7A74pdpgoMf41v","type":"assistant","uuid":"482e749c-3b67-4fce-854b-3e17eeb93c01","timestamp":"2026-01-24T23:59:03.153Z"}
{"type":"summary","summary":"Badminton Court Rendering Fix Strategy Mode","leafUuid":"482e749c-3b67-4fce-854b-3e17eeb93c01"}
